---
import BaseLayout from "@layouts/BaseLayout.astro";
import { settings } from "src/config";

import PostAlert from "@components/PostAlert.astro";

export const prerender = false;

const response = await fetch(
  import.meta.env.KEY + `/rest/v1/${settings.site.api_item}`,
  {
    headers: {
      apikey: import.meta.env.KEY_ANON,
    },
  },
);
const items = await response.json();

interface Props {
  name: string;
  description: string;
  created_at: string;
}
---

<BaseLayout title="Записи" color1="#171949" color2="#49CA9C">
  <div class="grid items-start md:grid-cols-2 gap-5">
    {
      items
        .sort((a, b) => new Date(b.created_at) - new Date(a.created_at))
        .map((item) => <PostAlert item={item} />)
    }
  </div>
</BaseLayout>
