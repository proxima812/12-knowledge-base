import{j as ce}from"./jsx-runtime.391947bd.js";import{r as Ne}from"./index.ed373d49.js";import{r as Pn}from"./index.22bf348a.js";function Jr(a,t){for(var e=0;e<t.length;e++){const r=t[e];if(typeof r!="string"&&!Array.isArray(r)){for(const n in r)if(n!=="default"&&!(n in a)){const i=Object.getOwnPropertyDescriptor(r,n);i&&Object.defineProperty(a,n,i.get?i:{enumerable:!0,get:()=>r[n]})}}}return Object.freeze(Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}))}var pe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function dt(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var Vt=Object.defineProperty,Nn=Object.getOwnPropertyDescriptor,jn=Object.getOwnPropertyNames,Rn=Object.prototype.hasOwnProperty,Ln=(a,t)=>{for(var e in t)Vt(a,e,{get:t[e],enumerable:!0})},In=(a,t,e,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of jn(t))!Rn.call(a,n)&&n!==e&&Vt(a,n,{get:()=>t[n],enumerable:!(r=Nn(t,n))||r.enumerable});return a},Cn=a=>In(Vt({},"__esModule",{value:!0}),a),$n=(a,t,e)=>new Promise((r,n)=>{var i=h=>{try{d(e.next(h))}catch(p){n(p)}},u=h=>{try{d(e.throw(h))}catch(p){n(p)}},d=h=>h.done?r(h.value):Promise.resolve(h.value).then(i,u);d((e=e.apply(a,t)).next())}),Zr={};Ln(Zr,{SessionContextProvider:()=>qn,useSession:()=>Un,useSessionContext:()=>Mn,useSupabaseClient:()=>Bn,useUser:()=>Fn});var It=Cn(Zr),_e=Ne,Dn=ce,it=(0,_e.createContext)({isLoading:!0,session:null,error:null,supabaseClient:{}}),qn=({supabaseClient:a,initialSession:t=null,children:e})=>{const[r,n]=(0,_e.useState)(t),[i,u]=(0,_e.useState)(!t),[d,h]=(0,_e.useState)();(0,_e.useEffect)(()=>{!r&&t&&n(t)},[r,t]),(0,_e.useEffect)(()=>{let c=!0;function l(){return $n(this,null,function*(){const{data:{session:o},error:s}=yield a.auth.getSession();if(c){if(s){h(s),u(!1);return}n(o),u(!1)}})}return l(),()=>{c=!1}},[]),(0,_e.useEffect)(()=>{const{data:{subscription:c}}=a.auth.onAuthStateChange((l,o)=>{o&&(l==="SIGNED_IN"||l==="TOKEN_REFRESHED"||l==="USER_UPDATED")&&n(o),l==="SIGNED_OUT"&&n(null)});return()=>{c.unsubscribe()}},[]);const p=(0,_e.useMemo)(()=>i?{isLoading:!0,session:null,error:null,supabaseClient:a}:d?{isLoading:!1,session:null,error:d,supabaseClient:a}:{isLoading:!1,session:r,error:null,supabaseClient:a},[i,r,d]);return(0,Dn.jsx)(it.Provider,{value:p,children:e})},Mn=()=>{const a=(0,_e.useContext)(it);if(a===void 0)throw new Error("useSessionContext must be used within a SessionContextProvider.");return a};function Bn(){const a=(0,_e.useContext)(it);if(a===void 0)throw new Error("useSupabaseClient must be used within a SessionContextProvider.");return a.supabaseClient}var Un=()=>{const a=(0,_e.useContext)(it);if(a===void 0)throw new Error("useSession must be used within a SessionContextProvider.");return a.session},Fn=()=>{var a,t;const e=(0,_e.useContext)(it);if(e===void 0)throw new Error("useUser must be used within a SessionContextProvider.");return(t=(a=e.session)==null?void 0:a.user)!=null?t:null};const Hn=a=>a.replace(/<p><br><\/p>/g,"");function zn(){this.__data__=[],this.size=0}var Kn=zn;function Gn(a,t){return a===t||a!==a&&t!==t}var Yr=Gn,Vn=Yr;function Wn(a,t){for(var e=a.length;e--;)if(Vn(a[e][0],t))return e;return-1}var vt=Wn,Jn=vt,Zn=Array.prototype,Yn=Zn.splice;function Xn(a){var t=this.__data__,e=Jn(t,a);if(e<0)return!1;var r=t.length-1;return e==r?t.pop():Yn.call(t,e,1),--this.size,!0}var Qn=Xn,ei=vt;function ti(a){var t=this.__data__,e=ei(t,a);return e<0?void 0:t[e][1]}var ri=ti,ni=vt;function ii(a){return ni(this.__data__,a)>-1}var oi=ii,ai=vt;function si(a,t){var e=this.__data__,r=ai(e,a);return r<0?(++this.size,e.push([a,t])):e[r][1]=t,this}var li=si,ui=Kn,ci=Qn,fi=ri,hi=oi,di=li;function Me(a){var t=-1,e=a==null?0:a.length;for(this.clear();++t<e;){var r=a[t];this.set(r[0],r[1])}}Me.prototype.clear=ui;Me.prototype.delete=ci;Me.prototype.get=fi;Me.prototype.has=hi;Me.prototype.set=di;var pt=Me,vi=pt;function pi(){this.__data__=new vi,this.size=0}var yi=pi;function gi(a){var t=this.__data__,e=t.delete(a);return this.size=t.size,e}var mi=gi;function bi(a){return this.__data__.get(a)}var _i=bi;function wi(a){return this.__data__.has(a)}var Oi=wi,Ei=typeof pe=="object"&&pe&&pe.Object===Object&&pe,Xr=Ei,Ti=Xr,Ai=typeof self=="object"&&self&&self.Object===Object&&self,ki=Ti||Ai||Function("return this")(),Ae=ki,Si=Ae,xi=Si.Symbol,Wt=xi,ir=Wt,Qr=Object.prototype,Pi=Qr.hasOwnProperty,Ni=Qr.toString,Ve=ir?ir.toStringTag:void 0;function ji(a){var t=Pi.call(a,Ve),e=a[Ve];try{a[Ve]=void 0;var r=!0}catch{}var n=Ni.call(a);return r&&(t?a[Ve]=e:delete a[Ve]),n}var Ri=ji,Li=Object.prototype,Ii=Li.toString;function Ci(a){return Ii.call(a)}var $i=Ci,or=Wt,Di=Ri,qi=$i,Mi="[object Null]",Bi="[object Undefined]",ar=or?or.toStringTag:void 0;function Ui(a){return a==null?a===void 0?Bi:Mi:ar&&ar in Object(a)?Di(a):qi(a)}var yt=Ui;function Fi(a){var t=typeof a;return a!=null&&(t=="object"||t=="function")}var en=Fi,Hi=yt,zi=en,Ki="[object AsyncFunction]",Gi="[object Function]",Vi="[object GeneratorFunction]",Wi="[object Proxy]";function Ji(a){if(!zi(a))return!1;var t=Hi(a);return t==Gi||t==Vi||t==Ki||t==Wi}var tn=Ji,Zi=Ae,Yi=Zi["__core-js_shared__"],Xi=Yi,Tt=Xi,sr=function(){var a=/[^.]+$/.exec(Tt&&Tt.keys&&Tt.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}();function Qi(a){return!!sr&&sr in a}var eo=Qi,to=Function.prototype,ro=to.toString;function no(a){if(a!=null){try{return ro.call(a)}catch{}try{return a+""}catch{}}return""}var rn=no,io=tn,oo=eo,ao=en,so=rn,lo=/[\\^$.*+?()[\]{}|]/g,uo=/^\[object .+?Constructor\]$/,co=Function.prototype,fo=Object.prototype,ho=co.toString,vo=fo.hasOwnProperty,po=RegExp("^"+ho.call(vo).replace(lo,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function yo(a){if(!ao(a)||oo(a))return!1;var t=io(a)?po:uo;return t.test(so(a))}var go=yo;function mo(a,t){return a?.[t]}var bo=mo,_o=go,wo=bo;function Oo(a,t){var e=wo(a,t);return _o(e)?e:void 0}var Be=Oo,Eo=Be,To=Ae,Ao=Eo(To,"Map"),Jt=Ao,ko=Be,So=ko(Object,"create"),gt=So,lr=gt;function xo(){this.__data__=lr?lr(null):{},this.size=0}var Po=xo;function No(a){var t=this.has(a)&&delete this.__data__[a];return this.size-=t?1:0,t}var jo=No,Ro=gt,Lo="__lodash_hash_undefined__",Io=Object.prototype,Co=Io.hasOwnProperty;function $o(a){var t=this.__data__;if(Ro){var e=t[a];return e===Lo?void 0:e}return Co.call(t,a)?t[a]:void 0}var Do=$o,qo=gt,Mo=Object.prototype,Bo=Mo.hasOwnProperty;function Uo(a){var t=this.__data__;return qo?t[a]!==void 0:Bo.call(t,a)}var Fo=Uo,Ho=gt,zo="__lodash_hash_undefined__";function Ko(a,t){var e=this.__data__;return this.size+=this.has(a)?0:1,e[a]=Ho&&t===void 0?zo:t,this}var Go=Ko,Vo=Po,Wo=jo,Jo=Do,Zo=Fo,Yo=Go;function Ue(a){var t=-1,e=a==null?0:a.length;for(this.clear();++t<e;){var r=a[t];this.set(r[0],r[1])}}Ue.prototype.clear=Vo;Ue.prototype.delete=Wo;Ue.prototype.get=Jo;Ue.prototype.has=Zo;Ue.prototype.set=Yo;var Xo=Ue,ur=Xo,Qo=pt,ea=Jt;function ta(){this.size=0,this.__data__={hash:new ur,map:new(ea||Qo),string:new ur}}var ra=ta;function na(a){var t=typeof a;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?a!=="__proto__":a===null}var ia=na,oa=ia;function aa(a,t){var e=a.__data__;return oa(t)?e[typeof t=="string"?"string":"hash"]:e.map}var mt=aa,sa=mt;function la(a){var t=sa(this,a).delete(a);return this.size-=t?1:0,t}var ua=la,ca=mt;function fa(a){return ca(this,a).get(a)}var ha=fa,da=mt;function va(a){return da(this,a).has(a)}var pa=va,ya=mt;function ga(a,t){var e=ya(this,a),r=e.size;return e.set(a,t),this.size+=e.size==r?0:1,this}var ma=ga,ba=ra,_a=ua,wa=ha,Oa=pa,Ea=ma;function Fe(a){var t=-1,e=a==null?0:a.length;for(this.clear();++t<e;){var r=a[t];this.set(r[0],r[1])}}Fe.prototype.clear=ba;Fe.prototype.delete=_a;Fe.prototype.get=wa;Fe.prototype.has=Oa;Fe.prototype.set=Ea;var nn=Fe,Ta=pt,Aa=Jt,ka=nn,Sa=200;function xa(a,t){var e=this.__data__;if(e instanceof Ta){var r=e.__data__;if(!Aa||r.length<Sa-1)return r.push([a,t]),this.size=++e.size,this;e=this.__data__=new ka(r)}return e.set(a,t),this.size=e.size,this}var Pa=xa,Na=pt,ja=yi,Ra=mi,La=_i,Ia=Oi,Ca=Pa;function He(a){var t=this.__data__=new Na(a);this.size=t.size}He.prototype.clear=ja;He.prototype.delete=Ra;He.prototype.get=La;He.prototype.has=Ia;He.prototype.set=Ca;var $a=He,Da="__lodash_hash_undefined__";function qa(a){return this.__data__.set(a,Da),this}var Ma=qa;function Ba(a){return this.__data__.has(a)}var Ua=Ba,Fa=nn,Ha=Ma,za=Ua;function ut(a){var t=-1,e=a==null?0:a.length;for(this.__data__=new Fa;++t<e;)this.add(a[t])}ut.prototype.add=ut.prototype.push=Ha;ut.prototype.has=za;var Ka=ut;function Ga(a,t){for(var e=-1,r=a==null?0:a.length;++e<r;)if(t(a[e],e,a))return!0;return!1}var Va=Ga;function Wa(a,t){return a.has(t)}var Ja=Wa,Za=Ka,Ya=Va,Xa=Ja,Qa=1,es=2;function ts(a,t,e,r,n,i){var u=e&Qa,d=a.length,h=t.length;if(d!=h&&!(u&&h>d))return!1;var p=i.get(a),c=i.get(t);if(p&&c)return p==t&&c==a;var l=-1,o=!0,s=e&es?new Za:void 0;for(i.set(a,t),i.set(t,a);++l<d;){var b=a[l],g=t[l];if(r)var m=u?r(g,b,l,t,a,i):r(b,g,l,a,t,i);if(m!==void 0){if(m)continue;o=!1;break}if(s){if(!Ya(t,function(v,y){if(!Xa(s,y)&&(b===v||n(b,v,e,r,i)))return s.push(y)})){o=!1;break}}else if(!(b===g||n(b,g,e,r,i))){o=!1;break}}return i.delete(a),i.delete(t),o}var on=ts,rs=Ae,ns=rs.Uint8Array,is=ns;function os(a){var t=-1,e=Array(a.size);return a.forEach(function(r,n){e[++t]=[n,r]}),e}var as=os;function ss(a){var t=-1,e=Array(a.size);return a.forEach(function(r){e[++t]=r}),e}var ls=ss,cr=Wt,fr=is,us=Yr,cs=on,fs=as,hs=ls,ds=1,vs=2,ps="[object Boolean]",ys="[object Date]",gs="[object Error]",ms="[object Map]",bs="[object Number]",_s="[object RegExp]",ws="[object Set]",Os="[object String]",Es="[object Symbol]",Ts="[object ArrayBuffer]",As="[object DataView]",hr=cr?cr.prototype:void 0,At=hr?hr.valueOf:void 0;function ks(a,t,e,r,n,i,u){switch(e){case As:if(a.byteLength!=t.byteLength||a.byteOffset!=t.byteOffset)return!1;a=a.buffer,t=t.buffer;case Ts:return!(a.byteLength!=t.byteLength||!i(new fr(a),new fr(t)));case ps:case ys:case bs:return us(+a,+t);case gs:return a.name==t.name&&a.message==t.message;case _s:case Os:return a==t+"";case ms:var d=fs;case ws:var h=r&ds;if(d||(d=hs),a.size!=t.size&&!h)return!1;var p=u.get(a);if(p)return p==t;r|=vs,u.set(a,t);var c=cs(d(a),d(t),r,n,i,u);return u.delete(a),c;case Es:if(At)return At.call(a)==At.call(t)}return!1}var Ss=ks;function xs(a,t){for(var e=-1,r=t.length,n=a.length;++e<r;)a[n+e]=t[e];return a}var Ps=xs,Ns=Array.isArray,Zt=Ns,js=Ps,Rs=Zt;function Ls(a,t,e){var r=t(a);return Rs(a)?r:js(r,e(a))}var Is=Ls;function Cs(a,t){for(var e=-1,r=a==null?0:a.length,n=0,i=[];++e<r;){var u=a[e];t(u,e,a)&&(i[n++]=u)}return i}var $s=Cs;function Ds(){return[]}var qs=Ds,Ms=$s,Bs=qs,Us=Object.prototype,Fs=Us.propertyIsEnumerable,dr=Object.getOwnPropertySymbols,Hs=dr?function(a){return a==null?[]:(a=Object(a),Ms(dr(a),function(t){return Fs.call(a,t)}))}:Bs,zs=Hs;function Ks(a,t){for(var e=-1,r=Array(a);++e<a;)r[e]=t(e);return r}var Gs=Ks;function Vs(a){return a!=null&&typeof a=="object"}var bt=Vs,Ws=yt,Js=bt,Zs="[object Arguments]";function Ys(a){return Js(a)&&Ws(a)==Zs}var Xs=Ys,vr=Xs,Qs=bt,an=Object.prototype,el=an.hasOwnProperty,tl=an.propertyIsEnumerable,rl=vr(function(){return arguments}())?vr:function(a){return Qs(a)&&el.call(a,"callee")&&!tl.call(a,"callee")},nl=rl,ct={exports:{}};function il(){return!1}var ol=il;ct.exports;(function(a,t){var e=Ae,r=ol,n=t&&!t.nodeType&&t,i=n&&!0&&a&&!a.nodeType&&a,u=i&&i.exports===n,d=u?e.Buffer:void 0,h=d?d.isBuffer:void 0,p=h||r;a.exports=p})(ct,ct.exports);var sn=ct.exports,al=9007199254740991,sl=/^(?:0|[1-9]\d*)$/;function ll(a,t){var e=typeof a;return t=t??al,!!t&&(e=="number"||e!="symbol"&&sl.test(a))&&a>-1&&a%1==0&&a<t}var ul=ll,cl=9007199254740991;function fl(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=cl}var ln=fl,hl=yt,dl=ln,vl=bt,pl="[object Arguments]",yl="[object Array]",gl="[object Boolean]",ml="[object Date]",bl="[object Error]",_l="[object Function]",wl="[object Map]",Ol="[object Number]",El="[object Object]",Tl="[object RegExp]",Al="[object Set]",kl="[object String]",Sl="[object WeakMap]",xl="[object ArrayBuffer]",Pl="[object DataView]",Nl="[object Float32Array]",jl="[object Float64Array]",Rl="[object Int8Array]",Ll="[object Int16Array]",Il="[object Int32Array]",Cl="[object Uint8Array]",$l="[object Uint8ClampedArray]",Dl="[object Uint16Array]",ql="[object Uint32Array]",ue={};ue[Nl]=ue[jl]=ue[Rl]=ue[Ll]=ue[Il]=ue[Cl]=ue[$l]=ue[Dl]=ue[ql]=!0;ue[pl]=ue[yl]=ue[xl]=ue[gl]=ue[Pl]=ue[ml]=ue[bl]=ue[_l]=ue[wl]=ue[Ol]=ue[El]=ue[Tl]=ue[Al]=ue[kl]=ue[Sl]=!1;function Ml(a){return vl(a)&&dl(a.length)&&!!ue[hl(a)]}var Bl=Ml;function Ul(a){return function(t){return a(t)}}var Fl=Ul,ft={exports:{}};ft.exports;(function(a,t){var e=Xr,r=t&&!t.nodeType&&t,n=r&&!0&&a&&!a.nodeType&&a,i=n&&n.exports===r,u=i&&e.process,d=function(){try{var h=n&&n.require&&n.require("util").types;return h||u&&u.binding&&u.binding("util")}catch{}}();a.exports=d})(ft,ft.exports);var Hl=ft.exports,zl=Bl,Kl=Fl,pr=Hl,yr=pr&&pr.isTypedArray,Gl=yr?Kl(yr):zl,un=Gl,Vl=Gs,Wl=nl,Jl=Zt,Zl=sn,Yl=ul,Xl=un,Ql=Object.prototype,eu=Ql.hasOwnProperty;function tu(a,t){var e=Jl(a),r=!e&&Wl(a),n=!e&&!r&&Zl(a),i=!e&&!r&&!n&&Xl(a),u=e||r||n||i,d=u?Vl(a.length,String):[],h=d.length;for(var p in a)(t||eu.call(a,p))&&!(u&&(p=="length"||n&&(p=="offset"||p=="parent")||i&&(p=="buffer"||p=="byteLength"||p=="byteOffset")||Yl(p,h)))&&d.push(p);return d}var ru=tu,nu=Object.prototype;function iu(a){var t=a&&a.constructor,e=typeof t=="function"&&t.prototype||nu;return a===e}var ou=iu;function au(a,t){return function(e){return a(t(e))}}var su=au,lu=su,uu=lu(Object.keys,Object),cu=uu,fu=ou,hu=cu,du=Object.prototype,vu=du.hasOwnProperty;function pu(a){if(!fu(a))return hu(a);var t=[];for(var e in Object(a))vu.call(a,e)&&e!="constructor"&&t.push(e);return t}var yu=pu,gu=tn,mu=ln;function bu(a){return a!=null&&mu(a.length)&&!gu(a)}var _u=bu,wu=ru,Ou=yu,Eu=_u;function Tu(a){return Eu(a)?wu(a):Ou(a)}var Au=Tu,ku=Is,Su=zs,xu=Au;function Pu(a){return ku(a,xu,Su)}var Nu=Pu,gr=Nu,ju=1,Ru=Object.prototype,Lu=Ru.hasOwnProperty;function Iu(a,t,e,r,n,i){var u=e&ju,d=gr(a),h=d.length,p=gr(t),c=p.length;if(h!=c&&!u)return!1;for(var l=h;l--;){var o=d[l];if(!(u?o in t:Lu.call(t,o)))return!1}var s=i.get(a),b=i.get(t);if(s&&b)return s==t&&b==a;var g=!0;i.set(a,t),i.set(t,a);for(var m=u;++l<h;){o=d[l];var v=a[o],y=t[o];if(r)var _=u?r(y,v,o,t,a,i):r(v,y,o,a,t,i);if(!(_===void 0?v===y||n(v,y,e,r,i):_)){g=!1;break}m||(m=o=="constructor")}if(g&&!m){var f=a.constructor,w=t.constructor;f!=w&&"constructor"in a&&"constructor"in t&&!(typeof f=="function"&&f instanceof f&&typeof w=="function"&&w instanceof w)&&(g=!1)}return i.delete(a),i.delete(t),g}var Cu=Iu,$u=Be,Du=Ae,qu=$u(Du,"DataView"),Mu=qu,Bu=Be,Uu=Ae,Fu=Bu(Uu,"Promise"),Hu=Fu,zu=Be,Ku=Ae,Gu=zu(Ku,"Set"),Vu=Gu,Wu=Be,Ju=Ae,Zu=Wu(Ju,"WeakMap"),Yu=Zu,Ct=Mu,$t=Jt,Dt=Hu,qt=Vu,Mt=Yu,cn=yt,ze=rn,mr="[object Map]",Xu="[object Object]",br="[object Promise]",_r="[object Set]",wr="[object WeakMap]",Or="[object DataView]",Qu=ze(Ct),ec=ze($t),tc=ze(Dt),rc=ze(qt),nc=ze(Mt),Re=cn;(Ct&&Re(new Ct(new ArrayBuffer(1)))!=Or||$t&&Re(new $t)!=mr||Dt&&Re(Dt.resolve())!=br||qt&&Re(new qt)!=_r||Mt&&Re(new Mt)!=wr)&&(Re=function(a){var t=cn(a),e=t==Xu?a.constructor:void 0,r=e?ze(e):"";if(r)switch(r){case Qu:return Or;case ec:return mr;case tc:return br;case rc:return _r;case nc:return wr}return t});var ic=Re,kt=$a,oc=on,ac=Ss,sc=Cu,Er=ic,Tr=Zt,Ar=sn,lc=un,uc=1,kr="[object Arguments]",Sr="[object Array]",ot="[object Object]",cc=Object.prototype,xr=cc.hasOwnProperty;function fc(a,t,e,r,n,i){var u=Tr(a),d=Tr(t),h=u?Sr:Er(a),p=d?Sr:Er(t);h=h==kr?ot:h,p=p==kr?ot:p;var c=h==ot,l=p==ot,o=h==p;if(o&&Ar(a)){if(!Ar(t))return!1;u=!0,c=!1}if(o&&!c)return i||(i=new kt),u||lc(a)?oc(a,t,e,r,n,i):ac(a,t,h,e,r,n,i);if(!(e&uc)){var s=c&&xr.call(a,"__wrapped__"),b=l&&xr.call(t,"__wrapped__");if(s||b){var g=s?a.value():a,m=b?t.value():t;return i||(i=new kt),n(g,m,e,r,i)}}return o?(i||(i=new kt),sc(a,t,e,r,n,i)):!1}var hc=fc,dc=hc,Pr=bt;function fn(a,t,e,r,n){return a===t?!0:a==null||t==null||!Pr(a)&&!Pr(t)?a!==a&&t!==t:dc(a,t,e,r,fn,n)}var vc=fn,pc=vc;function yc(a,t){return pc(a,t)}var gc=yc,hn={exports:{}};/*!
 * Quill Editor v1.3.7
 * https://quilljs.com/
 * Copyright (c) 2014, Jason Chen
 * Copyright (c) 2013, salesforce.com
 */(function(a,t){(function(r,n){a.exports=n()})(typeof self<"u"?self:pe,function(){return function(e){var r={};function n(i){if(r[i])return r[i].exports;var u=r[i]={i,l:!1,exports:{}};return e[i].call(u.exports,u,u.exports,n),u.l=!0,u.exports}return n.m=e,n.c=r,n.d=function(i,u,d){n.o(i,u)||Object.defineProperty(i,u,{configurable:!1,enumerable:!0,get:d})},n.n=function(i){var u=i&&i.__esModule?function(){return i.default}:function(){return i};return n.d(u,"a",u),u},n.o=function(i,u){return Object.prototype.hasOwnProperty.call(i,u)},n.p="",n(n.s=109)}([function(e,r,n){Object.defineProperty(r,"__esModule",{value:!0});var i=n(17),u=n(18),d=n(19),h=n(45),p=n(46),c=n(47),l=n(48),o=n(49),s=n(12),b=n(32),g=n(33),m=n(31),v=n(1),y={Scope:v.Scope,create:v.create,find:v.find,query:v.query,register:v.register,Container:i.default,Format:u.default,Leaf:d.default,Embed:l.default,Scroll:h.default,Block:c.default,Inline:p.default,Text:o.default,Attributor:{Attribute:s.default,Class:b.default,Style:g.default,Store:m.default}};r.default=y},function(e,r,n){var i=this&&this.__extends||function(){var m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,y){v.__proto__=y}||function(v,y){for(var _ in y)y.hasOwnProperty(_)&&(v[_]=y[_])};return function(v,y){m(v,y);function _(){this.constructor=v}v.prototype=y===null?Object.create(y):(_.prototype=y.prototype,new _)}}();Object.defineProperty(r,"__esModule",{value:!0});var u=function(m){i(v,m);function v(y){var _=this;return y="[Parchment] "+y,_=m.call(this,y)||this,_.message=y,_.name=_.constructor.name,_}return v}(Error);r.ParchmentError=u;var d={},h={},p={},c={};r.DATA_KEY="__blot";var l;(function(m){m[m.TYPE=3]="TYPE",m[m.LEVEL=12]="LEVEL",m[m.ATTRIBUTE=13]="ATTRIBUTE",m[m.BLOT=14]="BLOT",m[m.INLINE=7]="INLINE",m[m.BLOCK=11]="BLOCK",m[m.BLOCK_BLOT=10]="BLOCK_BLOT",m[m.INLINE_BLOT=6]="INLINE_BLOT",m[m.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",m[m.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",m[m.ANY=15]="ANY"})(l=r.Scope||(r.Scope={}));function o(m,v){var y=b(m);if(y==null)throw new u("Unable to create "+m+" blot");var _=y,f=m instanceof Node||m.nodeType===Node.TEXT_NODE?m:_.create(v);return new _(f,v)}r.create=o;function s(m,v){return v===void 0&&(v=!1),m==null?null:m[r.DATA_KEY]!=null?m[r.DATA_KEY].blot:v?s(m.parentNode,v):null}r.find=s;function b(m,v){v===void 0&&(v=l.ANY);var y;if(typeof m=="string")y=c[m]||d[m];else if(m instanceof Text||m.nodeType===Node.TEXT_NODE)y=c.text;else if(typeof m=="number")m&l.LEVEL&l.BLOCK?y=c.block:m&l.LEVEL&l.INLINE&&(y=c.inline);else if(m instanceof HTMLElement){var _=(m.getAttribute("class")||"").split(/\s+/);for(var f in _)if(y=h[_[f]],y)break;y=y||p[m.tagName]}return y==null?null:v&l.LEVEL&y.scope&&v&l.TYPE&y.scope?y:null}r.query=b;function g(){for(var m=[],v=0;v<arguments.length;v++)m[v]=arguments[v];if(m.length>1)return m.map(function(f){return g(f)});var y=m[0];if(typeof y.blotName!="string"&&typeof y.attrName!="string")throw new u("Invalid definition");if(y.blotName==="abstract")throw new u("Cannot register abstract class");if(c[y.blotName||y.attrName]=y,typeof y.keyName=="string")d[y.keyName]=y;else if(y.className!=null&&(h[y.className]=y),y.tagName!=null){Array.isArray(y.tagName)?y.tagName=y.tagName.map(function(f){return f.toUpperCase()}):y.tagName=y.tagName.toUpperCase();var _=Array.isArray(y.tagName)?y.tagName:[y.tagName];_.forEach(function(f){(p[f]==null||y.className==null)&&(p[f]=y)})}return y}r.register=g},function(e,r,n){var i=n(51),u=n(11),d=n(3),h=n(20),p=String.fromCharCode(0),c=function(l){Array.isArray(l)?this.ops=l:l!=null&&Array.isArray(l.ops)?this.ops=l.ops:this.ops=[]};c.prototype.insert=function(l,o){var s={};return l.length===0?this:(s.insert=l,o!=null&&typeof o=="object"&&Object.keys(o).length>0&&(s.attributes=o),this.push(s))},c.prototype.delete=function(l){return l<=0?this:this.push({delete:l})},c.prototype.retain=function(l,o){if(l<=0)return this;var s={retain:l};return o!=null&&typeof o=="object"&&Object.keys(o).length>0&&(s.attributes=o),this.push(s)},c.prototype.push=function(l){var o=this.ops.length,s=this.ops[o-1];if(l=d(!0,{},l),typeof s=="object"){if(typeof l.delete=="number"&&typeof s.delete=="number")return this.ops[o-1]={delete:s.delete+l.delete},this;if(typeof s.delete=="number"&&l.insert!=null&&(o-=1,s=this.ops[o-1],typeof s!="object"))return this.ops.unshift(l),this;if(u(l.attributes,s.attributes)){if(typeof l.insert=="string"&&typeof s.insert=="string")return this.ops[o-1]={insert:s.insert+l.insert},typeof l.attributes=="object"&&(this.ops[o-1].attributes=l.attributes),this;if(typeof l.retain=="number"&&typeof s.retain=="number")return this.ops[o-1]={retain:s.retain+l.retain},typeof l.attributes=="object"&&(this.ops[o-1].attributes=l.attributes),this}}return o===this.ops.length?this.ops.push(l):this.ops.splice(o,0,l),this},c.prototype.chop=function(){var l=this.ops[this.ops.length-1];return l&&l.retain&&!l.attributes&&this.ops.pop(),this},c.prototype.filter=function(l){return this.ops.filter(l)},c.prototype.forEach=function(l){this.ops.forEach(l)},c.prototype.map=function(l){return this.ops.map(l)},c.prototype.partition=function(l){var o=[],s=[];return this.forEach(function(b){var g=l(b)?o:s;g.push(b)}),[o,s]},c.prototype.reduce=function(l,o){return this.ops.reduce(l,o)},c.prototype.changeLength=function(){return this.reduce(function(l,o){return o.insert?l+h.length(o):o.delete?l-o.delete:l},0)},c.prototype.length=function(){return this.reduce(function(l,o){return l+h.length(o)},0)},c.prototype.slice=function(l,o){l=l||0,typeof o!="number"&&(o=1/0);for(var s=[],b=h.iterator(this.ops),g=0;g<o&&b.hasNext();){var m;g<l?m=b.next(l-g):(m=b.next(o-g),s.push(m)),g+=h.length(m)}return new c(s)},c.prototype.compose=function(l){var o=h.iterator(this.ops),s=h.iterator(l.ops),b=[],g=s.peek();if(g!=null&&typeof g.retain=="number"&&g.attributes==null){for(var m=g.retain;o.peekType()==="insert"&&o.peekLength()<=m;)m-=o.peekLength(),b.push(o.next());g.retain-m>0&&s.next(g.retain-m)}for(var v=new c(b);o.hasNext()||s.hasNext();)if(s.peekType()==="insert")v.push(s.next());else if(o.peekType()==="delete")v.push(o.next());else{var y=Math.min(o.peekLength(),s.peekLength()),_=o.next(y),f=s.next(y);if(typeof f.retain=="number"){var w={};typeof _.retain=="number"?w.retain=y:w.insert=_.insert;var N=h.attributes.compose(_.attributes,f.attributes,typeof _.retain=="number");if(N&&(w.attributes=N),v.push(w),!s.hasNext()&&u(v.ops[v.ops.length-1],w)){var k=new c(o.rest());return v.concat(k).chop()}}else typeof f.delete=="number"&&typeof _.retain=="number"&&v.push(f)}return v.chop()},c.prototype.concat=function(l){var o=new c(this.ops.slice());return l.ops.length>0&&(o.push(l.ops[0]),o.ops=o.ops.concat(l.ops.slice(1))),o},c.prototype.diff=function(l,o){if(this.ops===l.ops)return new c;var s=[this,l].map(function(y){return y.map(function(_){if(_.insert!=null)return typeof _.insert=="string"?_.insert:p;var f=y===l?"on":"with";throw new Error("diff() called "+f+" non-document")}).join("")}),b=new c,g=i(s[0],s[1],o),m=h.iterator(this.ops),v=h.iterator(l.ops);return g.forEach(function(y){for(var _=y[1].length;_>0;){var f=0;switch(y[0]){case i.INSERT:f=Math.min(v.peekLength(),_),b.push(v.next(f));break;case i.DELETE:f=Math.min(_,m.peekLength()),m.next(f),b.delete(f);break;case i.EQUAL:f=Math.min(m.peekLength(),v.peekLength(),_);var w=m.next(f),N=v.next(f);u(w.insert,N.insert)?b.retain(f,h.attributes.diff(w.attributes,N.attributes)):b.push(N).delete(f);break}_-=f}}),b.chop()},c.prototype.eachLine=function(l,o){o=o||`
`;for(var s=h.iterator(this.ops),b=new c,g=0;s.hasNext();){if(s.peekType()!=="insert")return;var m=s.peek(),v=h.length(m)-s.peekLength(),y=typeof m.insert=="string"?m.insert.indexOf(o,v)-v:-1;if(y<0)b.push(s.next());else if(y>0)b.push(s.next(y));else{if(l(b,s.next(1).attributes||{},g)===!1)return;g+=1,b=new c}}b.length()>0&&l(b,{},g)},c.prototype.transform=function(l,o){if(o=!!o,typeof l=="number")return this.transformPosition(l,o);for(var s=h.iterator(this.ops),b=h.iterator(l.ops),g=new c;s.hasNext()||b.hasNext();)if(s.peekType()==="insert"&&(o||b.peekType()!=="insert"))g.retain(h.length(s.next()));else if(b.peekType()==="insert")g.push(b.next());else{var m=Math.min(s.peekLength(),b.peekLength()),v=s.next(m),y=b.next(m);if(v.delete)continue;y.delete?g.push(y):g.retain(m,h.attributes.transform(v.attributes,y.attributes,o))}return g.chop()},c.prototype.transformPosition=function(l,o){o=!!o;for(var s=h.iterator(this.ops),b=0;s.hasNext()&&b<=l;){var g=s.peekLength(),m=s.peekType();if(s.next(),m==="delete"){l-=Math.min(g,l-b);continue}else m==="insert"&&(b<l||!o)&&(l+=g);b+=g}return l},e.exports=c},function(e,r){var n=Object.prototype.hasOwnProperty,i=Object.prototype.toString,u=Object.defineProperty,d=Object.getOwnPropertyDescriptor,h=function(s){return typeof Array.isArray=="function"?Array.isArray(s):i.call(s)==="[object Array]"},p=function(s){if(!s||i.call(s)!=="[object Object]")return!1;var b=n.call(s,"constructor"),g=s.constructor&&s.constructor.prototype&&n.call(s.constructor.prototype,"isPrototypeOf");if(s.constructor&&!b&&!g)return!1;var m;for(m in s);return typeof m>"u"||n.call(s,m)},c=function(s,b){u&&b.name==="__proto__"?u(s,b.name,{enumerable:!0,configurable:!0,value:b.newValue,writable:!0}):s[b.name]=b.newValue},l=function(s,b){if(b==="__proto__")if(n.call(s,b)){if(d)return d(s,b).value}else return;return s[b]};e.exports=function o(){var s,b,g,m,v,y,_=arguments[0],f=1,w=arguments.length,N=!1;for(typeof _=="boolean"&&(N=_,_=arguments[1]||{},f=2),(_==null||typeof _!="object"&&typeof _!="function")&&(_={});f<w;++f)if(s=arguments[f],s!=null)for(b in s)g=l(_,b),m=l(s,b),_!==m&&(N&&m&&(p(m)||(v=h(m)))?(v?(v=!1,y=g&&h(g)?g:[]):y=g&&p(g)?g:{},c(_,{name:b,newValue:o(N,y,m)})):typeof m<"u"&&c(_,{name:b,newValue:m}));return _}},function(e,r,n){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BlockEmbed=r.bubbleFormats=void 0;var i=function(){function O(T,P){for(var E=0;E<P.length;E++){var j=P[E];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(T,j.key,j)}}return function(T,P,E){return P&&O(T.prototype,P),E&&O(T,E),T}}(),u=function O(T,P,E){T===null&&(T=Function.prototype);var j=Object.getOwnPropertyDescriptor(T,P);if(j===void 0){var q=Object.getPrototypeOf(T);return q===null?void 0:O(q,P,E)}else{if("value"in j)return j.value;var B=j.get;return B===void 0?void 0:B.call(E)}},d=n(3),h=_(d),p=n(2),c=_(p),l=n(0),o=_(l),s=n(16),b=_(s),g=n(6),m=_(g),v=n(7),y=_(v);function _(O){return O&&O.__esModule?O:{default:O}}function f(O,T){if(!(O instanceof T))throw new TypeError("Cannot call a class as a function")}function w(O,T){if(!O)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T&&(typeof T=="object"||typeof T=="function")?T:O}function N(O,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof T);O.prototype=Object.create(T&&T.prototype,{constructor:{value:O,enumerable:!1,writable:!0,configurable:!0}}),T&&(Object.setPrototypeOf?Object.setPrototypeOf(O,T):O.__proto__=T)}var k=1,S=function(O){N(T,O);function T(){return f(this,T),w(this,(T.__proto__||Object.getPrototypeOf(T)).apply(this,arguments))}return i(T,[{key:"attach",value:function(){u(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"attach",this).call(this),this.attributes=new o.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new c.default().insert(this.value(),(0,h.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(E,j){var q=o.default.query(E,o.default.Scope.BLOCK_ATTRIBUTE);q!=null&&this.attributes.attribute(q,j)}},{key:"formatAt",value:function(E,j,q,B){this.format(q,B)}},{key:"insertAt",value:function(E,j,q){if(typeof j=="string"&&j.endsWith(`
`)){var B=o.default.create(R.blotName);this.parent.insertBefore(B,E===0?this:this.next),B.insertAt(0,j.slice(0,-1))}else u(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"insertAt",this).call(this,E,j,q)}}]),T}(o.default.Embed);S.scope=o.default.Scope.BLOCK_BLOT;var R=function(O){N(T,O);function T(P){f(this,T);var E=w(this,(T.__proto__||Object.getPrototypeOf(T)).call(this,P));return E.cache={},E}return i(T,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(o.default.Leaf).reduce(function(E,j){return j.length()===0?E:E.insert(j.value(),A(j))},new c.default).insert(`
`,A(this))),this.cache.delta}},{key:"deleteAt",value:function(E,j){u(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"deleteAt",this).call(this,E,j),this.cache={}}},{key:"formatAt",value:function(E,j,q,B){j<=0||(o.default.query(q,o.default.Scope.BLOCK)?E+j===this.length()&&this.format(q,B):u(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"formatAt",this).call(this,E,Math.min(j,this.length()-E-1),q,B),this.cache={})}},{key:"insertAt",value:function(E,j,q){if(q!=null)return u(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"insertAt",this).call(this,E,j,q);if(j.length!==0){var B=j.split(`
`),G=B.shift();G.length>0&&(E<this.length()-1||this.children.tail==null?u(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"insertAt",this).call(this,Math.min(E,this.length()-1),G):this.children.tail.insertAt(this.children.tail.length(),G),this.cache={});var D=this;B.reduce(function(C,x){return D=D.split(C,!0),D.insertAt(0,x),x.length},E+G.length)}}},{key:"insertBefore",value:function(E,j){var q=this.children.head;u(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"insertBefore",this).call(this,E,j),q instanceof b.default&&q.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=u(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"length",this).call(this)+k),this.cache.length}},{key:"moveChildren",value:function(E,j){u(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"moveChildren",this).call(this,E,j),this.cache={}}},{key:"optimize",value:function(E){u(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"optimize",this).call(this,E),this.cache={}}},{key:"path",value:function(E){return u(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"path",this).call(this,E,!0)}},{key:"removeChild",value:function(E){u(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"removeChild",this).call(this,E),this.cache={}}},{key:"split",value:function(E){var j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(j&&(E===0||E>=this.length()-k)){var q=this.clone();return E===0?(this.parent.insertBefore(q,this),this):(this.parent.insertBefore(q,this.next),q)}else{var B=u(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"split",this).call(this,E,j);return this.cache={},B}}}]),T}(o.default.Block);R.blotName="block",R.tagName="P",R.defaultChild="break",R.allowedChildren=[m.default,o.default.Embed,y.default];function A(O){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return O==null||(typeof O.formats=="function"&&(T=(0,h.default)(T,O.formats())),O.parent==null||O.parent.blotName=="scroll"||O.parent.statics.scope!==O.statics.scope)?T:A(O.parent,T)}r.bubbleFormats=A,r.BlockEmbed=S,r.default=R},function(e,r,n){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.overload=r.expandConfig=void 0;var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(D){return typeof D}:function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D},u=function(){function D(C,x){var I=[],$=!0,F=!1,U=void 0;try{for(var L=C[Symbol.iterator](),M;!($=(M=L.next()).done)&&(I.push(M.value),!(x&&I.length===x));$=!0);}catch(H){F=!0,U=H}finally{try{!$&&L.return&&L.return()}finally{if(F)throw U}}return I}return function(C,x){if(Array.isArray(C))return C;if(Symbol.iterator in Object(C))return D(C,x);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),d=function(){function D(C,x){for(var I=0;I<x.length;I++){var $=x[I];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(C,$.key,$)}}return function(C,x,I){return x&&D(C.prototype,x),I&&D(C,I),C}}();n(50);var h=n(2),p=A(h),c=n(14),l=A(c),o=n(8),s=A(o),b=n(9),g=A(b),m=n(0),v=A(m),y=n(15),_=A(y),f=n(3),w=A(f),N=n(10),k=A(N),S=n(34),R=A(S);function A(D){return D&&D.__esModule?D:{default:D}}function O(D,C,x){return C in D?Object.defineProperty(D,C,{value:x,enumerable:!0,configurable:!0,writable:!0}):D[C]=x,D}function T(D,C){if(!(D instanceof C))throw new TypeError("Cannot call a class as a function")}var P=(0,k.default)("quill"),E=function(){d(D,null,[{key:"debug",value:function(x){x===!0&&(x="log"),k.default.level(x)}},{key:"find",value:function(x){return x.__quill||v.default.find(x)}},{key:"import",value:function(x){return this.imports[x]==null&&P.error("Cannot import "+x+". Are you sure it was registered?"),this.imports[x]}},{key:"register",value:function(x,I){var $=this,F=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof x!="string"){var U=x.attrName||x.blotName;typeof U=="string"?this.register("formats/"+U,x,I):Object.keys(x).forEach(function(L){$.register(L,x[L],I)})}else this.imports[x]!=null&&!F&&P.warn("Overwriting "+x+" with",I),this.imports[x]=I,(x.startsWith("blots/")||x.startsWith("formats/"))&&I.blotName!=="abstract"?v.default.register(I):x.startsWith("modules")&&typeof I.register=="function"&&I.register()}}]);function D(C){var x=this,I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(T(this,D),this.options=j(C,I),this.container=this.options.container,this.container==null)return P.error("Invalid Quill container",C);this.options.debug&&D.debug(this.options.debug);var $=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new s.default,this.scroll=v.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new l.default(this.scroll),this.selection=new _.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(s.default.events.EDITOR_CHANGE,function(U){U===s.default.events.TEXT_CHANGE&&x.root.classList.toggle("ql-blank",x.editor.isBlank())}),this.emitter.on(s.default.events.SCROLL_UPDATE,function(U,L){var M=x.selection.lastRange,H=M&&M.length===0?M.index:void 0;q.call(x,function(){return x.editor.update(null,L,H)},U)});var F=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+$+"<p><br></p></div>");this.setContents(F),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return d(D,[{key:"addContainer",value:function(x){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof x=="string"){var $=x;x=document.createElement("div"),x.classList.add($)}return this.container.insertBefore(x,I),x}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(x,I,$){var F=this,U=B(x,I,$),L=u(U,4);return x=L[0],I=L[1],$=L[3],q.call(this,function(){return F.editor.deleteText(x,I)},$,x,-1*I)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(x),this.container.classList.toggle("ql-disabled",!x)}},{key:"focus",value:function(){var x=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=x,this.scrollIntoView()}},{key:"format",value:function(x,I){var $=this,F=arguments.length>2&&arguments[2]!==void 0?arguments[2]:s.default.sources.API;return q.call(this,function(){var U=$.getSelection(!0),L=new p.default;if(U==null)return L;if(v.default.query(x,v.default.Scope.BLOCK))L=$.editor.formatLine(U.index,U.length,O({},x,I));else{if(U.length===0)return $.selection.format(x,I),L;L=$.editor.formatText(U.index,U.length,O({},x,I))}return $.setSelection(U,s.default.sources.SILENT),L},F)}},{key:"formatLine",value:function(x,I,$,F,U){var L=this,M=void 0,H=B(x,I,$,F,U),z=u(H,4);return x=z[0],I=z[1],M=z[2],U=z[3],q.call(this,function(){return L.editor.formatLine(x,I,M)},U,x,0)}},{key:"formatText",value:function(x,I,$,F,U){var L=this,M=void 0,H=B(x,I,$,F,U),z=u(H,4);return x=z[0],I=z[1],M=z[2],U=z[3],q.call(this,function(){return L.editor.formatText(x,I,M)},U,x,0)}},{key:"getBounds",value:function(x){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,$=void 0;typeof x=="number"?$=this.selection.getBounds(x,I):$=this.selection.getBounds(x.index,x.length);var F=this.container.getBoundingClientRect();return{bottom:$.bottom-F.top,height:$.height,left:$.left-F.left,right:$.right-F.left,top:$.top-F.top,width:$.width}}},{key:"getContents",value:function(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-x,$=B(x,I),F=u($,2);return x=F[0],I=F[1],this.editor.getContents(x,I)}},{key:"getFormat",value:function(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof x=="number"?this.editor.getFormat(x,I):this.editor.getFormat(x.index,x.length)}},{key:"getIndex",value:function(x){return x.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(x){return this.scroll.leaf(x)}},{key:"getLine",value:function(x){return this.scroll.line(x)}},{key:"getLines",value:function(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof x!="number"?this.scroll.lines(x.index,x.length):this.scroll.lines(x,I)}},{key:"getModule",value:function(x){return this.theme.modules[x]}},{key:"getSelection",value:function(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return x&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-x,$=B(x,I),F=u($,2);return x=F[0],I=F[1],this.editor.getText(x,I)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(x,I,$){var F=this,U=arguments.length>3&&arguments[3]!==void 0?arguments[3]:D.sources.API;return q.call(this,function(){return F.editor.insertEmbed(x,I,$)},U,x)}},{key:"insertText",value:function(x,I,$,F,U){var L=this,M=void 0,H=B(x,0,$,F,U),z=u(H,4);return x=z[0],M=z[2],U=z[3],q.call(this,function(){return L.editor.insertText(x,I,M)},U,x,I.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(x,I,$){this.clipboard.dangerouslyPasteHTML(x,I,$)}},{key:"removeFormat",value:function(x,I,$){var F=this,U=B(x,I,$),L=u(U,4);return x=L[0],I=L[1],$=L[3],q.call(this,function(){return F.editor.removeFormat(x,I)},$,x)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(x){var I=this,$=arguments.length>1&&arguments[1]!==void 0?arguments[1]:s.default.sources.API;return q.call(this,function(){x=new p.default(x);var F=I.getLength(),U=I.editor.deleteText(0,F),L=I.editor.applyDelta(x),M=L.ops[L.ops.length-1];M!=null&&typeof M.insert=="string"&&M.insert[M.insert.length-1]===`
`&&(I.editor.deleteText(I.getLength()-1,1),L.delete(1));var H=U.compose(L);return H},$)}},{key:"setSelection",value:function(x,I,$){if(x==null)this.selection.setRange(null,I||D.sources.API);else{var F=B(x,I,$),U=u(F,4);x=U[0],I=U[1],$=U[3],this.selection.setRange(new y.Range(x,I),$),$!==s.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(x){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:s.default.sources.API,$=new p.default().insert(x);return this.setContents($,I)}},{key:"update",value:function(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:s.default.sources.USER,I=this.scroll.update(x);return this.selection.update(x),I}},{key:"updateContents",value:function(x){var I=this,$=arguments.length>1&&arguments[1]!==void 0?arguments[1]:s.default.sources.API;return q.call(this,function(){return x=new p.default(x),I.editor.applyDelta(x,$)},$,!0)}}]),D}();E.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},E.events=s.default.events,E.sources=s.default.sources,E.version="1.3.7",E.imports={delta:p.default,parchment:v.default,"core/module":g.default,"core/theme":R.default};function j(D,C){if(C=(0,w.default)(!0,{container:D,modules:{clipboard:!0,keyboard:!0,history:!0}},C),!C.theme||C.theme===E.DEFAULTS.theme)C.theme=R.default;else if(C.theme=E.import("themes/"+C.theme),C.theme==null)throw new Error("Invalid theme "+C.theme+". Did you register it?");var x=(0,w.default)(!0,{},C.theme.DEFAULTS);[x,C].forEach(function(F){F.modules=F.modules||{},Object.keys(F.modules).forEach(function(U){F.modules[U]===!0&&(F.modules[U]={})})});var I=Object.keys(x.modules).concat(Object.keys(C.modules)),$=I.reduce(function(F,U){var L=E.import("modules/"+U);return L==null?P.error("Cannot load "+U+" module. Are you sure you registered it?"):F[U]=L.DEFAULTS||{},F},{});return C.modules!=null&&C.modules.toolbar&&C.modules.toolbar.constructor!==Object&&(C.modules.toolbar={container:C.modules.toolbar}),C=(0,w.default)(!0,{},E.DEFAULTS,{modules:$},x,C),["bounds","container","scrollingContainer"].forEach(function(F){typeof C[F]=="string"&&(C[F]=document.querySelector(C[F]))}),C.modules=Object.keys(C.modules).reduce(function(F,U){return C.modules[U]&&(F[U]=C.modules[U]),F},{}),C}function q(D,C,x,I){if(this.options.strict&&!this.isEnabled()&&C===s.default.sources.USER)return new p.default;var $=x==null?null:this.getSelection(),F=this.editor.delta,U=D();if($!=null&&(x===!0&&(x=$.index),I==null?$=G($,U,C):I!==0&&($=G($,x,I,C)),this.setSelection($,s.default.sources.SILENT)),U.length()>0){var L,M=[s.default.events.TEXT_CHANGE,U,F,C];if((L=this.emitter).emit.apply(L,[s.default.events.EDITOR_CHANGE].concat(M)),C!==s.default.sources.SILENT){var H;(H=this.emitter).emit.apply(H,M)}}return U}function B(D,C,x,I,$){var F={};return typeof D.index=="number"&&typeof D.length=="number"?typeof C!="number"?($=I,I=x,x=C,C=D.length,D=D.index):(C=D.length,D=D.index):typeof C!="number"&&($=I,I=x,x=C,C=0),(typeof x>"u"?"undefined":i(x))==="object"?(F=x,$=I):typeof x=="string"&&(I!=null?F[x]=I:$=x),$=$||s.default.sources.API,[D,C,F,$]}function G(D,C,x,I){if(D==null)return null;var $=void 0,F=void 0;if(C instanceof p.default){var U=[D.index,D.index+D.length].map(function(z){return C.transformPosition(z,I!==s.default.sources.USER)}),L=u(U,2);$=L[0],F=L[1]}else{var M=[D.index,D.index+D.length].map(function(z){return z<C||z===C&&I===s.default.sources.USER?z:x>=0?z+x:Math.max(C,z+x)}),H=u(M,2);$=H[0],F=H[1]}return new y.Range($,F-$)}r.expandConfig=j,r.overload=B,r.default=E},function(e,r,n){Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function m(v,y){for(var _=0;_<y.length;_++){var f=y[_];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(v,f.key,f)}}return function(v,y,_){return y&&m(v.prototype,y),_&&m(v,_),v}}(),u=function m(v,y,_){v===null&&(v=Function.prototype);var f=Object.getOwnPropertyDescriptor(v,y);if(f===void 0){var w=Object.getPrototypeOf(v);return w===null?void 0:m(w,y,_)}else{if("value"in f)return f.value;var N=f.get;return N===void 0?void 0:N.call(_)}},d=n(7),h=l(d),p=n(0),c=l(p);function l(m){return m&&m.__esModule?m:{default:m}}function o(m,v){if(!(m instanceof v))throw new TypeError("Cannot call a class as a function")}function s(m,v){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:m}function b(m,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);m.prototype=Object.create(v&&v.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(m,v):m.__proto__=v)}var g=function(m){b(v,m);function v(){return o(this,v),s(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return i(v,[{key:"formatAt",value:function(_,f,w,N){if(v.compare(this.statics.blotName,w)<0&&c.default.query(w,c.default.Scope.BLOT)){var k=this.isolate(_,f);N&&k.wrap(w,N)}else u(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"formatAt",this).call(this,_,f,w,N)}},{key:"optimize",value:function(_){if(u(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"optimize",this).call(this,_),this.parent instanceof v&&v.compare(this.statics.blotName,this.parent.statics.blotName)>0){var f=this.parent.isolate(this.offset(),this.length());this.moveChildren(f),f.wrap(this)}}}],[{key:"compare",value:function(_,f){var w=v.order.indexOf(_),N=v.order.indexOf(f);return w>=0||N>=0?w-N:_===f?0:_<f?-1:1}}]),v}(c.default.Inline);g.allowedChildren=[g,c.default.Embed,h.default],g.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],r.default=g},function(e,r,n){Object.defineProperty(r,"__esModule",{value:!0});var i=n(0),u=d(i);function d(o){return o&&o.__esModule?o:{default:o}}function h(o,s){if(!(o instanceof s))throw new TypeError("Cannot call a class as a function")}function p(o,s){if(!o)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s&&(typeof s=="object"||typeof s=="function")?s:o}function c(o,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof s);o.prototype=Object.create(s&&s.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),s&&(Object.setPrototypeOf?Object.setPrototypeOf(o,s):o.__proto__=s)}var l=function(o){c(s,o);function s(){return h(this,s),p(this,(s.__proto__||Object.getPrototypeOf(s)).apply(this,arguments))}return s}(u.default.Text);r.default=l},function(e,r,n){Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function y(_,f){for(var w=0;w<f.length;w++){var N=f[w];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(_,N.key,N)}}return function(_,f,w){return f&&y(_.prototype,f),w&&y(_,w),_}}(),u=function y(_,f,w){_===null&&(_=Function.prototype);var N=Object.getOwnPropertyDescriptor(_,f);if(N===void 0){var k=Object.getPrototypeOf(_);return k===null?void 0:y(k,f,w)}else{if("value"in N)return N.value;var S=N.get;return S===void 0?void 0:S.call(w)}},d=n(54),h=l(d),p=n(10),c=l(p);function l(y){return y&&y.__esModule?y:{default:y}}function o(y,_){if(!(y instanceof _))throw new TypeError("Cannot call a class as a function")}function s(y,_){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:y}function b(y,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);y.prototype=Object.create(_&&_.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(y,_):y.__proto__=_)}var g=(0,c.default)("quill:events"),m=["selectionchange","mousedown","mouseup","click"];m.forEach(function(y){document.addEventListener(y,function(){for(var _=arguments.length,f=Array(_),w=0;w<_;w++)f[w]=arguments[w];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(N){if(N.__quill&&N.__quill.emitter){var k;(k=N.__quill.emitter).handleDOM.apply(k,f)}})})});var v=function(y){b(_,y);function _(){o(this,_);var f=s(this,(_.__proto__||Object.getPrototypeOf(_)).call(this));return f.listeners={},f.on("error",g.error),f}return i(_,[{key:"emit",value:function(){g.log.apply(g,arguments),u(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(w){for(var N=arguments.length,k=Array(N>1?N-1:0),S=1;S<N;S++)k[S-1]=arguments[S];(this.listeners[w.type]||[]).forEach(function(R){var A=R.node,O=R.handler;(w.target===A||A.contains(w.target))&&O.apply(void 0,[w].concat(k))})}},{key:"listenDOM",value:function(w,N,k){this.listeners[w]||(this.listeners[w]=[]),this.listeners[w].push({node:N,handler:k})}}]),_}(h.default);v.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},v.sources={API:"api",SILENT:"silent",USER:"user"},r.default=v},function(e,r,n){Object.defineProperty(r,"__esModule",{value:!0});function i(d,h){if(!(d instanceof h))throw new TypeError("Cannot call a class as a function")}var u=function d(h){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};i(this,d),this.quill=h,this.options=p};u.DEFAULTS={},r.default=u},function(e,r,n){Object.defineProperty(r,"__esModule",{value:!0});var i=["error","warn","log","info"],u="warn";function d(p){if(i.indexOf(p)<=i.indexOf(u)){for(var c,l=arguments.length,o=Array(l>1?l-1:0),s=1;s<l;s++)o[s-1]=arguments[s];(c=console)[p].apply(c,o)}}function h(p){return i.reduce(function(c,l){return c[l]=d.bind(console,l,p),c},{})}d.level=h.level=function(p){u=p},r.default=h},function(e,r,n){var i=Array.prototype.slice,u=n(52),d=n(53),h=e.exports=function(o,s,b){return b||(b={}),o===s?!0:o instanceof Date&&s instanceof Date?o.getTime()===s.getTime():!o||!s||typeof o!="object"&&typeof s!="object"?b.strict?o===s:o==s:l(o,s,b)};function p(o){return o==null}function c(o){return!(!o||typeof o!="object"||typeof o.length!="number"||typeof o.copy!="function"||typeof o.slice!="function"||o.length>0&&typeof o[0]!="number")}function l(o,s,b){var g,m;if(p(o)||p(s)||o.prototype!==s.prototype)return!1;if(d(o))return d(s)?(o=i.call(o),s=i.call(s),h(o,s,b)):!1;if(c(o)){if(!c(s)||o.length!==s.length)return!1;for(g=0;g<o.length;g++)if(o[g]!==s[g])return!1;return!0}try{var v=u(o),y=u(s)}catch{return!1}if(v.length!=y.length)return!1;for(v.sort(),y.sort(),g=v.length-1;g>=0;g--)if(v[g]!=y[g])return!1;for(g=v.length-1;g>=0;g--)if(m=v[g],!h(o[m],s[m],b))return!1;return typeof o==typeof s}},function(e,r,n){Object.defineProperty(r,"__esModule",{value:!0});var i=n(1),u=function(){function d(h,p,c){c===void 0&&(c={}),this.attrName=h,this.keyName=p;var l=i.Scope.TYPE&i.Scope.ATTRIBUTE;c.scope!=null?this.scope=c.scope&i.Scope.LEVEL|l:this.scope=i.Scope.ATTRIBUTE,c.whitelist!=null&&(this.whitelist=c.whitelist)}return d.keys=function(h){return[].map.call(h.attributes,function(p){return p.name})},d.prototype.add=function(h,p){return this.canAdd(h,p)?(h.setAttribute(this.keyName,p),!0):!1},d.prototype.canAdd=function(h,p){var c=i.query(h,i.Scope.BLOT&(this.scope|i.Scope.TYPE));return c==null?!1:this.whitelist==null?!0:typeof p=="string"?this.whitelist.indexOf(p.replace(/["']/g,""))>-1:this.whitelist.indexOf(p)>-1},d.prototype.remove=function(h){h.removeAttribute(this.keyName)},d.prototype.value=function(h){var p=h.getAttribute(this.keyName);return this.canAdd(h,p)&&p?p:""},d}();r.default=u},function(e,r,n){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.Code=void 0;var i=function(){function S(R,A){var O=[],T=!0,P=!1,E=void 0;try{for(var j=R[Symbol.iterator](),q;!(T=(q=j.next()).done)&&(O.push(q.value),!(A&&O.length===A));T=!0);}catch(B){P=!0,E=B}finally{try{!T&&j.return&&j.return()}finally{if(P)throw E}}return O}return function(R,A){if(Array.isArray(R))return R;if(Symbol.iterator in Object(R))return S(R,A);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function S(R,A){for(var O=0;O<A.length;O++){var T=A[O];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(R,T.key,T)}}return function(R,A,O){return A&&S(R.prototype,A),O&&S(R,O),R}}(),d=function S(R,A,O){R===null&&(R=Function.prototype);var T=Object.getOwnPropertyDescriptor(R,A);if(T===void 0){var P=Object.getPrototypeOf(R);return P===null?void 0:S(P,A,O)}else{if("value"in T)return T.value;var E=T.get;return E===void 0?void 0:E.call(O)}},h=n(2),p=y(h),c=n(0),l=y(c),o=n(4),s=y(o),b=n(6),g=y(b),m=n(7),v=y(m);function y(S){return S&&S.__esModule?S:{default:S}}function _(S,R){if(!(S instanceof R))throw new TypeError("Cannot call a class as a function")}function f(S,R){if(!S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R&&(typeof R=="object"||typeof R=="function")?R:S}function w(S,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof R);S.prototype=Object.create(R&&R.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),R&&(Object.setPrototypeOf?Object.setPrototypeOf(S,R):S.__proto__=R)}var N=function(S){w(R,S);function R(){return _(this,R),f(this,(R.__proto__||Object.getPrototypeOf(R)).apply(this,arguments))}return R}(g.default);N.blotName="code",N.tagName="CODE";var k=function(S){w(R,S);function R(){return _(this,R),f(this,(R.__proto__||Object.getPrototypeOf(R)).apply(this,arguments))}return u(R,[{key:"delta",value:function(){var O=this,T=this.domNode.textContent;return T.endsWith(`
`)&&(T=T.slice(0,-1)),T.split(`
`).reduce(function(P,E){return P.insert(E).insert(`
`,O.formats())},new p.default)}},{key:"format",value:function(O,T){if(!(O===this.statics.blotName&&T)){var P=this.descendant(v.default,this.length()-1),E=i(P,1),j=E[0];j?.deleteAt(j.length()-1,1),d(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"format",this).call(this,O,T)}}},{key:"formatAt",value:function(O,T,P,E){if(T!==0&&!(l.default.query(P,l.default.Scope.BLOCK)==null||P===this.statics.blotName&&E===this.statics.formats(this.domNode))){var j=this.newlineIndex(O);if(!(j<0||j>=O+T)){var q=this.newlineIndex(O,!0)+1,B=j-q+1,G=this.isolate(q,B),D=G.next;G.format(P,E),D instanceof R&&D.formatAt(0,O-q+T-B,P,E)}}}},{key:"insertAt",value:function(O,T,P){if(P==null){var E=this.descendant(v.default,O),j=i(E,2),q=j[0],B=j[1];q.insertAt(B,T)}}},{key:"length",value:function(){var O=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?O:O+1}},{key:"newlineIndex",value:function(O){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(T)return this.domNode.textContent.slice(0,O).lastIndexOf(`
`);var P=this.domNode.textContent.slice(O).indexOf(`
`);return P>-1?O+P:-1}},{key:"optimize",value:function(O){this.domNode.textContent.endsWith(`
`)||this.appendChild(l.default.create("text",`
`)),d(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"optimize",this).call(this,O);var T=this.next;T!=null&&T.prev===this&&T.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===T.statics.formats(T.domNode)&&(T.optimize(O),T.moveChildren(this),T.remove())}},{key:"replace",value:function(O){d(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"replace",this).call(this,O),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(T){var P=l.default.find(T);P==null?T.parentNode.removeChild(T):P instanceof l.default.Embed?P.remove():P.unwrap()})}}],[{key:"create",value:function(O){var T=d(R.__proto__||Object.getPrototypeOf(R),"create",this).call(this,O);return T.setAttribute("spellcheck",!1),T}},{key:"formats",value:function(){return!0}}]),R}(s.default);k.blotName="code-block",k.tagName="PRE",k.TAB="  ",r.Code=N,r.default=k},function(e,r,n){Object.defineProperty(r,"__esModule",{value:!0});var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(D){return typeof D}:function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D},u=function(){function D(C,x){var I=[],$=!0,F=!1,U=void 0;try{for(var L=C[Symbol.iterator](),M;!($=(M=L.next()).done)&&(I.push(M.value),!(x&&I.length===x));$=!0);}catch(H){F=!0,U=H}finally{try{!$&&L.return&&L.return()}finally{if(F)throw U}}return I}return function(C,x){if(Array.isArray(C))return C;if(Symbol.iterator in Object(C))return D(C,x);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),d=function(){function D(C,x){for(var I=0;I<x.length;I++){var $=x[I];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(C,$.key,$)}}return function(C,x,I){return x&&D(C.prototype,x),I&&D(C,I),C}}(),h=n(2),p=T(h),c=n(20),l=T(c),o=n(0),s=T(o),b=n(13),g=T(b),m=n(24),v=T(m),y=n(4),_=T(y),f=n(16),w=T(f),N=n(21),k=T(N),S=n(11),R=T(S),A=n(3),O=T(A);function T(D){return D&&D.__esModule?D:{default:D}}function P(D,C,x){return C in D?Object.defineProperty(D,C,{value:x,enumerable:!0,configurable:!0,writable:!0}):D[C]=x,D}function E(D,C){if(!(D instanceof C))throw new TypeError("Cannot call a class as a function")}var j=/^[ -~]*$/,q=function(){function D(C){E(this,D),this.scroll=C,this.delta=this.getDelta()}return d(D,[{key:"applyDelta",value:function(x){var I=this,$=!1;this.scroll.update();var F=this.scroll.length();return this.scroll.batchStart(),x=G(x),x.reduce(function(U,L){var M=L.retain||L.delete||L.insert.length||1,H=L.attributes||{};if(L.insert!=null){if(typeof L.insert=="string"){var z=L.insert;z.endsWith(`
`)&&$&&($=!1,z=z.slice(0,-1)),U>=F&&!z.endsWith(`
`)&&($=!0),I.scroll.insertAt(U,z);var W=I.scroll.line(U),X=u(W,2),Q=X[0],ee=X[1],ie=(0,O.default)({},(0,y.bubbleFormats)(Q));if(Q instanceof _.default){var se=Q.descendant(s.default.Leaf,ee),ye=u(se,1),de=ye[0];ie=(0,O.default)(ie,(0,y.bubbleFormats)(de))}H=l.default.attributes.diff(ie,H)||{}}else if(i(L.insert)==="object"){var K=Object.keys(L.insert)[0];if(K==null)return U;I.scroll.insertAt(U,K,L.insert[K])}F+=M}return Object.keys(H).forEach(function(V){I.scroll.formatAt(U,M,V,H[V])}),U+M},0),x.reduce(function(U,L){return typeof L.delete=="number"?(I.scroll.deleteAt(U,L.delete),U):U+(L.retain||L.insert.length||1)},0),this.scroll.batchEnd(),this.update(x)}},{key:"deleteText",value:function(x,I){return this.scroll.deleteAt(x,I),this.update(new p.default().retain(x).delete(I))}},{key:"formatLine",value:function(x,I){var $=this,F=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(F).forEach(function(U){if(!($.scroll.whitelist!=null&&!$.scroll.whitelist[U])){var L=$.scroll.lines(x,Math.max(I,1)),M=I;L.forEach(function(H){var z=H.length();if(!(H instanceof g.default))H.format(U,F[U]);else{var W=x-H.offset($.scroll),X=H.newlineIndex(W+M)-W+1;H.formatAt(W,X,U,F[U])}M-=z})}}),this.scroll.optimize(),this.update(new p.default().retain(x).retain(I,(0,k.default)(F)))}},{key:"formatText",value:function(x,I){var $=this,F=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(F).forEach(function(U){$.scroll.formatAt(x,I,U,F[U])}),this.update(new p.default().retain(x).retain(I,(0,k.default)(F)))}},{key:"getContents",value:function(x,I){return this.delta.slice(x,x+I)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(x,I){return x.concat(I.delta())},new p.default)}},{key:"getFormat",value:function(x){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,$=[],F=[];I===0?this.scroll.path(x).forEach(function(L){var M=u(L,1),H=M[0];H instanceof _.default?$.push(H):H instanceof s.default.Leaf&&F.push(H)}):($=this.scroll.lines(x,I),F=this.scroll.descendants(s.default.Leaf,x,I));var U=[$,F].map(function(L){if(L.length===0)return{};for(var M=(0,y.bubbleFormats)(L.shift());Object.keys(M).length>0;){var H=L.shift();if(H==null)return M;M=B((0,y.bubbleFormats)(H),M)}return M});return O.default.apply(O.default,U)}},{key:"getText",value:function(x,I){return this.getContents(x,I).filter(function($){return typeof $.insert=="string"}).map(function($){return $.insert}).join("")}},{key:"insertEmbed",value:function(x,I,$){return this.scroll.insertAt(x,I,$),this.update(new p.default().retain(x).insert(P({},I,$)))}},{key:"insertText",value:function(x,I){var $=this,F=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return I=I.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(x,I),Object.keys(F).forEach(function(U){$.scroll.formatAt(x,I.length,U,F[U])}),this.update(new p.default().retain(x).insert(I,(0,k.default)(F)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var x=this.scroll.children.head;return x.statics.blotName!==_.default.blotName||x.children.length>1?!1:x.children.head instanceof w.default}},{key:"removeFormat",value:function(x,I){var $=this.getText(x,I),F=this.scroll.line(x+I),U=u(F,2),L=U[0],M=U[1],H=0,z=new p.default;L!=null&&(L instanceof g.default?H=L.newlineIndex(M)-M+1:H=L.length()-M,z=L.delta().slice(M,M+H-1).insert(`
`));var W=this.getContents(x,I+H),X=W.diff(new p.default().insert($).concat(z)),Q=new p.default().retain(x).concat(X);return this.applyDelta(Q)}},{key:"update",value:function(x){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],$=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,F=this.delta;if(I.length===1&&I[0].type==="characterData"&&I[0].target.data.match(j)&&s.default.find(I[0].target)){var U=s.default.find(I[0].target),L=(0,y.bubbleFormats)(U),M=U.offset(this.scroll),H=I[0].oldValue.replace(v.default.CONTENTS,""),z=new p.default().insert(H),W=new p.default().insert(U.value()),X=new p.default().retain(M).concat(z.diff(W,$));x=X.reduce(function(Q,ee){return ee.insert?Q.insert(ee.insert,L):Q.push(ee)},new p.default),this.delta=F.compose(x)}else this.delta=this.getDelta(),(!x||!(0,R.default)(F.compose(x),this.delta))&&(x=F.diff(this.delta,$));return x}}]),D}();function B(D,C){return Object.keys(C).reduce(function(x,I){return D[I]==null||(C[I]===D[I]?x[I]=C[I]:Array.isArray(C[I])?C[I].indexOf(D[I])<0&&(x[I]=C[I].concat([D[I]])):x[I]=[C[I],D[I]]),x},{})}function G(D){return D.reduce(function(C,x){if(x.insert===1){var I=(0,k.default)(x.attributes);return delete I.image,C.insert({image:x.attributes.image},I)}if(x.attributes!=null&&(x.attributes.list===!0||x.attributes.bullet===!0)&&(x=(0,k.default)(x),x.attributes.list?x.attributes.list="ordered":(x.attributes.list="bullet",delete x.attributes.bullet)),typeof x.insert=="string"){var $=x.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return C.insert($,x.attributes)}return C.push(x)},new p.default)}r.default=q},function(e,r,n){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.Range=void 0;var i=function(){function S(R,A){var O=[],T=!0,P=!1,E=void 0;try{for(var j=R[Symbol.iterator](),q;!(T=(q=j.next()).done)&&(O.push(q.value),!(A&&O.length===A));T=!0);}catch(B){P=!0,E=B}finally{try{!T&&j.return&&j.return()}finally{if(P)throw E}}return O}return function(R,A){if(Array.isArray(R))return R;if(Symbol.iterator in Object(R))return S(R,A);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function S(R,A){for(var O=0;O<A.length;O++){var T=A[O];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(R,T.key,T)}}return function(R,A,O){return A&&S(R.prototype,A),O&&S(R,O),R}}(),d=n(0),h=v(d),p=n(21),c=v(p),l=n(11),o=v(l),s=n(8),b=v(s),g=n(10),m=v(g);function v(S){return S&&S.__esModule?S:{default:S}}function y(S){if(Array.isArray(S)){for(var R=0,A=Array(S.length);R<S.length;R++)A[R]=S[R];return A}else return Array.from(S)}function _(S,R){if(!(S instanceof R))throw new TypeError("Cannot call a class as a function")}var f=(0,m.default)("quill:selection"),w=function S(R){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;_(this,S),this.index=R,this.length=A},N=function(){function S(R,A){var O=this;_(this,S),this.emitter=A,this.scroll=R,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=h.default.create("cursor",this),this.lastRange=this.savedRange=new w(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){O.mouseDown||setTimeout(O.update.bind(O,b.default.sources.USER),1)}),this.emitter.on(b.default.events.EDITOR_CHANGE,function(T,P){T===b.default.events.TEXT_CHANGE&&P.length()>0&&O.update(b.default.sources.SILENT)}),this.emitter.on(b.default.events.SCROLL_BEFORE_UPDATE,function(){if(O.hasFocus()){var T=O.getNativeRange();T!=null&&T.start.node!==O.cursor.textNode&&O.emitter.once(b.default.events.SCROLL_UPDATE,function(){try{O.setNativeRange(T.start.node,T.start.offset,T.end.node,T.end.offset)}catch{}})}}),this.emitter.on(b.default.events.SCROLL_OPTIMIZE,function(T,P){if(P.range){var E=P.range,j=E.startNode,q=E.startOffset,B=E.endNode,G=E.endOffset;O.setNativeRange(j,q,B,G)}}),this.update(b.default.sources.SILENT)}return u(S,[{key:"handleComposition",value:function(){var A=this;this.root.addEventListener("compositionstart",function(){A.composing=!0}),this.root.addEventListener("compositionend",function(){if(A.composing=!1,A.cursor.parent){var O=A.cursor.restore();if(!O)return;setTimeout(function(){A.setNativeRange(O.startNode,O.startOffset,O.endNode,O.endOffset)},1)}})}},{key:"handleDragging",value:function(){var A=this;this.emitter.listenDOM("mousedown",document.body,function(){A.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){A.mouseDown=!1,A.update(b.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(A,O){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[A])){this.scroll.update();var T=this.getNativeRange();if(!(T==null||!T.native.collapsed||h.default.query(A,h.default.Scope.BLOCK))){if(T.start.node!==this.cursor.textNode){var P=h.default.find(T.start.node,!1);if(P==null)return;if(P instanceof h.default.Leaf){var E=P.split(T.start.offset);P.parent.insertBefore(this.cursor,E)}else P.insertBefore(this.cursor,T.start.node);this.cursor.attach()}this.cursor.format(A,O),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(A){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,T=this.scroll.length();A=Math.min(A,T-1),O=Math.min(A+O,T-1)-A;var P=void 0,E=this.scroll.leaf(A),j=i(E,2),q=j[0],B=j[1];if(q==null)return null;var G=q.position(B,!0),D=i(G,2);P=D[0],B=D[1];var C=document.createRange();if(O>0){C.setStart(P,B);var x=this.scroll.leaf(A+O),I=i(x,2);if(q=I[0],B=I[1],q==null)return null;var $=q.position(B,!0),F=i($,2);return P=F[0],B=F[1],C.setEnd(P,B),C.getBoundingClientRect()}else{var U="left",L=void 0;return P instanceof Text?(B<P.data.length?(C.setStart(P,B),C.setEnd(P,B+1)):(C.setStart(P,B-1),C.setEnd(P,B),U="right"),L=C.getBoundingClientRect()):(L=q.domNode.getBoundingClientRect(),B>0&&(U="right")),{bottom:L.top+L.height,height:L.height,left:L[U],right:L[U],top:L.top,width:0}}}},{key:"getNativeRange",value:function(){var A=document.getSelection();if(A==null||A.rangeCount<=0)return null;var O=A.getRangeAt(0);if(O==null)return null;var T=this.normalizeNative(O);return f.info("getNativeRange",T),T}},{key:"getRange",value:function(){var A=this.getNativeRange();if(A==null)return[null,null];var O=this.normalizedToRange(A);return[O,A]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(A){var O=this,T=[[A.start.node,A.start.offset]];A.native.collapsed||T.push([A.end.node,A.end.offset]);var P=T.map(function(q){var B=i(q,2),G=B[0],D=B[1],C=h.default.find(G,!0),x=C.offset(O.scroll);return D===0?x:C instanceof h.default.Container?x+C.length():x+C.index(G,D)}),E=Math.min(Math.max.apply(Math,y(P)),this.scroll.length()-1),j=Math.min.apply(Math,[E].concat(y(P)));return new w(j,E-j)}},{key:"normalizeNative",value:function(A){if(!k(this.root,A.startContainer)||!A.collapsed&&!k(this.root,A.endContainer))return null;var O={start:{node:A.startContainer,offset:A.startOffset},end:{node:A.endContainer,offset:A.endOffset},native:A};return[O.start,O.end].forEach(function(T){for(var P=T.node,E=T.offset;!(P instanceof Text)&&P.childNodes.length>0;)if(P.childNodes.length>E)P=P.childNodes[E],E=0;else if(P.childNodes.length===E)P=P.lastChild,E=P instanceof Text?P.data.length:P.childNodes.length+1;else break;T.node=P,T.offset=E}),O}},{key:"rangeToNative",value:function(A){var O=this,T=A.collapsed?[A.index]:[A.index,A.index+A.length],P=[],E=this.scroll.length();return T.forEach(function(j,q){j=Math.min(E-1,j);var B=void 0,G=O.scroll.leaf(j),D=i(G,2),C=D[0],x=D[1],I=C.position(x,q!==0),$=i(I,2);B=$[0],x=$[1],P.push(B,x)}),P.length<2&&(P=P.concat(P)),P}},{key:"scrollIntoView",value:function(A){var O=this.lastRange;if(O!=null){var T=this.getBounds(O.index,O.length);if(T!=null){var P=this.scroll.length()-1,E=this.scroll.line(Math.min(O.index,P)),j=i(E,1),q=j[0],B=q;if(O.length>0){var G=this.scroll.line(Math.min(O.index+O.length,P)),D=i(G,1);B=D[0]}if(!(q==null||B==null)){var C=A.getBoundingClientRect();T.top<C.top?A.scrollTop-=C.top-T.top:T.bottom>C.bottom&&(A.scrollTop+=T.bottom-C.bottom)}}}}},{key:"setNativeRange",value:function(A,O){var T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:A,P=arguments.length>3&&arguments[3]!==void 0?arguments[3]:O,E=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(f.info("setNativeRange",A,O,T,P),!(A!=null&&(this.root.parentNode==null||A.parentNode==null||T.parentNode==null))){var j=document.getSelection();if(j!=null)if(A!=null){this.hasFocus()||this.root.focus();var q=(this.getNativeRange()||{}).native;if(q==null||E||A!==q.startContainer||O!==q.startOffset||T!==q.endContainer||P!==q.endOffset){A.tagName=="BR"&&(O=[].indexOf.call(A.parentNode.childNodes,A),A=A.parentNode),T.tagName=="BR"&&(P=[].indexOf.call(T.parentNode.childNodes,T),T=T.parentNode);var B=document.createRange();B.setStart(A,O),B.setEnd(T,P),j.removeAllRanges(),j.addRange(B)}}else j.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(A){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:b.default.sources.API;if(typeof O=="string"&&(T=O,O=!1),f.info("setRange",A),A!=null){var P=this.rangeToNative(A);this.setNativeRange.apply(this,y(P).concat([O]))}else this.setNativeRange(null);this.update(T)}},{key:"update",value:function(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:b.default.sources.USER,O=this.lastRange,T=this.getRange(),P=i(T,2),E=P[0],j=P[1];if(this.lastRange=E,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,o.default)(O,this.lastRange)){var q;!this.composing&&j!=null&&j.native.collapsed&&j.start.node!==this.cursor.textNode&&this.cursor.restore();var B=[b.default.events.SELECTION_CHANGE,(0,c.default)(this.lastRange),(0,c.default)(O),A];if((q=this.emitter).emit.apply(q,[b.default.events.EDITOR_CHANGE].concat(B)),A!==b.default.sources.SILENT){var G;(G=this.emitter).emit.apply(G,B)}}}}]),S}();function k(S,R){try{R.parentNode}catch{return!1}return R instanceof Text&&(R=R.parentNode),S.contains(R)}r.Range=w,r.default=N},function(e,r,n){Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function b(g,m){for(var v=0;v<m.length;v++){var y=m[v];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(g,y.key,y)}}return function(g,m,v){return m&&b(g.prototype,m),v&&b(g,v),g}}(),u=function b(g,m,v){g===null&&(g=Function.prototype);var y=Object.getOwnPropertyDescriptor(g,m);if(y===void 0){var _=Object.getPrototypeOf(g);return _===null?void 0:b(_,m,v)}else{if("value"in y)return y.value;var f=y.get;return f===void 0?void 0:f.call(v)}},d=n(0),h=p(d);function p(b){return b&&b.__esModule?b:{default:b}}function c(b,g){if(!(b instanceof g))throw new TypeError("Cannot call a class as a function")}function l(b,g){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:b}function o(b,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);b.prototype=Object.create(g&&g.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(b,g):b.__proto__=g)}var s=function(b){o(g,b);function g(){return c(this,g),l(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return i(g,[{key:"insertInto",value:function(v,y){v.children.length===0?u(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"insertInto",this).call(this,v,y):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),g}(h.default.Embed);s.blotName="break",s.tagName="BR",r.default=s},function(e,r,n){var i=this&&this.__extends||function(){var l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,s){o.__proto__=s}||function(o,s){for(var b in s)s.hasOwnProperty(b)&&(o[b]=s[b])};return function(o,s){l(o,s);function b(){this.constructor=o}o.prototype=s===null?Object.create(s):(b.prototype=s.prototype,new b)}}();Object.defineProperty(r,"__esModule",{value:!0});var u=n(44),d=n(30),h=n(1),p=function(l){i(o,l);function o(s){var b=l.call(this,s)||this;return b.build(),b}return o.prototype.appendChild=function(s){this.insertBefore(s)},o.prototype.attach=function(){l.prototype.attach.call(this),this.children.forEach(function(s){s.attach()})},o.prototype.build=function(){var s=this;this.children=new u.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(b){try{var g=c(b);s.insertBefore(g,s.children.head||void 0)}catch(m){if(m instanceof h.ParchmentError)return;throw m}})},o.prototype.deleteAt=function(s,b){if(s===0&&b===this.length())return this.remove();this.children.forEachAt(s,b,function(g,m,v){g.deleteAt(m,v)})},o.prototype.descendant=function(s,b){var g=this.children.find(b),m=g[0],v=g[1];return s.blotName==null&&s(m)||s.blotName!=null&&m instanceof s?[m,v]:m instanceof o?m.descendant(s,v):[null,-1]},o.prototype.descendants=function(s,b,g){b===void 0&&(b=0),g===void 0&&(g=Number.MAX_VALUE);var m=[],v=g;return this.children.forEachAt(b,g,function(y,_,f){(s.blotName==null&&s(y)||s.blotName!=null&&y instanceof s)&&m.push(y),y instanceof o&&(m=m.concat(y.descendants(s,_,v))),v-=f}),m},o.prototype.detach=function(){this.children.forEach(function(s){s.detach()}),l.prototype.detach.call(this)},o.prototype.formatAt=function(s,b,g,m){this.children.forEachAt(s,b,function(v,y,_){v.formatAt(y,_,g,m)})},o.prototype.insertAt=function(s,b,g){var m=this.children.find(s),v=m[0],y=m[1];if(v)v.insertAt(y,b,g);else{var _=g==null?h.create("text",b):h.create(b,g);this.appendChild(_)}},o.prototype.insertBefore=function(s,b){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(g){return s instanceof g}))throw new h.ParchmentError("Cannot insert "+s.statics.blotName+" into "+this.statics.blotName);s.insertInto(this,b)},o.prototype.length=function(){return this.children.reduce(function(s,b){return s+b.length()},0)},o.prototype.moveChildren=function(s,b){this.children.forEach(function(g){s.insertBefore(g,b)})},o.prototype.optimize=function(s){if(l.prototype.optimize.call(this,s),this.children.length===0)if(this.statics.defaultChild!=null){var b=h.create(this.statics.defaultChild);this.appendChild(b),b.optimize(s)}else this.remove()},o.prototype.path=function(s,b){b===void 0&&(b=!1);var g=this.children.find(s,b),m=g[0],v=g[1],y=[[this,s]];return m instanceof o?y.concat(m.path(v,b)):(m!=null&&y.push([m,v]),y)},o.prototype.removeChild=function(s){this.children.remove(s)},o.prototype.replace=function(s){s instanceof o&&s.moveChildren(this),l.prototype.replace.call(this,s)},o.prototype.split=function(s,b){if(b===void 0&&(b=!1),!b){if(s===0)return this;if(s===this.length())return this.next}var g=this.clone();return this.parent.insertBefore(g,this.next),this.children.forEachAt(s,this.length(),function(m,v,y){m=m.split(v,b),g.appendChild(m)}),g},o.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},o.prototype.update=function(s,b){var g=this,m=[],v=[];s.forEach(function(y){y.target===g.domNode&&y.type==="childList"&&(m.push.apply(m,y.addedNodes),v.push.apply(v,y.removedNodes))}),v.forEach(function(y){if(!(y.parentNode!=null&&y.tagName!=="IFRAME"&&document.body.compareDocumentPosition(y)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var _=h.find(y);_!=null&&(_.domNode.parentNode==null||_.domNode.parentNode===g.domNode)&&_.detach()}}),m.filter(function(y){return y.parentNode==g.domNode}).sort(function(y,_){return y===_?0:y.compareDocumentPosition(_)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(y){var _=null;y.nextSibling!=null&&(_=h.find(y.nextSibling));var f=c(y);(f.next!=_||f.next==null)&&(f.parent!=null&&f.parent.removeChild(g),g.insertBefore(f,_||void 0))})},o}(d.default);function c(l){var o=h.find(l);if(o==null)try{o=h.create(l)}catch{o=h.create(h.Scope.INLINE),[].slice.call(l.childNodes).forEach(function(b){o.domNode.appendChild(b)}),l.parentNode&&l.parentNode.replaceChild(o.domNode,l),o.attach()}return o}r.default=p},function(e,r,n){var i=this&&this.__extends||function(){var l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,s){o.__proto__=s}||function(o,s){for(var b in s)s.hasOwnProperty(b)&&(o[b]=s[b])};return function(o,s){l(o,s);function b(){this.constructor=o}o.prototype=s===null?Object.create(s):(b.prototype=s.prototype,new b)}}();Object.defineProperty(r,"__esModule",{value:!0});var u=n(12),d=n(31),h=n(17),p=n(1),c=function(l){i(o,l);function o(s){var b=l.call(this,s)||this;return b.attributes=new d.default(b.domNode),b}return o.formats=function(s){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return s.tagName.toLowerCase()},o.prototype.format=function(s,b){var g=p.query(s);g instanceof u.default?this.attributes.attribute(g,b):b&&g!=null&&(s!==this.statics.blotName||this.formats()[s]!==b)&&this.replaceWith(s,b)},o.prototype.formats=function(){var s=this.attributes.values(),b=this.statics.formats(this.domNode);return b!=null&&(s[this.statics.blotName]=b),s},o.prototype.replaceWith=function(s,b){var g=l.prototype.replaceWith.call(this,s,b);return this.attributes.copy(g),g},o.prototype.update=function(s,b){var g=this;l.prototype.update.call(this,s,b),s.some(function(m){return m.target===g.domNode&&m.type==="attributes"})&&this.attributes.build()},o.prototype.wrap=function(s,b){var g=l.prototype.wrap.call(this,s,b);return g instanceof o&&g.statics.scope===this.statics.scope&&this.attributes.move(g),g},o}(h.default);r.default=c},function(e,r,n){var i=this&&this.__extends||function(){var p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var o in l)l.hasOwnProperty(o)&&(c[o]=l[o])};return function(c,l){p(c,l);function o(){this.constructor=c}c.prototype=l===null?Object.create(l):(o.prototype=l.prototype,new o)}}();Object.defineProperty(r,"__esModule",{value:!0});var u=n(30),d=n(1),h=function(p){i(c,p);function c(){return p!==null&&p.apply(this,arguments)||this}return c.value=function(l){return!0},c.prototype.index=function(l,o){return this.domNode===l||this.domNode.compareDocumentPosition(l)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(o,1):-1},c.prototype.position=function(l,o){var s=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return l>0&&(s+=1),[this.parent.domNode,s]},c.prototype.value=function(){var l;return l={},l[this.statics.blotName]=this.statics.value(this.domNode)||!0,l},c.scope=d.Scope.INLINE_BLOT,c}(u.default);r.default=h},function(e,r,n){var i=n(11),u=n(3),d={attributes:{compose:function(p,c,l){typeof p!="object"&&(p={}),typeof c!="object"&&(c={});var o=u(!0,{},c);l||(o=Object.keys(o).reduce(function(b,g){return o[g]!=null&&(b[g]=o[g]),b},{}));for(var s in p)p[s]!==void 0&&c[s]===void 0&&(o[s]=p[s]);return Object.keys(o).length>0?o:void 0},diff:function(p,c){typeof p!="object"&&(p={}),typeof c!="object"&&(c={});var l=Object.keys(p).concat(Object.keys(c)).reduce(function(o,s){return i(p[s],c[s])||(o[s]=c[s]===void 0?null:c[s]),o},{});return Object.keys(l).length>0?l:void 0},transform:function(p,c,l){if(typeof p!="object")return c;if(typeof c=="object"){if(!l)return c;var o=Object.keys(c).reduce(function(s,b){return p[b]===void 0&&(s[b]=c[b]),s},{});return Object.keys(o).length>0?o:void 0}}},iterator:function(p){return new h(p)},length:function(p){return typeof p.delete=="number"?p.delete:typeof p.retain=="number"?p.retain:typeof p.insert=="string"?p.insert.length:1}};function h(p){this.ops=p,this.index=0,this.offset=0}h.prototype.hasNext=function(){return this.peekLength()<1/0},h.prototype.next=function(p){p||(p=1/0);var c=this.ops[this.index];if(c){var l=this.offset,o=d.length(c);if(p>=o-l?(p=o-l,this.index+=1,this.offset=0):this.offset+=p,typeof c.delete=="number")return{delete:p};var s={};return c.attributes&&(s.attributes=c.attributes),typeof c.retain=="number"?s.retain=p:typeof c.insert=="string"?s.insert=c.insert.substr(l,p):s.insert=c.insert,s}else return{retain:1/0}},h.prototype.peek=function(){return this.ops[this.index]},h.prototype.peekLength=function(){return this.ops[this.index]?d.length(this.ops[this.index])-this.offset:1/0},h.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},h.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var p=this.offset,c=this.index,l=this.next(),o=this.ops.slice(this.index);return this.offset=p,this.index=c,[l].concat(o)}else return[]},e.exports=d},function(e,r){var n=function(){function i(g,m){return m!=null&&g instanceof m}var u;try{u=Map}catch{u=function(){}}var d;try{d=Set}catch{d=function(){}}var h;try{h=Promise}catch{h=function(){}}function p(g,m,v,y,_){typeof m=="object"&&(v=m.depth,y=m.prototype,_=m.includeNonEnumerable,m=m.circular);var f=[],w=[],N=typeof Buffer<"u";typeof m>"u"&&(m=!0),typeof v>"u"&&(v=1/0);function k(S,R){if(S===null)return null;if(R===0)return S;var A,O;if(typeof S!="object")return S;if(i(S,u))A=new u;else if(i(S,d))A=new d;else if(i(S,h))A=new h(function(C,x){S.then(function(I){C(k(I,R-1))},function(I){x(k(I,R-1))})});else if(p.__isArray(S))A=[];else if(p.__isRegExp(S))A=new RegExp(S.source,b(S)),S.lastIndex&&(A.lastIndex=S.lastIndex);else if(p.__isDate(S))A=new Date(S.getTime());else{if(N&&Buffer.isBuffer(S))return Buffer.allocUnsafe?A=Buffer.allocUnsafe(S.length):A=new Buffer(S.length),S.copy(A),A;i(S,Error)?A=Object.create(S):typeof y>"u"?(O=Object.getPrototypeOf(S),A=Object.create(O)):(A=Object.create(y),O=y)}if(m){var T=f.indexOf(S);if(T!=-1)return w[T];f.push(S),w.push(A)}i(S,u)&&S.forEach(function(C,x){var I=k(x,R-1),$=k(C,R-1);A.set(I,$)}),i(S,d)&&S.forEach(function(C){var x=k(C,R-1);A.add(x)});for(var P in S){var E;O&&(E=Object.getOwnPropertyDescriptor(O,P)),!(E&&E.set==null)&&(A[P]=k(S[P],R-1))}if(Object.getOwnPropertySymbols)for(var j=Object.getOwnPropertySymbols(S),P=0;P<j.length;P++){var q=j[P],B=Object.getOwnPropertyDescriptor(S,q);B&&!B.enumerable&&!_||(A[q]=k(S[q],R-1),B.enumerable||Object.defineProperty(A,q,{enumerable:!1}))}if(_)for(var G=Object.getOwnPropertyNames(S),P=0;P<G.length;P++){var D=G[P],B=Object.getOwnPropertyDescriptor(S,D);B&&B.enumerable||(A[D]=k(S[D],R-1),Object.defineProperty(A,D,{enumerable:!1}))}return A}return k(g,v)}p.clonePrototype=function(m){if(m===null)return null;var v=function(){};return v.prototype=m,new v};function c(g){return Object.prototype.toString.call(g)}p.__objToStr=c;function l(g){return typeof g=="object"&&c(g)==="[object Date]"}p.__isDate=l;function o(g){return typeof g=="object"&&c(g)==="[object Array]"}p.__isArray=o;function s(g){return typeof g=="object"&&c(g)==="[object RegExp]"}p.__isRegExp=s;function b(g){var m="";return g.global&&(m+="g"),g.ignoreCase&&(m+="i"),g.multiline&&(m+="m"),m}return p.__getRegExpFlags=b,p}();typeof e=="object"&&e.exports&&(e.exports=n)},function(e,r,n){Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function A(O,T){var P=[],E=!0,j=!1,q=void 0;try{for(var B=O[Symbol.iterator](),G;!(E=(G=B.next()).done)&&(P.push(G.value),!(T&&P.length===T));E=!0);}catch(D){j=!0,q=D}finally{try{!E&&B.return&&B.return()}finally{if(j)throw q}}return P}return function(O,T){if(Array.isArray(O))return O;if(Symbol.iterator in Object(O))return A(O,T);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function A(O,T){for(var P=0;P<T.length;P++){var E=T[P];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(O,E.key,E)}}return function(O,T,P){return T&&A(O.prototype,T),P&&A(O,P),O}}(),d=function A(O,T,P){O===null&&(O=Function.prototype);var E=Object.getOwnPropertyDescriptor(O,T);if(E===void 0){var j=Object.getPrototypeOf(O);return j===null?void 0:A(j,T,P)}else{if("value"in E)return E.value;var q=E.get;return q===void 0?void 0:q.call(P)}},h=n(0),p=f(h),c=n(8),l=f(c),o=n(4),s=f(o),b=n(16),g=f(b),m=n(13),v=f(m),y=n(25),_=f(y);function f(A){return A&&A.__esModule?A:{default:A}}function w(A,O){if(!(A instanceof O))throw new TypeError("Cannot call a class as a function")}function N(A,O){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return O&&(typeof O=="object"||typeof O=="function")?O:A}function k(A,O){if(typeof O!="function"&&O!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof O);A.prototype=Object.create(O&&O.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),O&&(Object.setPrototypeOf?Object.setPrototypeOf(A,O):A.__proto__=O)}function S(A){return A instanceof s.default||A instanceof o.BlockEmbed}var R=function(A){k(O,A);function O(T,P){w(this,O);var E=N(this,(O.__proto__||Object.getPrototypeOf(O)).call(this,T));return E.emitter=P.emitter,Array.isArray(P.whitelist)&&(E.whitelist=P.whitelist.reduce(function(j,q){return j[q]=!0,j},{})),E.domNode.addEventListener("DOMNodeInserted",function(){}),E.optimize(),E.enable(),E}return u(O,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(P,E){var j=this.line(P),q=i(j,2),B=q[0],G=q[1],D=this.line(P+E),C=i(D,1),x=C[0];if(d(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"deleteAt",this).call(this,P,E),x!=null&&B!==x&&G>0){if(B instanceof o.BlockEmbed||x instanceof o.BlockEmbed){this.optimize();return}if(B instanceof v.default){var I=B.newlineIndex(B.length(),!0);if(I>-1&&(B=B.split(I+1),B===x)){this.optimize();return}}else if(x instanceof v.default){var $=x.newlineIndex(0);$>-1&&x.split($+1)}var F=x.children.head instanceof g.default?null:x.children.head;B.moveChildren(x,F),B.remove()}this.optimize()}},{key:"enable",value:function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",P)}},{key:"formatAt",value:function(P,E,j,q){this.whitelist!=null&&!this.whitelist[j]||(d(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"formatAt",this).call(this,P,E,j,q),this.optimize())}},{key:"insertAt",value:function(P,E,j){if(!(j!=null&&this.whitelist!=null&&!this.whitelist[E])){if(P>=this.length())if(j==null||p.default.query(E,p.default.Scope.BLOCK)==null){var q=p.default.create(this.statics.defaultChild);this.appendChild(q),j==null&&E.endsWith(`
`)&&(E=E.slice(0,-1)),q.insertAt(0,E,j)}else{var B=p.default.create(E,j);this.appendChild(B)}else d(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"insertAt",this).call(this,P,E,j);this.optimize()}}},{key:"insertBefore",value:function(P,E){if(P.statics.scope===p.default.Scope.INLINE_BLOT){var j=p.default.create(this.statics.defaultChild);j.appendChild(P),P=j}d(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"insertBefore",this).call(this,P,E)}},{key:"leaf",value:function(P){return this.path(P).pop()||[null,-1]}},{key:"line",value:function(P){return P===this.length()?this.line(P-1):this.descendant(S,P)}},{key:"lines",value:function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,j=function q(B,G,D){var C=[],x=D;return B.children.forEachAt(G,D,function(I,$,F){S(I)?C.push(I):I instanceof p.default.Container&&(C=C.concat(q(I,$,x))),x-=F}),C};return j(this,P,E)}},{key:"optimize",value:function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(d(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"optimize",this).call(this,P,E),P.length>0&&this.emitter.emit(l.default.events.SCROLL_OPTIMIZE,P,E))}},{key:"path",value:function(P){return d(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"path",this).call(this,P).slice(1)}},{key:"update",value:function(P){if(this.batch!==!0){var E=l.default.sources.USER;typeof P=="string"&&(E=P),Array.isArray(P)||(P=this.observer.takeRecords()),P.length>0&&this.emitter.emit(l.default.events.SCROLL_BEFORE_UPDATE,E,P),d(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"update",this).call(this,P.concat([])),P.length>0&&this.emitter.emit(l.default.events.SCROLL_UPDATE,E,P)}}}]),O}(p.default.Scroll);R.blotName="scroll",R.className="ql-editor",R.tagName="DIV",R.defaultChild="block",R.allowedChildren=[s.default,o.BlockEmbed,_.default],r.default=R},function(e,r,n){Object.defineProperty(r,"__esModule",{value:!0}),r.SHORTKEY=r.default=void 0;var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(L){return typeof L}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},u=function(){function L(M,H){var z=[],W=!0,X=!1,Q=void 0;try{for(var ee=M[Symbol.iterator](),ie;!(W=(ie=ee.next()).done)&&(z.push(ie.value),!(H&&z.length===H));W=!0);}catch(se){X=!0,Q=se}finally{try{!W&&ee.return&&ee.return()}finally{if(X)throw Q}}return z}return function(M,H){if(Array.isArray(M))return M;if(Symbol.iterator in Object(M))return L(M,H);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),d=function(){function L(M,H){for(var z=0;z<H.length;z++){var W=H[z];W.enumerable=W.enumerable||!1,W.configurable=!0,"value"in W&&(W.writable=!0),Object.defineProperty(M,W.key,W)}}return function(M,H,z){return H&&L(M.prototype,H),z&&L(M,z),M}}(),h=n(21),p=A(h),c=n(11),l=A(c),o=n(3),s=A(o),b=n(2),g=A(b),m=n(20),v=A(m),y=n(0),_=A(y),f=n(5),w=A(f),N=n(10),k=A(N),S=n(9),R=A(S);function A(L){return L&&L.__esModule?L:{default:L}}function O(L,M,H){return M in L?Object.defineProperty(L,M,{value:H,enumerable:!0,configurable:!0,writable:!0}):L[M]=H,L}function T(L,M){if(!(L instanceof M))throw new TypeError("Cannot call a class as a function")}function P(L,M){if(!L)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return M&&(typeof M=="object"||typeof M=="function")?M:L}function E(L,M){if(typeof M!="function"&&M!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof M);L.prototype=Object.create(M&&M.prototype,{constructor:{value:L,enumerable:!1,writable:!0,configurable:!0}}),M&&(Object.setPrototypeOf?Object.setPrototypeOf(L,M):L.__proto__=M)}var j=(0,k.default)("quill:keyboard"),q=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",B=function(L){E(M,L),d(M,null,[{key:"match",value:function(z,W){return W=U(W),["altKey","ctrlKey","metaKey","shiftKey"].some(function(X){return!!W[X]!==z[X]&&W[X]!==null})?!1:W.key===(z.which||z.keyCode)}}]);function M(H,z){T(this,M);var W=P(this,(M.__proto__||Object.getPrototypeOf(M)).call(this,H,z));return W.bindings={},Object.keys(W.options.bindings).forEach(function(X){X==="list autofill"&&H.scroll.whitelist!=null&&!H.scroll.whitelist.list||W.options.bindings[X]&&W.addBinding(W.options.bindings[X])}),W.addBinding({key:M.keys.ENTER,shiftKey:null},I),W.addBinding({key:M.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(W.addBinding({key:M.keys.BACKSPACE},{collapsed:!0},D),W.addBinding({key:M.keys.DELETE},{collapsed:!0},C)):(W.addBinding({key:M.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},D),W.addBinding({key:M.keys.DELETE},{collapsed:!0,suffix:/^.?$/},C)),W.addBinding({key:M.keys.BACKSPACE},{collapsed:!1},x),W.addBinding({key:M.keys.DELETE},{collapsed:!1},x),W.addBinding({key:M.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},D),W.listen(),W}return d(M,[{key:"addBinding",value:function(z){var W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},X=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Q=U(z);if(Q==null||Q.key==null)return j.warn("Attempted to add invalid keyboard binding",Q);typeof W=="function"&&(W={handler:W}),typeof X=="function"&&(X={handler:X}),Q=(0,s.default)(Q,W,X),this.bindings[Q.key]=this.bindings[Q.key]||[],this.bindings[Q.key].push(Q)}},{key:"listen",value:function(){var z=this;this.quill.root.addEventListener("keydown",function(W){if(!W.defaultPrevented){var X=W.which||W.keyCode,Q=(z.bindings[X]||[]).filter(function(he){return M.match(W,he)});if(Q.length!==0){var ee=z.quill.getSelection();if(!(ee==null||!z.quill.hasFocus())){var ie=z.quill.getLine(ee.index),se=u(ie,2),ye=se[0],de=se[1],K=z.quill.getLeaf(ee.index),V=u(K,2),Z=V[0],Y=V[1],J=ee.length===0?[Z,Y]:z.quill.getLeaf(ee.index+ee.length),te=u(J,2),re=te[0],ne=te[1],me=Z instanceof _.default.Text?Z.value().slice(0,Y):"",Ee=re instanceof _.default.Text?re.value().slice(ne):"",fe={collapsed:ee.length===0,empty:ee.length===0&&ye.length()<=1,format:z.quill.getFormat(ee),offset:de,prefix:me,suffix:Ee},xn=Q.some(function(he){if(he.collapsed!=null&&he.collapsed!==fe.collapsed||he.empty!=null&&he.empty!==fe.empty||he.offset!=null&&he.offset!==fe.offset)return!1;if(Array.isArray(he.format)){if(he.format.every(function(ke){return fe.format[ke]==null}))return!1}else if(i(he.format)==="object"&&!Object.keys(he.format).every(function(ke){return he.format[ke]===!0?fe.format[ke]!=null:he.format[ke]===!1?fe.format[ke]==null:(0,l.default)(he.format[ke],fe.format[ke])}))return!1;return he.prefix!=null&&!he.prefix.test(fe.prefix)||he.suffix!=null&&!he.suffix.test(fe.suffix)?!1:he.handler.call(z,ee,fe)!==!0});xn&&W.preventDefault()}}}})}}]),M}(R.default);B.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},B.DEFAULTS={bindings:{bold:F("bold"),italic:F("italic"),underline:F("underline"),indent:{key:B.keys.TAB,format:["blockquote","indent","list"],handler:function(M,H){if(H.collapsed&&H.offset!==0)return!0;this.quill.format("indent","+1",w.default.sources.USER)}},outdent:{key:B.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(M,H){if(H.collapsed&&H.offset!==0)return!0;this.quill.format("indent","-1",w.default.sources.USER)}},"outdent backspace":{key:B.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(M,H){H.format.indent!=null?this.quill.format("indent","-1",w.default.sources.USER):H.format.list!=null&&this.quill.format("list",!1,w.default.sources.USER)}},"indent code-block":$(!0),"outdent code-block":$(!1),"remove tab":{key:B.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(M){this.quill.deleteText(M.index-1,1,w.default.sources.USER)}},tab:{key:B.keys.TAB,handler:function(M){this.quill.history.cutoff();var H=new g.default().retain(M.index).delete(M.length).insert("	");this.quill.updateContents(H,w.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(M.index+1,w.default.sources.SILENT)}},"list empty enter":{key:B.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(M,H){this.quill.format("list",!1,w.default.sources.USER),H.format.indent&&this.quill.format("indent",!1,w.default.sources.USER)}},"checklist enter":{key:B.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(M){var H=this.quill.getLine(M.index),z=u(H,2),W=z[0],X=z[1],Q=(0,s.default)({},W.formats(),{list:"checked"}),ee=new g.default().retain(M.index).insert(`
`,Q).retain(W.length()-X-1).retain(1,{list:"unchecked"});this.quill.updateContents(ee,w.default.sources.USER),this.quill.setSelection(M.index+1,w.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:B.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(M,H){var z=this.quill.getLine(M.index),W=u(z,2),X=W[0],Q=W[1],ee=new g.default().retain(M.index).insert(`
`,H.format).retain(X.length()-Q-1).retain(1,{header:null});this.quill.updateContents(ee,w.default.sources.USER),this.quill.setSelection(M.index+1,w.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(M,H){var z=H.prefix.length,W=this.quill.getLine(M.index),X=u(W,2),Q=X[0],ee=X[1];if(ee>z)return!0;var ie=void 0;switch(H.prefix.trim()){case"[]":case"[ ]":ie="unchecked";break;case"[x]":ie="checked";break;case"-":case"*":ie="bullet";break;default:ie="ordered"}this.quill.insertText(M.index," ",w.default.sources.USER),this.quill.history.cutoff();var se=new g.default().retain(M.index-ee).delete(z+1).retain(Q.length()-2-ee).retain(1,{list:ie});this.quill.updateContents(se,w.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(M.index-z,w.default.sources.SILENT)}},"code exit":{key:B.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(M){var H=this.quill.getLine(M.index),z=u(H,2),W=z[0],X=z[1],Q=new g.default().retain(M.index+W.length()-X-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(Q,w.default.sources.USER)}},"embed left":G(B.keys.LEFT,!1),"embed left shift":G(B.keys.LEFT,!0),"embed right":G(B.keys.RIGHT,!1),"embed right shift":G(B.keys.RIGHT,!0)}};function G(L,M){var H,z=L===B.keys.LEFT?"prefix":"suffix";return H={key:L,shiftKey:M,altKey:null},O(H,z,/^$/),O(H,"handler",function(X){var Q=X.index;L===B.keys.RIGHT&&(Q+=X.length+1);var ee=this.quill.getLeaf(Q),ie=u(ee,1),se=ie[0];return se instanceof _.default.Embed?(L===B.keys.LEFT?M?this.quill.setSelection(X.index-1,X.length+1,w.default.sources.USER):this.quill.setSelection(X.index-1,w.default.sources.USER):M?this.quill.setSelection(X.index,X.length+1,w.default.sources.USER):this.quill.setSelection(X.index+X.length+1,w.default.sources.USER),!1):!0}),H}function D(L,M){if(!(L.index===0||this.quill.getLength()<=1)){var H=this.quill.getLine(L.index),z=u(H,1),W=z[0],X={};if(M.offset===0){var Q=this.quill.getLine(L.index-1),ee=u(Q,1),ie=ee[0];if(ie!=null&&ie.length()>1){var se=W.formats(),ye=this.quill.getFormat(L.index-1,1);X=v.default.attributes.diff(se,ye)||{}}}var de=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(M.prefix)?2:1;this.quill.deleteText(L.index-de,de,w.default.sources.USER),Object.keys(X).length>0&&this.quill.formatLine(L.index-de,de,X,w.default.sources.USER),this.quill.focus()}}function C(L,M){var H=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(M.suffix)?2:1;if(!(L.index>=this.quill.getLength()-H)){var z={},W=0,X=this.quill.getLine(L.index),Q=u(X,1),ee=Q[0];if(M.offset>=ee.length()-1){var ie=this.quill.getLine(L.index+1),se=u(ie,1),ye=se[0];if(ye){var de=ee.formats(),K=this.quill.getFormat(L.index,1);z=v.default.attributes.diff(de,K)||{},W=ye.length()}}this.quill.deleteText(L.index,H,w.default.sources.USER),Object.keys(z).length>0&&this.quill.formatLine(L.index+W-1,H,z,w.default.sources.USER)}}function x(L){var M=this.quill.getLines(L),H={};if(M.length>1){var z=M[0].formats(),W=M[M.length-1].formats();H=v.default.attributes.diff(W,z)||{}}this.quill.deleteText(L,w.default.sources.USER),Object.keys(H).length>0&&this.quill.formatLine(L.index,1,H,w.default.sources.USER),this.quill.setSelection(L.index,w.default.sources.SILENT),this.quill.focus()}function I(L,M){var H=this;L.length>0&&this.quill.scroll.deleteAt(L.index,L.length);var z=Object.keys(M.format).reduce(function(W,X){return _.default.query(X,_.default.Scope.BLOCK)&&!Array.isArray(M.format[X])&&(W[X]=M.format[X]),W},{});this.quill.insertText(L.index,`
`,z,w.default.sources.USER),this.quill.setSelection(L.index+1,w.default.sources.SILENT),this.quill.focus(),Object.keys(M.format).forEach(function(W){z[W]==null&&(Array.isArray(M.format[W])||W!=="link"&&H.quill.format(W,M.format[W],w.default.sources.USER))})}function $(L){return{key:B.keys.TAB,shiftKey:!L,format:{"code-block":!0},handler:function(H){var z=_.default.query("code-block"),W=H.index,X=H.length,Q=this.quill.scroll.descendant(z,W),ee=u(Q,2),ie=ee[0],se=ee[1];if(ie!=null){var ye=this.quill.getIndex(ie),de=ie.newlineIndex(se,!0)+1,K=ie.newlineIndex(ye+se+X),V=ie.domNode.textContent.slice(de,K).split(`
`);se=0,V.forEach(function(Z,Y){L?(ie.insertAt(de+se,z.TAB),se+=z.TAB.length,Y===0?W+=z.TAB.length:X+=z.TAB.length):Z.startsWith(z.TAB)&&(ie.deleteAt(de+se,z.TAB.length),se-=z.TAB.length,Y===0?W-=z.TAB.length:X-=z.TAB.length),se+=Z.length+1}),this.quill.update(w.default.sources.USER),this.quill.setSelection(W,X,w.default.sources.SILENT)}}}}function F(L){return{key:L[0].toUpperCase(),shortKey:!0,handler:function(H,z){this.quill.format(L,!z.format[L],w.default.sources.USER)}}}function U(L){if(typeof L=="string"||typeof L=="number")return U({key:L});if((typeof L>"u"?"undefined":i(L))==="object"&&(L=(0,p.default)(L,!1)),typeof L.key=="string")if(B.keys[L.key.toUpperCase()]!=null)L.key=B.keys[L.key.toUpperCase()];else if(L.key.length===1)L.key=L.key.toUpperCase().charCodeAt(0);else return null;return L.shortKey&&(L[q]=L.shortKey,delete L.shortKey),L}r.default=B,r.SHORTKEY=q},function(e,r,n){Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function v(y,_){var f=[],w=!0,N=!1,k=void 0;try{for(var S=y[Symbol.iterator](),R;!(w=(R=S.next()).done)&&(f.push(R.value),!(_&&f.length===_));w=!0);}catch(A){N=!0,k=A}finally{try{!w&&S.return&&S.return()}finally{if(N)throw k}}return f}return function(y,_){if(Array.isArray(y))return y;if(Symbol.iterator in Object(y))return v(y,_);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function v(y,_,f){y===null&&(y=Function.prototype);var w=Object.getOwnPropertyDescriptor(y,_);if(w===void 0){var N=Object.getPrototypeOf(y);return N===null?void 0:v(N,_,f)}else{if("value"in w)return w.value;var k=w.get;return k===void 0?void 0:k.call(f)}},d=function(){function v(y,_){for(var f=0;f<_.length;f++){var w=_[f];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(y,w.key,w)}}return function(y,_,f){return _&&v(y.prototype,_),f&&v(y,f),y}}(),h=n(0),p=o(h),c=n(7),l=o(c);function o(v){return v&&v.__esModule?v:{default:v}}function s(v,y){if(!(v instanceof y))throw new TypeError("Cannot call a class as a function")}function b(v,y){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:v}function g(v,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);v.prototype=Object.create(y&&y.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(v,y):v.__proto__=y)}var m=function(v){g(y,v),d(y,null,[{key:"value",value:function(){}}]);function y(_,f){s(this,y);var w=b(this,(y.__proto__||Object.getPrototypeOf(y)).call(this,_));return w.selection=f,w.textNode=document.createTextNode(y.CONTENTS),w.domNode.appendChild(w.textNode),w._length=0,w}return d(y,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(f,w){if(this._length!==0)return u(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"format",this).call(this,f,w);for(var N=this,k=0;N!=null&&N.statics.scope!==p.default.Scope.BLOCK_BLOT;)k+=N.offset(N.parent),N=N.parent;N!=null&&(this._length=y.CONTENTS.length,N.optimize(),N.formatAt(k,y.CONTENTS.length,f,w),this._length=0)}},{key:"index",value:function(f,w){return f===this.textNode?0:u(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"index",this).call(this,f,w)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){u(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!(this.selection.composing||this.parent==null)){var f=this.textNode,w=this.selection.getNativeRange(),N=void 0,k=void 0,S=void 0;if(w!=null&&w.start.node===f&&w.end.node===f){var R=[f,w.start.offset,w.end.offset];N=R[0],k=R[1],S=R[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==y.CONTENTS){var A=this.textNode.data.split(y.CONTENTS).join("");this.next instanceof l.default?(N=this.next.domNode,this.next.insertAt(0,A),this.textNode.data=y.CONTENTS):(this.textNode.data=A,this.parent.insertBefore(p.default.create(this.textNode),this),this.textNode=document.createTextNode(y.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),k!=null){var O=[k,S].map(function(P){return Math.max(0,Math.min(N.data.length,P-1))}),T=i(O,2);return k=T[0],S=T[1],{startNode:N,startOffset:k,endNode:N,endOffset:S}}}}},{key:"update",value:function(f,w){var N=this;if(f.some(function(S){return S.type==="characterData"&&S.target===N.textNode})){var k=this.restore();k&&(w.range=k)}}},{key:"value",value:function(){return""}}]),y}(p.default.Embed);m.blotName="cursor",m.className="ql-cursor",m.tagName="span",m.CONTENTS="\uFEFF",r.default=m},function(e,r,n){Object.defineProperty(r,"__esModule",{value:!0});var i=n(0),u=p(i),d=n(4),h=p(d);function p(b){return b&&b.__esModule?b:{default:b}}function c(b,g){if(!(b instanceof g))throw new TypeError("Cannot call a class as a function")}function l(b,g){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:b}function o(b,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);b.prototype=Object.create(g&&g.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(b,g):b.__proto__=g)}var s=function(b){o(g,b);function g(){return c(this,g),l(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return g}(u.default.Container);s.allowedChildren=[h.default,d.BlockEmbed,s],r.default=s},function(e,r,n){Object.defineProperty(r,"__esModule",{value:!0}),r.ColorStyle=r.ColorClass=r.ColorAttributor=void 0;var i=function(){function m(v,y){for(var _=0;_<y.length;_++){var f=y[_];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(v,f.key,f)}}return function(v,y,_){return y&&m(v.prototype,y),_&&m(v,_),v}}(),u=function m(v,y,_){v===null&&(v=Function.prototype);var f=Object.getOwnPropertyDescriptor(v,y);if(f===void 0){var w=Object.getPrototypeOf(v);return w===null?void 0:m(w,y,_)}else{if("value"in f)return f.value;var N=f.get;return N===void 0?void 0:N.call(_)}},d=n(0),h=p(d);function p(m){return m&&m.__esModule?m:{default:m}}function c(m,v){if(!(m instanceof v))throw new TypeError("Cannot call a class as a function")}function l(m,v){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:m}function o(m,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);m.prototype=Object.create(v&&v.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(m,v):m.__proto__=v)}var s=function(m){o(v,m);function v(){return c(this,v),l(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return i(v,[{key:"value",value:function(_){var f=u(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"value",this).call(this,_);return f.startsWith("rgb(")?(f=f.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+f.split(",").map(function(w){return("00"+parseInt(w).toString(16)).slice(-2)}).join("")):f}}]),v}(h.default.Attributor.Style),b=new h.default.Attributor.Class("color","ql-color",{scope:h.default.Scope.INLINE}),g=new s("color","color",{scope:h.default.Scope.INLINE});r.ColorAttributor=s,r.ColorClass=b,r.ColorStyle=g},function(e,r,n){Object.defineProperty(r,"__esModule",{value:!0}),r.sanitize=r.default=void 0;var i=function(){function g(m,v){for(var y=0;y<v.length;y++){var _=v[y];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(m,_.key,_)}}return function(m,v,y){return v&&g(m.prototype,v),y&&g(m,y),m}}(),u=function g(m,v,y){m===null&&(m=Function.prototype);var _=Object.getOwnPropertyDescriptor(m,v);if(_===void 0){var f=Object.getPrototypeOf(m);return f===null?void 0:g(f,v,y)}else{if("value"in _)return _.value;var w=_.get;return w===void 0?void 0:w.call(y)}},d=n(6),h=p(d);function p(g){return g&&g.__esModule?g:{default:g}}function c(g,m){if(!(g instanceof m))throw new TypeError("Cannot call a class as a function")}function l(g,m){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:g}function o(g,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);g.prototype=Object.create(m&&m.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(g,m):g.__proto__=m)}var s=function(g){o(m,g);function m(){return c(this,m),l(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return i(m,[{key:"format",value:function(y,_){if(y!==this.statics.blotName||!_)return u(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"format",this).call(this,y,_);_=this.constructor.sanitize(_),this.domNode.setAttribute("href",_)}}],[{key:"create",value:function(y){var _=u(m.__proto__||Object.getPrototypeOf(m),"create",this).call(this,y);return y=this.sanitize(y),_.setAttribute("href",y),_.setAttribute("rel","noopener noreferrer"),_.setAttribute("target","_blank"),_}},{key:"formats",value:function(y){return y.getAttribute("href")}},{key:"sanitize",value:function(y){return b(y,this.PROTOCOL_WHITELIST)?y:this.SANITIZED_URL}}]),m}(h.default);s.blotName="link",s.tagName="A",s.SANITIZED_URL="about:blank",s.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function b(g,m){var v=document.createElement("a");v.href=g;var y=v.href.slice(0,v.href.indexOf(":"));return m.indexOf(y)>-1}r.default=s,r.sanitize=b},function(e,r,n){Object.defineProperty(r,"__esModule",{value:!0});var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},u=function(){function m(v,y){for(var _=0;_<y.length;_++){var f=y[_];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(v,f.key,f)}}return function(v,y,_){return y&&m(v.prototype,y),_&&m(v,_),v}}(),d=n(23),h=l(d),p=n(107),c=l(p);function l(m){return m&&m.__esModule?m:{default:m}}function o(m,v){if(!(m instanceof v))throw new TypeError("Cannot call a class as a function")}var s=0;function b(m,v){m.setAttribute(v,m.getAttribute(v)!=="true")}var g=function(){function m(v){var y=this;o(this,m),this.select=v,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){y.togglePicker()}),this.label.addEventListener("keydown",function(_){switch(_.keyCode){case h.default.keys.ENTER:y.togglePicker();break;case h.default.keys.ESCAPE:y.escape(),_.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}return u(m,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),b(this.label,"aria-expanded"),b(this.options,"aria-hidden")}},{key:"buildItem",value:function(y){var _=this,f=document.createElement("span");return f.tabIndex="0",f.setAttribute("role","button"),f.classList.add("ql-picker-item"),y.hasAttribute("value")&&f.setAttribute("data-value",y.getAttribute("value")),y.textContent&&f.setAttribute("data-label",y.textContent),f.addEventListener("click",function(){_.selectItem(f,!0)}),f.addEventListener("keydown",function(w){switch(w.keyCode){case h.default.keys.ENTER:_.selectItem(f,!0),w.preventDefault();break;case h.default.keys.ESCAPE:_.escape(),w.preventDefault();break}}),f}},{key:"buildLabel",value:function(){var y=document.createElement("span");return y.classList.add("ql-picker-label"),y.innerHTML=c.default,y.tabIndex="0",y.setAttribute("role","button"),y.setAttribute("aria-expanded","false"),this.container.appendChild(y),y}},{key:"buildOptions",value:function(){var y=this,_=document.createElement("span");_.classList.add("ql-picker-options"),_.setAttribute("aria-hidden","true"),_.tabIndex="-1",_.id="ql-picker-options-"+s,s+=1,this.label.setAttribute("aria-controls",_.id),this.options=_,[].slice.call(this.select.options).forEach(function(f){var w=y.buildItem(f);_.appendChild(w),f.selected===!0&&y.selectItem(w)}),this.container.appendChild(_)}},{key:"buildPicker",value:function(){var y=this;[].slice.call(this.select.attributes).forEach(function(_){y.container.setAttribute(_.name,_.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var y=this;this.close(),setTimeout(function(){return y.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(y){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,f=this.container.querySelector(".ql-selected");if(y!==f&&(f?.classList.remove("ql-selected"),y!=null&&(y.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(y.parentNode.children,y),y.hasAttribute("data-value")?this.label.setAttribute("data-value",y.getAttribute("data-value")):this.label.removeAttribute("data-value"),y.hasAttribute("data-label")?this.label.setAttribute("data-label",y.getAttribute("data-label")):this.label.removeAttribute("data-label"),_))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event>"u"?"undefined":i(Event))==="object"){var w=document.createEvent("Event");w.initEvent("change",!0,!0),this.select.dispatchEvent(w)}this.close()}}},{key:"update",value:function(){var y=void 0;if(this.select.selectedIndex>-1){var _=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];y=this.select.options[this.select.selectedIndex],this.selectItem(_)}else this.selectItem(null);var f=y!=null&&y!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",f)}}]),m}();r.default=g},function(e,r,n){Object.defineProperty(r,"__esModule",{value:!0});var i=n(0),u=j(i),d=n(5),h=j(d),p=n(4),c=j(p),l=n(16),o=j(l),s=n(25),b=j(s),g=n(24),m=j(g),v=n(35),y=j(v),_=n(6),f=j(_),w=n(22),N=j(w),k=n(7),S=j(k),R=n(55),A=j(R),O=n(42),T=j(O),P=n(23),E=j(P);function j(q){return q&&q.__esModule?q:{default:q}}h.default.register({"blots/block":c.default,"blots/block/embed":p.BlockEmbed,"blots/break":o.default,"blots/container":b.default,"blots/cursor":m.default,"blots/embed":y.default,"blots/inline":f.default,"blots/scroll":N.default,"blots/text":S.default,"modules/clipboard":A.default,"modules/history":T.default,"modules/keyboard":E.default}),u.default.register(c.default,o.default,m.default,f.default,N.default,S.default),r.default=h.default},function(e,r,n){Object.defineProperty(r,"__esModule",{value:!0});var i=n(1),u=function(){function d(h){this.domNode=h,this.domNode[i.DATA_KEY]={blot:this}}return Object.defineProperty(d.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),d.create=function(h){if(this.tagName==null)throw new i.ParchmentError("Blot definition missing tagName");var p;return Array.isArray(this.tagName)?(typeof h=="string"&&(h=h.toUpperCase(),parseInt(h).toString()===h&&(h=parseInt(h))),typeof h=="number"?p=document.createElement(this.tagName[h-1]):this.tagName.indexOf(h)>-1?p=document.createElement(h):p=document.createElement(this.tagName[0])):p=document.createElement(this.tagName),this.className&&p.classList.add(this.className),p},d.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},d.prototype.clone=function(){var h=this.domNode.cloneNode(!1);return i.create(h)},d.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[i.DATA_KEY]},d.prototype.deleteAt=function(h,p){var c=this.isolate(h,p);c.remove()},d.prototype.formatAt=function(h,p,c,l){var o=this.isolate(h,p);if(i.query(c,i.Scope.BLOT)!=null&&l)o.wrap(c,l);else if(i.query(c,i.Scope.ATTRIBUTE)!=null){var s=i.create(this.statics.scope);o.wrap(s),s.format(c,l)}},d.prototype.insertAt=function(h,p,c){var l=c==null?i.create("text",p):i.create(p,c),o=this.split(h);this.parent.insertBefore(l,o)},d.prototype.insertInto=function(h,p){p===void 0&&(p=null),this.parent!=null&&this.parent.children.remove(this);var c=null;h.children.insertBefore(this,p),p!=null&&(c=p.domNode),(this.domNode.parentNode!=h.domNode||this.domNode.nextSibling!=c)&&h.domNode.insertBefore(this.domNode,c),this.parent=h,this.attach()},d.prototype.isolate=function(h,p){var c=this.split(h);return c.split(p),c},d.prototype.length=function(){return 1},d.prototype.offset=function(h){return h===void 0&&(h=this.parent),this.parent==null||this==h?0:this.parent.children.offset(this)+this.parent.offset(h)},d.prototype.optimize=function(h){this.domNode[i.DATA_KEY]!=null&&delete this.domNode[i.DATA_KEY].mutations},d.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},d.prototype.replace=function(h){h.parent!=null&&(h.parent.insertBefore(this,h.next),h.remove())},d.prototype.replaceWith=function(h,p){var c=typeof h=="string"?i.create(h,p):h;return c.replace(this),c},d.prototype.split=function(h,p){return h===0?this:this.next},d.prototype.update=function(h,p){},d.prototype.wrap=function(h,p){var c=typeof h=="string"?i.create(h,p):h;return this.parent!=null&&this.parent.insertBefore(c,this.next),c.appendChild(this),c},d.blotName="abstract",d}();r.default=u},function(e,r,n){Object.defineProperty(r,"__esModule",{value:!0});var i=n(12),u=n(32),d=n(33),h=n(1),p=function(){function c(l){this.attributes={},this.domNode=l,this.build()}return c.prototype.attribute=function(l,o){o?l.add(this.domNode,o)&&(l.value(this.domNode)!=null?this.attributes[l.attrName]=l:delete this.attributes[l.attrName]):(l.remove(this.domNode),delete this.attributes[l.attrName])},c.prototype.build=function(){var l=this;this.attributes={};var o=i.default.keys(this.domNode),s=u.default.keys(this.domNode),b=d.default.keys(this.domNode);o.concat(s).concat(b).forEach(function(g){var m=h.query(g,h.Scope.ATTRIBUTE);m instanceof i.default&&(l.attributes[m.attrName]=m)})},c.prototype.copy=function(l){var o=this;Object.keys(this.attributes).forEach(function(s){var b=o.attributes[s].value(o.domNode);l.format(s,b)})},c.prototype.move=function(l){var o=this;this.copy(l),Object.keys(this.attributes).forEach(function(s){o.attributes[s].remove(o.domNode)}),this.attributes={}},c.prototype.values=function(){var l=this;return Object.keys(this.attributes).reduce(function(o,s){return o[s]=l.attributes[s].value(l.domNode),o},{})},c}();r.default=p},function(e,r,n){var i=this&&this.__extends||function(){var p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var o in l)l.hasOwnProperty(o)&&(c[o]=l[o])};return function(c,l){p(c,l);function o(){this.constructor=c}c.prototype=l===null?Object.create(l):(o.prototype=l.prototype,new o)}}();Object.defineProperty(r,"__esModule",{value:!0});var u=n(12);function d(p,c){var l=p.getAttribute("class")||"";return l.split(/\s+/).filter(function(o){return o.indexOf(c+"-")===0})}var h=function(p){i(c,p);function c(){return p!==null&&p.apply(this,arguments)||this}return c.keys=function(l){return(l.getAttribute("class")||"").split(/\s+/).map(function(o){return o.split("-").slice(0,-1).join("-")})},c.prototype.add=function(l,o){return this.canAdd(l,o)?(this.remove(l),l.classList.add(this.keyName+"-"+o),!0):!1},c.prototype.remove=function(l){var o=d(l,this.keyName);o.forEach(function(s){l.classList.remove(s)}),l.classList.length===0&&l.removeAttribute("class")},c.prototype.value=function(l){var o=d(l,this.keyName)[0]||"",s=o.slice(this.keyName.length+1);return this.canAdd(l,s)?s:""},c}(u.default);r.default=h},function(e,r,n){var i=this&&this.__extends||function(){var p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var o in l)l.hasOwnProperty(o)&&(c[o]=l[o])};return function(c,l){p(c,l);function o(){this.constructor=c}c.prototype=l===null?Object.create(l):(o.prototype=l.prototype,new o)}}();Object.defineProperty(r,"__esModule",{value:!0});var u=n(12);function d(p){var c=p.split("-"),l=c.slice(1).map(function(o){return o[0].toUpperCase()+o.slice(1)}).join("");return c[0]+l}var h=function(p){i(c,p);function c(){return p!==null&&p.apply(this,arguments)||this}return c.keys=function(l){return(l.getAttribute("style")||"").split(";").map(function(o){var s=o.split(":");return s[0].trim()})},c.prototype.add=function(l,o){return this.canAdd(l,o)?(l.style[d(this.keyName)]=o,!0):!1},c.prototype.remove=function(l){l.style[d(this.keyName)]="",l.getAttribute("style")||l.removeAttribute("style")},c.prototype.value=function(l){var o=l.style[d(this.keyName)];return this.canAdd(l,o)?o:""},c}(u.default);r.default=h},function(e,r,n){Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function h(p,c){for(var l=0;l<c.length;l++){var o=c[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(p,o.key,o)}}return function(p,c,l){return c&&h(p.prototype,c),l&&h(p,l),p}}();function u(h,p){if(!(h instanceof p))throw new TypeError("Cannot call a class as a function")}var d=function(){function h(p,c){u(this,h),this.quill=p,this.options=c,this.modules={}}return i(h,[{key:"init",value:function(){var c=this;Object.keys(this.options.modules).forEach(function(l){c.modules[l]==null&&c.addModule(l)})}},{key:"addModule",value:function(c){var l=this.quill.constructor.import("modules/"+c);return this.modules[c]=new l(this.quill,this.options.modules[c]||{}),this.modules[c]}}]),h}();d.DEFAULTS={modules:{}},d.themes={default:d},r.default=d},function(e,r,n){Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function v(y,_){for(var f=0;f<_.length;f++){var w=_[f];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(y,w.key,w)}}return function(y,_,f){return _&&v(y.prototype,_),f&&v(y,f),y}}(),u=function v(y,_,f){y===null&&(y=Function.prototype);var w=Object.getOwnPropertyDescriptor(y,_);if(w===void 0){var N=Object.getPrototypeOf(y);return N===null?void 0:v(N,_,f)}else{if("value"in w)return w.value;var k=w.get;return k===void 0?void 0:k.call(f)}},d=n(0),h=l(d),p=n(7),c=l(p);function l(v){return v&&v.__esModule?v:{default:v}}function o(v,y){if(!(v instanceof y))throw new TypeError("Cannot call a class as a function")}function s(v,y){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:v}function b(v,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);v.prototype=Object.create(y&&y.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(v,y):v.__proto__=y)}var g="\uFEFF",m=function(v){b(y,v);function y(_){o(this,y);var f=s(this,(y.__proto__||Object.getPrototypeOf(y)).call(this,_));return f.contentNode=document.createElement("span"),f.contentNode.setAttribute("contenteditable",!1),[].slice.call(f.domNode.childNodes).forEach(function(w){f.contentNode.appendChild(w)}),f.leftGuard=document.createTextNode(g),f.rightGuard=document.createTextNode(g),f.domNode.appendChild(f.leftGuard),f.domNode.appendChild(f.contentNode),f.domNode.appendChild(f.rightGuard),f}return i(y,[{key:"index",value:function(f,w){return f===this.leftGuard?0:f===this.rightGuard?1:u(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"index",this).call(this,f,w)}},{key:"restore",value:function(f){var w=void 0,N=void 0,k=f.data.split(g).join("");if(f===this.leftGuard)if(this.prev instanceof c.default){var S=this.prev.length();this.prev.insertAt(S,k),w={startNode:this.prev.domNode,startOffset:S+k.length}}else N=document.createTextNode(k),this.parent.insertBefore(h.default.create(N),this),w={startNode:N,startOffset:k.length};else f===this.rightGuard&&(this.next instanceof c.default?(this.next.insertAt(0,k),w={startNode:this.next.domNode,startOffset:k.length}):(N=document.createTextNode(k),this.parent.insertBefore(h.default.create(N),this.next),w={startNode:N,startOffset:k.length}));return f.data=g,w}},{key:"update",value:function(f,w){var N=this;f.forEach(function(k){if(k.type==="characterData"&&(k.target===N.leftGuard||k.target===N.rightGuard)){var S=N.restore(k.target);S&&(w.range=S)}})}}]),y}(h.default.Embed);r.default=m},function(e,r,n){Object.defineProperty(r,"__esModule",{value:!0}),r.AlignStyle=r.AlignClass=r.AlignAttribute=void 0;var i=n(0),u=d(i);function d(o){return o&&o.__esModule?o:{default:o}}var h={scope:u.default.Scope.BLOCK,whitelist:["right","center","justify"]},p=new u.default.Attributor.Attribute("align","align",h),c=new u.default.Attributor.Class("align","ql-align",h),l=new u.default.Attributor.Style("align","text-align",h);r.AlignAttribute=p,r.AlignClass=c,r.AlignStyle=l},function(e,r,n){Object.defineProperty(r,"__esModule",{value:!0}),r.BackgroundStyle=r.BackgroundClass=void 0;var i=n(0),u=h(i),d=n(26);function h(l){return l&&l.__esModule?l:{default:l}}var p=new u.default.Attributor.Class("background","ql-bg",{scope:u.default.Scope.INLINE}),c=new d.ColorAttributor("background","background-color",{scope:u.default.Scope.INLINE});r.BackgroundClass=p,r.BackgroundStyle=c},function(e,r,n){Object.defineProperty(r,"__esModule",{value:!0}),r.DirectionStyle=r.DirectionClass=r.DirectionAttribute=void 0;var i=n(0),u=d(i);function d(o){return o&&o.__esModule?o:{default:o}}var h={scope:u.default.Scope.BLOCK,whitelist:["rtl"]},p=new u.default.Attributor.Attribute("direction","dir",h),c=new u.default.Attributor.Class("direction","ql-direction",h),l=new u.default.Attributor.Style("direction","direction",h);r.DirectionAttribute=p,r.DirectionClass=c,r.DirectionStyle=l},function(e,r,n){Object.defineProperty(r,"__esModule",{value:!0}),r.FontClass=r.FontStyle=void 0;var i=function(){function v(y,_){for(var f=0;f<_.length;f++){var w=_[f];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(y,w.key,w)}}return function(y,_,f){return _&&v(y.prototype,_),f&&v(y,f),y}}(),u=function v(y,_,f){y===null&&(y=Function.prototype);var w=Object.getOwnPropertyDescriptor(y,_);if(w===void 0){var N=Object.getPrototypeOf(y);return N===null?void 0:v(N,_,f)}else{if("value"in w)return w.value;var k=w.get;return k===void 0?void 0:k.call(f)}},d=n(0),h=p(d);function p(v){return v&&v.__esModule?v:{default:v}}function c(v,y){if(!(v instanceof y))throw new TypeError("Cannot call a class as a function")}function l(v,y){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:v}function o(v,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);v.prototype=Object.create(y&&y.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(v,y):v.__proto__=y)}var s={scope:h.default.Scope.INLINE,whitelist:["serif","monospace"]},b=new h.default.Attributor.Class("font","ql-font",s),g=function(v){o(y,v);function y(){return c(this,y),l(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return i(y,[{key:"value",value:function(f){return u(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"value",this).call(this,f).replace(/["']/g,"")}}]),y}(h.default.Attributor.Style),m=new g("font","font-family",s);r.FontStyle=m,r.FontClass=b},function(e,r,n){Object.defineProperty(r,"__esModule",{value:!0}),r.SizeStyle=r.SizeClass=void 0;var i=n(0),u=d(i);function d(c){return c&&c.__esModule?c:{default:c}}var h=new u.default.Attributor.Class("size","ql-size",{scope:u.default.Scope.INLINE,whitelist:["small","large","huge"]}),p=new u.default.Attributor.Style("size","font-size",{scope:u.default.Scope.INLINE,whitelist:["10px","18px","32px"]});r.SizeClass=h,r.SizeStyle=p},function(e,r,n){e.exports={align:{"":n(76),center:n(77),right:n(78),justify:n(79)},background:n(80),blockquote:n(81),bold:n(82),clean:n(83),code:n(58),"code-block":n(58),color:n(84),direction:{"":n(85),rtl:n(86)},float:{center:n(87),full:n(88),left:n(89),right:n(90)},formula:n(91),header:{1:n(92),2:n(93)},italic:n(94),image:n(95),indent:{"+1":n(96),"-1":n(97)},link:n(98),list:{ordered:n(99),bullet:n(100),check:n(101)},script:{sub:n(102),super:n(103)},strike:n(104),underline:n(105),video:n(106)}},function(e,r,n){Object.defineProperty(r,"__esModule",{value:!0}),r.getLastChangeIndex=r.default=void 0;var i=function(){function _(f,w){for(var N=0;N<w.length;N++){var k=w[N];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(f,k.key,k)}}return function(f,w,N){return w&&_(f.prototype,w),N&&_(f,N),f}}(),u=n(0),d=o(u),h=n(5),p=o(h),c=n(9),l=o(c);function o(_){return _&&_.__esModule?_:{default:_}}function s(_,f){if(!(_ instanceof f))throw new TypeError("Cannot call a class as a function")}function b(_,f){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:_}function g(_,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);_.prototype=Object.create(f&&f.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(_,f):_.__proto__=f)}var m=function(_){g(f,_);function f(w,N){s(this,f);var k=b(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,w,N));return k.lastRecorded=0,k.ignoreChange=!1,k.clear(),k.quill.on(p.default.events.EDITOR_CHANGE,function(S,R,A,O){S!==p.default.events.TEXT_CHANGE||k.ignoreChange||(!k.options.userOnly||O===p.default.sources.USER?k.record(R,A):k.transform(R))}),k.quill.keyboard.addBinding({key:"Z",shortKey:!0},k.undo.bind(k)),k.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},k.redo.bind(k)),/Win/i.test(navigator.platform)&&k.quill.keyboard.addBinding({key:"Y",shortKey:!0},k.redo.bind(k)),k}return i(f,[{key:"change",value:function(N,k){if(this.stack[N].length!==0){var S=this.stack[N].pop();this.stack[k].push(S),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(S[N],p.default.sources.USER),this.ignoreChange=!1;var R=y(S[N]);this.quill.setSelection(R)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(N,k){if(N.ops.length!==0){this.stack.redo=[];var S=this.quill.getContents().diff(k),R=Date.now();if(this.lastRecorded+this.options.delay>R&&this.stack.undo.length>0){var A=this.stack.undo.pop();S=S.compose(A.undo),N=A.redo.compose(N)}else this.lastRecorded=R;this.stack.undo.push({redo:N,undo:S}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(N){this.stack.undo.forEach(function(k){k.undo=N.transform(k.undo,!0),k.redo=N.transform(k.redo,!0)}),this.stack.redo.forEach(function(k){k.undo=N.transform(k.undo,!0),k.redo=N.transform(k.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),f}(l.default);m.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function v(_){var f=_.ops[_.ops.length-1];return f==null?!1:f.insert!=null?typeof f.insert=="string"&&f.insert.endsWith(`
`):f.attributes!=null?Object.keys(f.attributes).some(function(w){return d.default.query(w,d.default.Scope.BLOCK)!=null}):!1}function y(_){var f=_.reduce(function(N,k){return N+=k.delete||0,N},0),w=_.length()-f;return v(_)&&(w-=1),w}r.default=m,r.getLastChangeIndex=y},function(e,r,n){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BaseTooltip=void 0;var i=function(){function I($,F){for(var U=0;U<F.length;U++){var L=F[U];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty($,L.key,L)}}return function($,F,U){return F&&I($.prototype,F),U&&I($,U),$}}(),u=function I($,F,U){$===null&&($=Function.prototype);var L=Object.getOwnPropertyDescriptor($,F);if(L===void 0){var M=Object.getPrototypeOf($);return M===null?void 0:I(M,F,U)}else{if("value"in L)return L.value;var H=L.get;return H===void 0?void 0:H.call(U)}},d=n(3),h=R(d),p=n(2),c=R(p),l=n(8),o=R(l),s=n(23),b=R(s),g=n(34),m=R(g),v=n(59),y=R(v),_=n(60),f=R(_),w=n(28),N=R(w),k=n(61),S=R(k);function R(I){return I&&I.__esModule?I:{default:I}}function A(I,$){if(!(I instanceof $))throw new TypeError("Cannot call a class as a function")}function O(I,$){if(!I)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $&&(typeof $=="object"||typeof $=="function")?$:I}function T(I,$){if(typeof $!="function"&&$!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof $);I.prototype=Object.create($&&$.prototype,{constructor:{value:I,enumerable:!1,writable:!0,configurable:!0}}),$&&(Object.setPrototypeOf?Object.setPrototypeOf(I,$):I.__proto__=$)}var P=[!1,"center","right","justify"],E=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],j=[!1,"serif","monospace"],q=["1","2","3",!1],B=["small",!1,"large","huge"],G=function(I){T($,I);function $(F,U){A(this,$);var L=O(this,($.__proto__||Object.getPrototypeOf($)).call(this,F,U)),M=function H(z){if(!document.body.contains(F.root))return document.body.removeEventListener("click",H);L.tooltip!=null&&!L.tooltip.root.contains(z.target)&&document.activeElement!==L.tooltip.textbox&&!L.quill.hasFocus()&&L.tooltip.hide(),L.pickers!=null&&L.pickers.forEach(function(W){W.container.contains(z.target)||W.close()})};return F.emitter.listenDOM("click",document.body,M),L}return i($,[{key:"addModule",value:function(U){var L=u($.prototype.__proto__||Object.getPrototypeOf($.prototype),"addModule",this).call(this,U);return U==="toolbar"&&this.extendToolbar(L),L}},{key:"buildButtons",value:function(U,L){U.forEach(function(M){var H=M.getAttribute("class")||"";H.split(/\s+/).forEach(function(z){if(z.startsWith("ql-")&&(z=z.slice(3),L[z]!=null))if(z==="direction")M.innerHTML=L[z][""]+L[z].rtl;else if(typeof L[z]=="string")M.innerHTML=L[z];else{var W=M.value||"";W!=null&&L[z][W]&&(M.innerHTML=L[z][W])}})})}},{key:"buildPickers",value:function(U,L){var M=this;this.pickers=U.map(function(z){if(z.classList.contains("ql-align"))return z.querySelector("option")==null&&x(z,P),new f.default(z,L.align);if(z.classList.contains("ql-background")||z.classList.contains("ql-color")){var W=z.classList.contains("ql-background")?"background":"color";return z.querySelector("option")==null&&x(z,E,W==="background"?"#ffffff":"#000000"),new y.default(z,L[W])}else return z.querySelector("option")==null&&(z.classList.contains("ql-font")?x(z,j):z.classList.contains("ql-header")?x(z,q):z.classList.contains("ql-size")&&x(z,B)),new N.default(z)});var H=function(){M.pickers.forEach(function(W){W.update()})};this.quill.on(o.default.events.EDITOR_CHANGE,H)}}]),$}(m.default);G.DEFAULTS=(0,h.default)(!0,{},m.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var $=this,F=this.container.querySelector("input.ql-image[type=file]");F==null&&(F=document.createElement("input"),F.setAttribute("type","file"),F.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),F.classList.add("ql-image"),F.addEventListener("change",function(){if(F.files!=null&&F.files[0]!=null){var U=new FileReader;U.onload=function(L){var M=$.quill.getSelection(!0);$.quill.updateContents(new c.default().retain(M.index).delete(M.length).insert({image:L.target.result}),o.default.sources.USER),$.quill.setSelection(M.index+1,o.default.sources.SILENT),F.value=""},U.readAsDataURL(F.files[0])}}),this.container.appendChild(F)),F.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var D=function(I){T($,I);function $(F,U){A(this,$);var L=O(this,($.__proto__||Object.getPrototypeOf($)).call(this,F,U));return L.textbox=L.root.querySelector('input[type="text"]'),L.listen(),L}return i($,[{key:"listen",value:function(){var U=this;this.textbox.addEventListener("keydown",function(L){b.default.match(L,"enter")?(U.save(),L.preventDefault()):b.default.match(L,"escape")&&(U.cancel(),L.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),L!=null?this.textbox.value=L:U!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+U)||""),this.root.setAttribute("data-mode",U)}},{key:"restoreFocus",value:function(){var U=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=U}},{key:"save",value:function(){var U=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var L=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",U,o.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",U,o.default.sources.USER)),this.quill.root.scrollTop=L;break}case"video":U=C(U);case"formula":{if(!U)break;var M=this.quill.getSelection(!0);if(M!=null){var H=M.index+M.length;this.quill.insertEmbed(H,this.root.getAttribute("data-mode"),U,o.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(H+1," ",o.default.sources.USER),this.quill.setSelection(H+2,o.default.sources.USER)}break}}this.textbox.value="",this.hide()}}]),$}(S.default);function C(I){var $=I.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||I.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return $?($[1]||"https")+"://www.youtube.com/embed/"+$[2]+"?showinfo=0":($=I.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?($[1]||"https")+"://player.vimeo.com/video/"+$[2]+"/":I}function x(I,$){var F=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;$.forEach(function(U){var L=document.createElement("option");U===F?L.setAttribute("selected","selected"):L.setAttribute("value",U),I.appendChild(L)})}r.BaseTooltip=D,r.default=G},function(e,r,n){Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function u(){this.head=this.tail=null,this.length=0}return u.prototype.append=function(){for(var d=[],h=0;h<arguments.length;h++)d[h]=arguments[h];this.insertBefore(d[0],null),d.length>1&&this.append.apply(this,d.slice(1))},u.prototype.contains=function(d){for(var h,p=this.iterator();h=p();)if(h===d)return!0;return!1},u.prototype.insertBefore=function(d,h){d&&(d.next=h,h!=null?(d.prev=h.prev,h.prev!=null&&(h.prev.next=d),h.prev=d,h===this.head&&(this.head=d)):this.tail!=null?(this.tail.next=d,d.prev=this.tail,this.tail=d):(d.prev=null,this.head=this.tail=d),this.length+=1)},u.prototype.offset=function(d){for(var h=0,p=this.head;p!=null;){if(p===d)return h;h+=p.length(),p=p.next}return-1},u.prototype.remove=function(d){this.contains(d)&&(d.prev!=null&&(d.prev.next=d.next),d.next!=null&&(d.next.prev=d.prev),d===this.head&&(this.head=d.next),d===this.tail&&(this.tail=d.prev),this.length-=1)},u.prototype.iterator=function(d){return d===void 0&&(d=this.head),function(){var h=d;return d!=null&&(d=d.next),h}},u.prototype.find=function(d,h){h===void 0&&(h=!1);for(var p,c=this.iterator();p=c();){var l=p.length();if(d<l||h&&d===l&&(p.next==null||p.next.length()!==0))return[p,d];d-=l}return[null,0]},u.prototype.forEach=function(d){for(var h,p=this.iterator();h=p();)d(h)},u.prototype.forEachAt=function(d,h,p){if(!(h<=0))for(var c=this.find(d),l=c[0],o=c[1],s,b=d-o,g=this.iterator(l);(s=g())&&b<d+h;){var m=s.length();d>b?p(s,d-b,Math.min(h,b+m-d)):p(s,0,Math.min(m,d+h-b)),b+=m}},u.prototype.map=function(d){return this.reduce(function(h,p){return h.push(d(p)),h},[])},u.prototype.reduce=function(d,h){for(var p,c=this.iterator();p=c();)h=d(h,p);return h},u}();r.default=i},function(e,r,n){var i=this&&this.__extends||function(){var l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,s){o.__proto__=s}||function(o,s){for(var b in s)s.hasOwnProperty(b)&&(o[b]=s[b])};return function(o,s){l(o,s);function b(){this.constructor=o}o.prototype=s===null?Object.create(s):(b.prototype=s.prototype,new b)}}();Object.defineProperty(r,"__esModule",{value:!0});var u=n(17),d=n(1),h={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},p=100,c=function(l){i(o,l);function o(s){var b=l.call(this,s)||this;return b.scroll=b,b.observer=new MutationObserver(function(g){b.update(g)}),b.observer.observe(b.domNode,h),b.attach(),b}return o.prototype.detach=function(){l.prototype.detach.call(this),this.observer.disconnect()},o.prototype.deleteAt=function(s,b){this.update(),s===0&&b===this.length()?this.children.forEach(function(g){g.remove()}):l.prototype.deleteAt.call(this,s,b)},o.prototype.formatAt=function(s,b,g,m){this.update(),l.prototype.formatAt.call(this,s,b,g,m)},o.prototype.insertAt=function(s,b,g){this.update(),l.prototype.insertAt.call(this,s,b,g)},o.prototype.optimize=function(s,b){var g=this;s===void 0&&(s=[]),b===void 0&&(b={}),l.prototype.optimize.call(this,b);for(var m=[].slice.call(this.observer.takeRecords());m.length>0;)s.push(m.pop());for(var v=function(w,N){N===void 0&&(N=!0),!(w==null||w===g)&&w.domNode.parentNode!=null&&(w.domNode[d.DATA_KEY].mutations==null&&(w.domNode[d.DATA_KEY].mutations=[]),N&&v(w.parent))},y=function(w){w.domNode[d.DATA_KEY]==null||w.domNode[d.DATA_KEY].mutations==null||(w instanceof u.default&&w.children.forEach(y),w.optimize(b))},_=s,f=0;_.length>0;f+=1){if(f>=p)throw new Error("[Parchment] Maximum optimize iterations reached");for(_.forEach(function(w){var N=d.find(w.target,!0);N!=null&&(N.domNode===w.target&&(w.type==="childList"?(v(d.find(w.previousSibling,!1)),[].forEach.call(w.addedNodes,function(k){var S=d.find(k,!1);v(S,!1),S instanceof u.default&&S.children.forEach(function(R){v(R,!1)})})):w.type==="attributes"&&v(N.prev)),v(N))}),this.children.forEach(y),_=[].slice.call(this.observer.takeRecords()),m=_.slice();m.length>0;)s.push(m.pop())}},o.prototype.update=function(s,b){var g=this;b===void 0&&(b={}),s=s||this.observer.takeRecords(),s.map(function(m){var v=d.find(m.target,!0);return v==null?null:v.domNode[d.DATA_KEY].mutations==null?(v.domNode[d.DATA_KEY].mutations=[m],v):(v.domNode[d.DATA_KEY].mutations.push(m),null)}).forEach(function(m){m==null||m===g||m.domNode[d.DATA_KEY]==null||m.update(m.domNode[d.DATA_KEY].mutations||[],b)}),this.domNode[d.DATA_KEY].mutations!=null&&l.prototype.update.call(this,this.domNode[d.DATA_KEY].mutations,b),this.optimize(s,b)},o.blotName="scroll",o.defaultChild="block",o.scope=d.Scope.BLOCK_BLOT,o.tagName="DIV",o}(u.default);r.default=c},function(e,r,n){var i=this&&this.__extends||function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,o){l.__proto__=o}||function(l,o){for(var s in o)o.hasOwnProperty(s)&&(l[s]=o[s])};return function(l,o){c(l,o);function s(){this.constructor=l}l.prototype=o===null?Object.create(o):(s.prototype=o.prototype,new s)}}();Object.defineProperty(r,"__esModule",{value:!0});var u=n(18),d=n(1);function h(c,l){if(Object.keys(c).length!==Object.keys(l).length)return!1;for(var o in c)if(c[o]!==l[o])return!1;return!0}var p=function(c){i(l,c);function l(){return c!==null&&c.apply(this,arguments)||this}return l.formats=function(o){if(o.tagName!==l.tagName)return c.formats.call(this,o)},l.prototype.format=function(o,s){var b=this;o===this.statics.blotName&&!s?(this.children.forEach(function(g){g instanceof u.default||(g=g.wrap(l.blotName,!0)),b.attributes.copy(g)}),this.unwrap()):c.prototype.format.call(this,o,s)},l.prototype.formatAt=function(o,s,b,g){if(this.formats()[b]!=null||d.query(b,d.Scope.ATTRIBUTE)){var m=this.isolate(o,s);m.format(b,g)}else c.prototype.formatAt.call(this,o,s,b,g)},l.prototype.optimize=function(o){c.prototype.optimize.call(this,o);var s=this.formats();if(Object.keys(s).length===0)return this.unwrap();var b=this.next;b instanceof l&&b.prev===this&&h(s,b.formats())&&(b.moveChildren(this),b.remove())},l.blotName="inline",l.scope=d.Scope.INLINE_BLOT,l.tagName="SPAN",l}(u.default);r.default=p},function(e,r,n){var i=this&&this.__extends||function(){var p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var o in l)l.hasOwnProperty(o)&&(c[o]=l[o])};return function(c,l){p(c,l);function o(){this.constructor=c}c.prototype=l===null?Object.create(l):(o.prototype=l.prototype,new o)}}();Object.defineProperty(r,"__esModule",{value:!0});var u=n(18),d=n(1),h=function(p){i(c,p);function c(){return p!==null&&p.apply(this,arguments)||this}return c.formats=function(l){var o=d.query(c.blotName).tagName;if(l.tagName!==o)return p.formats.call(this,l)},c.prototype.format=function(l,o){d.query(l,d.Scope.BLOCK)!=null&&(l===this.statics.blotName&&!o?this.replaceWith(c.blotName):p.prototype.format.call(this,l,o))},c.prototype.formatAt=function(l,o,s,b){d.query(s,d.Scope.BLOCK)!=null?this.format(s,b):p.prototype.formatAt.call(this,l,o,s,b)},c.prototype.insertAt=function(l,o,s){if(s==null||d.query(o,d.Scope.INLINE)!=null)p.prototype.insertAt.call(this,l,o,s);else{var b=this.split(l),g=d.create(o,s);b.parent.insertBefore(g,b)}},c.prototype.update=function(l,o){navigator.userAgent.match(/Trident/)?this.build():p.prototype.update.call(this,l,o)},c.blotName="block",c.scope=d.Scope.BLOCK_BLOT,c.tagName="P",c}(u.default);r.default=h},function(e,r,n){var i=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,c){p.__proto__=c}||function(p,c){for(var l in c)c.hasOwnProperty(l)&&(p[l]=c[l])};return function(p,c){h(p,c);function l(){this.constructor=p}p.prototype=c===null?Object.create(c):(l.prototype=c.prototype,new l)}}();Object.defineProperty(r,"__esModule",{value:!0});var u=n(19),d=function(h){i(p,h);function p(){return h!==null&&h.apply(this,arguments)||this}return p.formats=function(c){},p.prototype.format=function(c,l){h.prototype.formatAt.call(this,0,this.length(),c,l)},p.prototype.formatAt=function(c,l,o,s){c===0&&l===this.length()?this.format(o,s):h.prototype.formatAt.call(this,c,l,o,s)},p.prototype.formats=function(){return this.statics.formats(this.domNode)},p}(u.default);r.default=d},function(e,r,n){var i=this&&this.__extends||function(){var p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var o in l)l.hasOwnProperty(o)&&(c[o]=l[o])};return function(c,l){p(c,l);function o(){this.constructor=c}c.prototype=l===null?Object.create(l):(o.prototype=l.prototype,new o)}}();Object.defineProperty(r,"__esModule",{value:!0});var u=n(19),d=n(1),h=function(p){i(c,p);function c(l){var o=p.call(this,l)||this;return o.text=o.statics.value(o.domNode),o}return c.create=function(l){return document.createTextNode(l)},c.value=function(l){var o=l.data;return o.normalize&&(o=o.normalize()),o},c.prototype.deleteAt=function(l,o){this.domNode.data=this.text=this.text.slice(0,l)+this.text.slice(l+o)},c.prototype.index=function(l,o){return this.domNode===l?o:-1},c.prototype.insertAt=function(l,o,s){s==null?(this.text=this.text.slice(0,l)+o+this.text.slice(l),this.domNode.data=this.text):p.prototype.insertAt.call(this,l,o,s)},c.prototype.length=function(){return this.text.length},c.prototype.optimize=function(l){p.prototype.optimize.call(this,l),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof c&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},c.prototype.position=function(l,o){return[this.domNode,l]},c.prototype.split=function(l,o){if(o===void 0&&(o=!1),!o){if(l===0)return this;if(l===this.length())return this.next}var s=d.create(this.domNode.splitText(l));return this.parent.insertBefore(s,this.next),this.text=this.statics.value(this.domNode),s},c.prototype.update=function(l,o){var s=this;l.some(function(b){return b.type==="characterData"&&b.target===s.domNode})&&(this.text=this.statics.value(this.domNode))},c.prototype.value=function(){return this.text},c.blotName="text",c.scope=d.Scope.INLINE_BLOT,c}(u.default);r.default=h},function(e,r,n){var i=document.createElement("div");if(i.classList.toggle("test-class",!1),i.classList.contains("test-class")){var u=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(d,h){return arguments.length>1&&!this.contains(d)==!h?h:u.call(this,d)}}String.prototype.startsWith||(String.prototype.startsWith=function(d,h){return h=h||0,this.substr(h,d.length)===d}),String.prototype.endsWith||(String.prototype.endsWith=function(d,h){var p=this.toString();(typeof h!="number"||!isFinite(h)||Math.floor(h)!==h||h>p.length)&&(h=p.length),h-=d.length;var c=p.indexOf(d,h);return c!==-1&&c===h}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(h){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof h!="function")throw new TypeError("predicate must be a function");for(var p=Object(this),c=p.length>>>0,l=arguments[1],o,s=0;s<c;s++)if(o=p[s],h.call(l,o,s,p))return o}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(e,r){var n=-1,i=1,u=0;function d(f,w,N){if(f==w)return f?[[u,f]]:[];(N<0||f.length<N)&&(N=null);var k=l(f,w),S=f.substring(0,k);f=f.substring(k),w=w.substring(k),k=o(f,w);var R=f.substring(f.length-k);f=f.substring(0,f.length-k),w=w.substring(0,w.length-k);var A=h(f,w);return S&&A.unshift([u,S]),R&&A.push([u,R]),b(A),N!=null&&(A=v(A,N)),A=y(A),A}function h(f,w){var N;if(!f)return[[i,w]];if(!w)return[[n,f]];var k=f.length>w.length?f:w,S=f.length>w.length?w:f,R=k.indexOf(S);if(R!=-1)return N=[[i,k.substring(0,R)],[u,S],[i,k.substring(R+S.length)]],f.length>w.length&&(N[0][0]=N[2][0]=n),N;if(S.length==1)return[[n,f],[i,w]];var A=s(f,w);if(A){var O=A[0],T=A[1],P=A[2],E=A[3],j=A[4],q=d(O,P),B=d(T,E);return q.concat([[u,j]],B)}return p(f,w)}function p(f,w){for(var N=f.length,k=w.length,S=Math.ceil((N+k)/2),R=S,A=2*S,O=new Array(A),T=new Array(A),P=0;P<A;P++)O[P]=-1,T[P]=-1;O[R+1]=0,T[R+1]=0;for(var E=N-k,j=E%2!=0,q=0,B=0,G=0,D=0,C=0;C<S;C++){for(var x=-C+q;x<=C-B;x+=2){var I=R+x,$;x==-C||x!=C&&O[I-1]<O[I+1]?$=O[I+1]:$=O[I-1]+1;for(var F=$-x;$<N&&F<k&&f.charAt($)==w.charAt(F);)$++,F++;if(O[I]=$,$>N)B+=2;else if(F>k)q+=2;else if(j){var U=R+E-x;if(U>=0&&U<A&&T[U]!=-1){var L=N-T[U];if($>=L)return c(f,w,$,F)}}}for(var M=-C+G;M<=C-D;M+=2){var U=R+M,L;M==-C||M!=C&&T[U-1]<T[U+1]?L=T[U+1]:L=T[U-1]+1;for(var H=L-M;L<N&&H<k&&f.charAt(N-L-1)==w.charAt(k-H-1);)L++,H++;if(T[U]=L,L>N)D+=2;else if(H>k)G+=2;else if(!j){var I=R+E-M;if(I>=0&&I<A&&O[I]!=-1){var $=O[I],F=R+$-I;if(L=N-L,$>=L)return c(f,w,$,F)}}}}return[[n,f],[i,w]]}function c(f,w,N,k){var S=f.substring(0,N),R=w.substring(0,k),A=f.substring(N),O=w.substring(k),T=d(S,R),P=d(A,O);return T.concat(P)}function l(f,w){if(!f||!w||f.charAt(0)!=w.charAt(0))return 0;for(var N=0,k=Math.min(f.length,w.length),S=k,R=0;N<S;)f.substring(R,S)==w.substring(R,S)?(N=S,R=N):k=S,S=Math.floor((k-N)/2+N);return S}function o(f,w){if(!f||!w||f.charAt(f.length-1)!=w.charAt(w.length-1))return 0;for(var N=0,k=Math.min(f.length,w.length),S=k,R=0;N<S;)f.substring(f.length-S,f.length-R)==w.substring(w.length-S,w.length-R)?(N=S,R=N):k=S,S=Math.floor((k-N)/2+N);return S}function s(f,w){var N=f.length>w.length?f:w,k=f.length>w.length?w:f;if(N.length<4||k.length*2<N.length)return null;function S(B,G,D){for(var C=B.substring(D,D+Math.floor(B.length/4)),x=-1,I="",$,F,U,L;(x=G.indexOf(C,x+1))!=-1;){var M=l(B.substring(D),G.substring(x)),H=o(B.substring(0,D),G.substring(0,x));I.length<H+M&&(I=G.substring(x-H,x)+G.substring(x,x+M),$=B.substring(0,D-H),F=B.substring(D+M),U=G.substring(0,x-H),L=G.substring(x+M))}return I.length*2>=B.length?[$,F,U,L,I]:null}var R=S(N,k,Math.ceil(N.length/4)),A=S(N,k,Math.ceil(N.length/2)),O;if(!R&&!A)return null;A?R?O=R[4].length>A[4].length?R:A:O=A:O=R;var T,P,E,j;f.length>w.length?(T=O[0],P=O[1],E=O[2],j=O[3]):(E=O[0],j=O[1],T=O[2],P=O[3]);var q=O[4];return[T,P,E,j,q]}function b(f){f.push([u,""]);for(var w=0,N=0,k=0,S="",R="",A;w<f.length;)switch(f[w][0]){case i:k++,R+=f[w][1],w++;break;case n:N++,S+=f[w][1],w++;break;case u:N+k>1?(N!==0&&k!==0&&(A=l(R,S),A!==0&&(w-N-k>0&&f[w-N-k-1][0]==u?f[w-N-k-1][1]+=R.substring(0,A):(f.splice(0,0,[u,R.substring(0,A)]),w++),R=R.substring(A),S=S.substring(A)),A=o(R,S),A!==0&&(f[w][1]=R.substring(R.length-A)+f[w][1],R=R.substring(0,R.length-A),S=S.substring(0,S.length-A))),N===0?f.splice(w-k,N+k,[i,R]):k===0?f.splice(w-N,N+k,[n,S]):f.splice(w-N-k,N+k,[n,S],[i,R]),w=w-N-k+(N?1:0)+(k?1:0)+1):w!==0&&f[w-1][0]==u?(f[w-1][1]+=f[w][1],f.splice(w,1)):w++,k=0,N=0,S="",R="";break}f[f.length-1][1]===""&&f.pop();var O=!1;for(w=1;w<f.length-1;)f[w-1][0]==u&&f[w+1][0]==u&&(f[w][1].substring(f[w][1].length-f[w-1][1].length)==f[w-1][1]?(f[w][1]=f[w-1][1]+f[w][1].substring(0,f[w][1].length-f[w-1][1].length),f[w+1][1]=f[w-1][1]+f[w+1][1],f.splice(w-1,1),O=!0):f[w][1].substring(0,f[w+1][1].length)==f[w+1][1]&&(f[w-1][1]+=f[w+1][1],f[w][1]=f[w][1].substring(f[w+1][1].length)+f[w+1][1],f.splice(w+1,1),O=!0)),w++;O&&b(f)}var g=d;g.INSERT=i,g.DELETE=n,g.EQUAL=u,e.exports=g;function m(f,w){if(w===0)return[u,f];for(var N=0,k=0;k<f.length;k++){var S=f[k];if(S[0]===n||S[0]===u){var R=N+S[1].length;if(w===R)return[k+1,f];if(w<R){f=f.slice();var A=w-N,O=[S[0],S[1].slice(0,A)],T=[S[0],S[1].slice(A)];return f.splice(k,1,O,T),[k+1,f]}else N=R}}throw new Error("cursor_pos is out of bounds!")}function v(f,w){var N=m(f,w),k=N[1],S=N[0],R=k[S],A=k[S+1];if(R==null)return f;if(R[0]!==u)return f;if(A!=null&&R[1]+A[1]===A[1]+R[1])return k.splice(S,2,A,R),_(k,S,2);if(A!=null&&A[1].indexOf(R[1])===0){k.splice(S,2,[A[0],R[1]],[0,R[1]]);var O=A[1].slice(R[1].length);return O.length>0&&k.splice(S+2,0,[A[0],O]),_(k,S,3)}else return f}function y(f){for(var w=!1,N=function(A){return A.charCodeAt(0)>=56320&&A.charCodeAt(0)<=57343},k=function(A){return A.charCodeAt(A.length-1)>=55296&&A.charCodeAt(A.length-1)<=56319},S=2;S<f.length;S+=1)f[S-2][0]===u&&k(f[S-2][1])&&f[S-1][0]===n&&N(f[S-1][1])&&f[S][0]===i&&N(f[S][1])&&(w=!0,f[S-1][1]=f[S-2][1].slice(-1)+f[S-1][1],f[S][1]=f[S-2][1].slice(-1)+f[S][1],f[S-2][1]=f[S-2][1].slice(0,-1));if(!w)return f;for(var R=[],S=0;S<f.length;S+=1)f[S][1].length>0&&R.push(f[S]);return R}function _(f,w,N){for(var k=w+N-1;k>=0&&k>=w-1;k--)if(k+1<f.length){var S=f[k],R=f[k+1];S[0]===R[1]&&f.splice(k,2,[S[0],S[1]+R[1]])}return f}},function(e,r){r=e.exports=typeof Object.keys=="function"?Object.keys:n,r.shim=n;function n(i){var u=[];for(var d in i)u.push(d);return u}},function(e,r){var n=function(){return Object.prototype.toString.call(arguments)}()=="[object Arguments]";r=e.exports=n?i:u,r.supported=i;function i(d){return Object.prototype.toString.call(d)=="[object Arguments]"}r.unsupported=u;function u(d){return d&&typeof d=="object"&&typeof d.length=="number"&&Object.prototype.hasOwnProperty.call(d,"callee")&&!Object.prototype.propertyIsEnumerable.call(d,"callee")||!1}},function(e,r){var n=Object.prototype.hasOwnProperty,i="~";function u(){}Object.create&&(u.prototype=Object.create(null),new u().__proto__||(i=!1));function d(p,c,l){this.fn=p,this.context=c,this.once=l||!1}function h(){this._events=new u,this._eventsCount=0}h.prototype.eventNames=function(){var c=[],l,o;if(this._eventsCount===0)return c;for(o in l=this._events)n.call(l,o)&&c.push(i?o.slice(1):o);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(l)):c},h.prototype.listeners=function(c,l){var o=i?i+c:c,s=this._events[o];if(l)return!!s;if(!s)return[];if(s.fn)return[s.fn];for(var b=0,g=s.length,m=new Array(g);b<g;b++)m[b]=s[b].fn;return m},h.prototype.emit=function(c,l,o,s,b,g){var m=i?i+c:c;if(!this._events[m])return!1;var v=this._events[m],y=arguments.length,_,f;if(v.fn){switch(v.once&&this.removeListener(c,v.fn,void 0,!0),y){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,l),!0;case 3:return v.fn.call(v.context,l,o),!0;case 4:return v.fn.call(v.context,l,o,s),!0;case 5:return v.fn.call(v.context,l,o,s,b),!0;case 6:return v.fn.call(v.context,l,o,s,b,g),!0}for(f=1,_=new Array(y-1);f<y;f++)_[f-1]=arguments[f];v.fn.apply(v.context,_)}else{var w=v.length,N;for(f=0;f<w;f++)switch(v[f].once&&this.removeListener(c,v[f].fn,void 0,!0),y){case 1:v[f].fn.call(v[f].context);break;case 2:v[f].fn.call(v[f].context,l);break;case 3:v[f].fn.call(v[f].context,l,o);break;case 4:v[f].fn.call(v[f].context,l,o,s);break;default:if(!_)for(N=1,_=new Array(y-1);N<y;N++)_[N-1]=arguments[N];v[f].fn.apply(v[f].context,_)}}return!0},h.prototype.on=function(c,l,o){var s=new d(l,o||this),b=i?i+c:c;return this._events[b]?this._events[b].fn?this._events[b]=[this._events[b],s]:this._events[b].push(s):(this._events[b]=s,this._eventsCount++),this},h.prototype.once=function(c,l,o){var s=new d(l,o||this,!0),b=i?i+c:c;return this._events[b]?this._events[b].fn?this._events[b]=[this._events[b],s]:this._events[b].push(s):(this._events[b]=s,this._eventsCount++),this},h.prototype.removeListener=function(c,l,o,s){var b=i?i+c:c;if(!this._events[b])return this;if(!l)return--this._eventsCount===0?this._events=new u:delete this._events[b],this;var g=this._events[b];if(g.fn)g.fn===l&&(!s||g.once)&&(!o||g.context===o)&&(--this._eventsCount===0?this._events=new u:delete this._events[b]);else{for(var m=0,v=[],y=g.length;m<y;m++)(g[m].fn!==l||s&&!g[m].once||o&&g[m].context!==o)&&v.push(g[m]);v.length?this._events[b]=v.length===1?v[0]:v:--this._eventsCount===0?this._events=new u:delete this._events[b]}return this},h.prototype.removeAllListeners=function(c){var l;return c?(l=i?i+c:c,this._events[l]&&(--this._eventsCount===0?this._events=new u:delete this._events[l])):(this._events=new u,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prototype.setMaxListeners=function(){return this},h.prefixed=i,h.EventEmitter=h,typeof e<"u"&&(e.exports=h)},function(e,r,n){Object.defineProperty(r,"__esModule",{value:!0}),r.matchText=r.matchSpacing=r.matchNewline=r.matchBlot=r.matchAttributor=r.default=void 0;var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(K){return typeof K}:function(K){return K&&typeof Symbol=="function"&&K.constructor===Symbol&&K!==Symbol.prototype?"symbol":typeof K},u=function(){function K(V,Z){var Y=[],J=!0,te=!1,re=void 0;try{for(var ne=V[Symbol.iterator](),me;!(J=(me=ne.next()).done)&&(Y.push(me.value),!(Z&&Y.length===Z));J=!0);}catch(Ee){te=!0,re=Ee}finally{try{!J&&ne.return&&ne.return()}finally{if(te)throw re}}return Y}return function(V,Z){if(Array.isArray(V))return V;if(Symbol.iterator in Object(V))return K(V,Z);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),d=function(){function K(V,Z){for(var Y=0;Y<Z.length;Y++){var J=Z[Y];J.enumerable=J.enumerable||!1,J.configurable=!0,"value"in J&&(J.writable=!0),Object.defineProperty(V,J.key,J)}}return function(V,Z,Y){return Z&&K(V.prototype,Z),Y&&K(V,Y),V}}(),h=n(3),p=T(h),c=n(2),l=T(c),o=n(0),s=T(o),b=n(5),g=T(b),m=n(10),v=T(m),y=n(9),_=T(y),f=n(36),w=n(37),N=n(13),k=T(N),S=n(26),R=n(38),A=n(39),O=n(40);function T(K){return K&&K.__esModule?K:{default:K}}function P(K,V,Z){return V in K?Object.defineProperty(K,V,{value:Z,enumerable:!0,configurable:!0,writable:!0}):K[V]=Z,K}function E(K,V){if(!(K instanceof V))throw new TypeError("Cannot call a class as a function")}function j(K,V){if(!K)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return V&&(typeof V=="object"||typeof V=="function")?V:K}function q(K,V){if(typeof V!="function"&&V!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof V);K.prototype=Object.create(V&&V.prototype,{constructor:{value:K,enumerable:!1,writable:!0,configurable:!0}}),V&&(Object.setPrototypeOf?Object.setPrototypeOf(K,V):K.__proto__=V)}var B=(0,v.default)("quill:clipboard"),G="__ql-matcher",D=[[Node.TEXT_NODE,de],[Node.TEXT_NODE,ie],["br",X],[Node.ELEMENT_NODE,ie],[Node.ELEMENT_NODE,W],[Node.ELEMENT_NODE,se],[Node.ELEMENT_NODE,z],[Node.ELEMENT_NODE,ye],["li",ee],["b",H.bind(H,"bold")],["i",H.bind(H,"italic")],["style",Q]],C=[f.AlignAttribute,R.DirectionAttribute].reduce(function(K,V){return K[V.keyName]=V,K},{}),x=[f.AlignStyle,w.BackgroundStyle,S.ColorStyle,R.DirectionStyle,A.FontStyle,O.SizeStyle].reduce(function(K,V){return K[V.keyName]=V,K},{}),I=function(K){q(V,K);function V(Z,Y){E(this,V);var J=j(this,(V.__proto__||Object.getPrototypeOf(V)).call(this,Z,Y));return J.quill.root.addEventListener("paste",J.onPaste.bind(J)),J.container=J.quill.addContainer("ql-clipboard"),J.container.setAttribute("contenteditable",!0),J.container.setAttribute("tabindex",-1),J.matchers=[],D.concat(J.options.matchers).forEach(function(te){var re=u(te,2),ne=re[0],me=re[1];!Y.matchVisual&&me===se||J.addMatcher(ne,me)}),J}return d(V,[{key:"addMatcher",value:function(Y,J){this.matchers.push([Y,J])}},{key:"convert",value:function(Y){if(typeof Y=="string")return this.container.innerHTML=Y.replace(/\>\r?\n +\</g,"><"),this.convert();var J=this.quill.getFormat(this.quill.selection.savedRange.index);if(J[k.default.blotName]){var te=this.container.innerText;return this.container.innerHTML="",new l.default().insert(te,P({},k.default.blotName,J[k.default.blotName]))}var re=this.prepareMatching(),ne=u(re,2),me=ne[0],Ee=ne[1],fe=M(this.container,me,Ee);return U(fe,`
`)&&fe.ops[fe.ops.length-1].attributes==null&&(fe=fe.compose(new l.default().retain(fe.length()-1).delete(1))),B.log("convert",this.container.innerHTML,fe),this.container.innerHTML="",fe}},{key:"dangerouslyPasteHTML",value:function(Y,J){var te=arguments.length>2&&arguments[2]!==void 0?arguments[2]:g.default.sources.API;if(typeof Y=="string")this.quill.setContents(this.convert(Y),J),this.quill.setSelection(0,g.default.sources.SILENT);else{var re=this.convert(J);this.quill.updateContents(new l.default().retain(Y).concat(re),te),this.quill.setSelection(Y+re.length(),g.default.sources.SILENT)}}},{key:"onPaste",value:function(Y){var J=this;if(!(Y.defaultPrevented||!this.quill.isEnabled())){var te=this.quill.getSelection(),re=new l.default().retain(te.index),ne=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(g.default.sources.SILENT),setTimeout(function(){re=re.concat(J.convert()).delete(te.length),J.quill.updateContents(re,g.default.sources.USER),J.quill.setSelection(re.length()-te.length,g.default.sources.SILENT),J.quill.scrollingContainer.scrollTop=ne,J.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var Y=this,J=[],te=[];return this.matchers.forEach(function(re){var ne=u(re,2),me=ne[0],Ee=ne[1];switch(me){case Node.TEXT_NODE:te.push(Ee);break;case Node.ELEMENT_NODE:J.push(Ee);break;default:[].forEach.call(Y.container.querySelectorAll(me),function(fe){fe[G]=fe[G]||[],fe[G].push(Ee)});break}}),[J,te]}}]),V}(_.default);I.DEFAULTS={matchers:[],matchVisual:!0};function $(K,V,Z){return(typeof V>"u"?"undefined":i(V))==="object"?Object.keys(V).reduce(function(Y,J){return $(Y,J,V[J])},K):K.reduce(function(Y,J){return J.attributes&&J.attributes[V]?Y.push(J):Y.insert(J.insert,(0,p.default)({},P({},V,Z),J.attributes))},new l.default)}function F(K){if(K.nodeType!==Node.ELEMENT_NODE)return{};var V="__ql-computed-style";return K[V]||(K[V]=window.getComputedStyle(K))}function U(K,V){for(var Z="",Y=K.ops.length-1;Y>=0&&Z.length<V.length;--Y){var J=K.ops[Y];if(typeof J.insert!="string")break;Z=J.insert+Z}return Z.slice(-1*V.length)===V}function L(K){if(K.childNodes.length===0)return!1;var V=F(K);return["block","list-item"].indexOf(V.display)>-1}function M(K,V,Z){return K.nodeType===K.TEXT_NODE?Z.reduce(function(Y,J){return J(K,Y)},new l.default):K.nodeType===K.ELEMENT_NODE?[].reduce.call(K.childNodes||[],function(Y,J){var te=M(J,V,Z);return J.nodeType===K.ELEMENT_NODE&&(te=V.reduce(function(re,ne){return ne(J,re)},te),te=(J[G]||[]).reduce(function(re,ne){return ne(J,re)},te)),Y.concat(te)},new l.default):new l.default}function H(K,V,Z){return $(Z,K,!0)}function z(K,V){var Z=s.default.Attributor.Attribute.keys(K),Y=s.default.Attributor.Class.keys(K),J=s.default.Attributor.Style.keys(K),te={};return Z.concat(Y).concat(J).forEach(function(re){var ne=s.default.query(re,s.default.Scope.ATTRIBUTE);ne!=null&&(te[ne.attrName]=ne.value(K),te[ne.attrName])||(ne=C[re],ne!=null&&(ne.attrName===re||ne.keyName===re)&&(te[ne.attrName]=ne.value(K)||void 0),ne=x[re],ne!=null&&(ne.attrName===re||ne.keyName===re)&&(ne=x[re],te[ne.attrName]=ne.value(K)||void 0))}),Object.keys(te).length>0&&(V=$(V,te)),V}function W(K,V){var Z=s.default.query(K);if(Z==null)return V;if(Z.prototype instanceof s.default.Embed){var Y={},J=Z.value(K);J!=null&&(Y[Z.blotName]=J,V=new l.default().insert(Y,Z.formats(K)))}else typeof Z.formats=="function"&&(V=$(V,Z.blotName,Z.formats(K)));return V}function X(K,V){return U(V,`
`)||V.insert(`
`),V}function Q(){return new l.default}function ee(K,V){var Z=s.default.query(K);if(Z==null||Z.blotName!=="list-item"||!U(V,`
`))return V;for(var Y=-1,J=K.parentNode;!J.classList.contains("ql-clipboard");)(s.default.query(J)||{}).blotName==="list"&&(Y+=1),J=J.parentNode;return Y<=0?V:V.compose(new l.default().retain(V.length()-1).retain(1,{indent:Y}))}function ie(K,V){return U(V,`
`)||(L(K)||V.length()>0&&K.nextSibling&&L(K.nextSibling))&&V.insert(`
`),V}function se(K,V){if(L(K)&&K.nextElementSibling!=null&&!U(V,`

`)){var Z=K.offsetHeight+parseFloat(F(K).marginTop)+parseFloat(F(K).marginBottom);K.nextElementSibling.offsetTop>K.offsetTop+Z*1.5&&V.insert(`
`)}return V}function ye(K,V){var Z={},Y=K.style||{};return Y.fontStyle&&F(K).fontStyle==="italic"&&(Z.italic=!0),Y.fontWeight&&(F(K).fontWeight.startsWith("bold")||parseInt(F(K).fontWeight)>=700)&&(Z.bold=!0),Object.keys(Z).length>0&&(V=$(V,Z)),parseFloat(Y.textIndent||0)>0&&(V=new l.default().insert("	").concat(V)),V}function de(K,V){var Z=K.data;if(K.parentNode.tagName==="O:P")return V.insert(Z.trim());if(Z.trim().length===0&&K.parentNode.classList.contains("ql-clipboard"))return V;if(!F(K.parentNode).whiteSpace.startsWith("pre")){var Y=function(te,re){return re=re.replace(/[^\u00a0]/g,""),re.length<1&&te?" ":re};Z=Z.replace(/\r\n/g," ").replace(/\n/g," "),Z=Z.replace(/\s\s+/g,Y.bind(Y,!0)),(K.previousSibling==null&&L(K.parentNode)||K.previousSibling!=null&&L(K.previousSibling))&&(Z=Z.replace(/^\s+/,Y.bind(Y,!1))),(K.nextSibling==null&&L(K.parentNode)||K.nextSibling!=null&&L(K.nextSibling))&&(Z=Z.replace(/\s+$/,Y.bind(Y,!1)))}return V.insert(Z)}r.default=I,r.matchAttributor=z,r.matchBlot=W,r.matchNewline=ie,r.matchSpacing=se,r.matchText=de},function(e,r,n){Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function b(g,m){for(var v=0;v<m.length;v++){var y=m[v];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(g,y.key,y)}}return function(g,m,v){return m&&b(g.prototype,m),v&&b(g,v),g}}(),u=function b(g,m,v){g===null&&(g=Function.prototype);var y=Object.getOwnPropertyDescriptor(g,m);if(y===void 0){var _=Object.getPrototypeOf(g);return _===null?void 0:b(_,m,v)}else{if("value"in y)return y.value;var f=y.get;return f===void 0?void 0:f.call(v)}},d=n(6),h=p(d);function p(b){return b&&b.__esModule?b:{default:b}}function c(b,g){if(!(b instanceof g))throw new TypeError("Cannot call a class as a function")}function l(b,g){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:b}function o(b,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);b.prototype=Object.create(g&&g.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(b,g):b.__proto__=g)}var s=function(b){o(g,b);function g(){return c(this,g),l(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return i(g,[{key:"optimize",value:function(v){u(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"optimize",this).call(this,v),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return u(g.__proto__||Object.getPrototypeOf(g),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),g}(h.default);s.blotName="bold",s.tagName=["STRONG","B"],r.default=s},function(e,r,n){Object.defineProperty(r,"__esModule",{value:!0}),r.addControls=r.default=void 0;var i=function(){function O(T,P){var E=[],j=!0,q=!1,B=void 0;try{for(var G=T[Symbol.iterator](),D;!(j=(D=G.next()).done)&&(E.push(D.value),!(P&&E.length===P));j=!0);}catch(C){q=!0,B=C}finally{try{!j&&G.return&&G.return()}finally{if(q)throw B}}return E}return function(T,P){if(Array.isArray(T))return T;if(Symbol.iterator in Object(T))return O(T,P);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function O(T,P){for(var E=0;E<P.length;E++){var j=P[E];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(T,j.key,j)}}return function(T,P,E){return P&&O(T.prototype,P),E&&O(T,E),T}}(),d=n(2),h=v(d),p=n(0),c=v(p),l=n(5),o=v(l),s=n(10),b=v(s),g=n(9),m=v(g);function v(O){return O&&O.__esModule?O:{default:O}}function y(O,T,P){return T in O?Object.defineProperty(O,T,{value:P,enumerable:!0,configurable:!0,writable:!0}):O[T]=P,O}function _(O,T){if(!(O instanceof T))throw new TypeError("Cannot call a class as a function")}function f(O,T){if(!O)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T&&(typeof T=="object"||typeof T=="function")?T:O}function w(O,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof T);O.prototype=Object.create(T&&T.prototype,{constructor:{value:O,enumerable:!1,writable:!0,configurable:!0}}),T&&(Object.setPrototypeOf?Object.setPrototypeOf(O,T):O.__proto__=T)}var N=(0,b.default)("quill:toolbar"),k=function(O){w(T,O);function T(P,E){_(this,T);var j=f(this,(T.__proto__||Object.getPrototypeOf(T)).call(this,P,E));if(Array.isArray(j.options.container)){var q=document.createElement("div");R(q,j.options.container),P.container.parentNode.insertBefore(q,P.container),j.container=q}else typeof j.options.container=="string"?j.container=document.querySelector(j.options.container):j.container=j.options.container;if(!(j.container instanceof HTMLElement)){var B;return B=N.error("Container required for toolbar",j.options),f(j,B)}return j.container.classList.add("ql-toolbar"),j.controls=[],j.handlers={},Object.keys(j.options.handlers).forEach(function(G){j.addHandler(G,j.options.handlers[G])}),[].forEach.call(j.container.querySelectorAll("button, select"),function(G){j.attach(G)}),j.quill.on(o.default.events.EDITOR_CHANGE,function(G,D){G===o.default.events.SELECTION_CHANGE&&j.update(D)}),j.quill.on(o.default.events.SCROLL_OPTIMIZE,function(){var G=j.quill.selection.getRange(),D=i(G,1),C=D[0];j.update(C)}),j}return u(T,[{key:"addHandler",value:function(E,j){this.handlers[E]=j}},{key:"attach",value:function(E){var j=this,q=[].find.call(E.classList,function(G){return G.indexOf("ql-")===0});if(q){if(q=q.slice(3),E.tagName==="BUTTON"&&E.setAttribute("type","button"),this.handlers[q]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[q]==null){N.warn("ignoring attaching to disabled format",q,E);return}if(c.default.query(q)==null){N.warn("ignoring attaching to nonexistent format",q,E);return}}var B=E.tagName==="SELECT"?"change":"click";E.addEventListener(B,function(G){var D=void 0;if(E.tagName==="SELECT"){if(E.selectedIndex<0)return;var C=E.options[E.selectedIndex];C.hasAttribute("selected")?D=!1:D=C.value||!1}else E.classList.contains("ql-active")?D=!1:D=E.value||!E.hasAttribute("value"),G.preventDefault();j.quill.focus();var x=j.quill.selection.getRange(),I=i(x,1),$=I[0];if(j.handlers[q]!=null)j.handlers[q].call(j,D);else if(c.default.query(q).prototype instanceof c.default.Embed){if(D=prompt("Enter "+q),!D)return;j.quill.updateContents(new h.default().retain($.index).delete($.length).insert(y({},q,D)),o.default.sources.USER)}else j.quill.format(q,D,o.default.sources.USER);j.update($)}),this.controls.push([q,E])}}},{key:"update",value:function(E){var j=E==null?{}:this.quill.getFormat(E);this.controls.forEach(function(q){var B=i(q,2),G=B[0],D=B[1];if(D.tagName==="SELECT"){var C=void 0;if(E==null)C=null;else if(j[G]==null)C=D.querySelector("option[selected]");else if(!Array.isArray(j[G])){var x=j[G];typeof x=="string"&&(x=x.replace(/\"/g,'\\"')),C=D.querySelector('option[value="'+x+'"]')}C==null?(D.value="",D.selectedIndex=-1):C.selected=!0}else if(E==null)D.classList.remove("ql-active");else if(D.hasAttribute("value")){var I=j[G]===D.getAttribute("value")||j[G]!=null&&j[G].toString()===D.getAttribute("value")||j[G]==null&&!D.getAttribute("value");D.classList.toggle("ql-active",I)}else D.classList.toggle("ql-active",j[G]!=null)})}}]),T}(m.default);k.DEFAULTS={};function S(O,T,P){var E=document.createElement("button");E.setAttribute("type","button"),E.classList.add("ql-"+T),P!=null&&(E.value=P),O.appendChild(E)}function R(O,T){Array.isArray(T[0])||(T=[T]),T.forEach(function(P){var E=document.createElement("span");E.classList.add("ql-formats"),P.forEach(function(j){if(typeof j=="string")S(E,j);else{var q=Object.keys(j)[0],B=j[q];Array.isArray(B)?A(E,q,B):S(E,q,B)}}),O.appendChild(E)})}function A(O,T,P){var E=document.createElement("select");E.classList.add("ql-"+T),P.forEach(function(j){var q=document.createElement("option");j!==!1?q.setAttribute("value",j):q.setAttribute("selected","selected"),E.appendChild(q)}),O.appendChild(E)}k.DEFAULTS={container:null,handlers:{clean:function(){var T=this,P=this.quill.getSelection();if(P!=null)if(P.length==0){var E=this.quill.getFormat();Object.keys(E).forEach(function(j){c.default.query(j,c.default.Scope.INLINE)!=null&&T.quill.format(j,!1)})}else this.quill.removeFormat(P,o.default.sources.USER)},direction:function(T){var P=this.quill.getFormat().align;T==="rtl"&&P==null?this.quill.format("align","right",o.default.sources.USER):!T&&P==="right"&&this.quill.format("align",!1,o.default.sources.USER),this.quill.format("direction",T,o.default.sources.USER)},indent:function(T){var P=this.quill.getSelection(),E=this.quill.getFormat(P),j=parseInt(E.indent||0);if(T==="+1"||T==="-1"){var q=T==="+1"?1:-1;E.direction==="rtl"&&(q*=-1),this.quill.format("indent",j+q,o.default.sources.USER)}},link:function(T){T===!0&&(T=prompt("Enter link URL:")),this.quill.format("link",T,o.default.sources.USER)},list:function(T){var P=this.quill.getSelection(),E=this.quill.getFormat(P);T==="check"?E.list==="checked"||E.list==="unchecked"?this.quill.format("list",!1,o.default.sources.USER):this.quill.format("list","unchecked",o.default.sources.USER):this.quill.format("list",T,o.default.sources.USER)}}},r.default=k,r.addControls=R},function(e,r){e.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(e,r,n){Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function b(g,m){for(var v=0;v<m.length;v++){var y=m[v];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(g,y.key,y)}}return function(g,m,v){return m&&b(g.prototype,m),v&&b(g,v),g}}(),u=function b(g,m,v){g===null&&(g=Function.prototype);var y=Object.getOwnPropertyDescriptor(g,m);if(y===void 0){var _=Object.getPrototypeOf(g);return _===null?void 0:b(_,m,v)}else{if("value"in y)return y.value;var f=y.get;return f===void 0?void 0:f.call(v)}},d=n(28),h=p(d);function p(b){return b&&b.__esModule?b:{default:b}}function c(b,g){if(!(b instanceof g))throw new TypeError("Cannot call a class as a function")}function l(b,g){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:b}function o(b,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);b.prototype=Object.create(g&&g.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(b,g):b.__proto__=g)}var s=function(b){o(g,b);function g(m,v){c(this,g);var y=l(this,(g.__proto__||Object.getPrototypeOf(g)).call(this,m));return y.label.innerHTML=v,y.container.classList.add("ql-color-picker"),[].slice.call(y.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(_){_.classList.add("ql-primary")}),y}return i(g,[{key:"buildItem",value:function(v){var y=u(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"buildItem",this).call(this,v);return y.style.backgroundColor=v.getAttribute("value")||"",y}},{key:"selectItem",value:function(v,y){u(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"selectItem",this).call(this,v,y);var _=this.label.querySelector(".ql-color-label"),f=v&&v.getAttribute("data-value")||"";_&&(_.tagName==="line"?_.style.stroke=f:_.style.fill=f)}}]),g}(h.default);r.default=s},function(e,r,n){Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function b(g,m){for(var v=0;v<m.length;v++){var y=m[v];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(g,y.key,y)}}return function(g,m,v){return m&&b(g.prototype,m),v&&b(g,v),g}}(),u=function b(g,m,v){g===null&&(g=Function.prototype);var y=Object.getOwnPropertyDescriptor(g,m);if(y===void 0){var _=Object.getPrototypeOf(g);return _===null?void 0:b(_,m,v)}else{if("value"in y)return y.value;var f=y.get;return f===void 0?void 0:f.call(v)}},d=n(28),h=p(d);function p(b){return b&&b.__esModule?b:{default:b}}function c(b,g){if(!(b instanceof g))throw new TypeError("Cannot call a class as a function")}function l(b,g){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:b}function o(b,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);b.prototype=Object.create(g&&g.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(b,g):b.__proto__=g)}var s=function(b){o(g,b);function g(m,v){c(this,g);var y=l(this,(g.__proto__||Object.getPrototypeOf(g)).call(this,m));return y.container.classList.add("ql-icon-picker"),[].forEach.call(y.container.querySelectorAll(".ql-picker-item"),function(_){_.innerHTML=v[_.getAttribute("data-value")||""]}),y.defaultItem=y.container.querySelector(".ql-selected"),y.selectItem(y.defaultItem),y}return i(g,[{key:"selectItem",value:function(v,y){u(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"selectItem",this).call(this,v,y),v=v||this.defaultItem,this.label.innerHTML=v.innerHTML}}]),g}(h.default);r.default=s},function(e,r,n){Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function h(p,c){for(var l=0;l<c.length;l++){var o=c[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(p,o.key,o)}}return function(p,c,l){return c&&h(p.prototype,c),l&&h(p,l),p}}();function u(h,p){if(!(h instanceof p))throw new TypeError("Cannot call a class as a function")}var d=function(){function h(p,c){var l=this;u(this,h),this.quill=p,this.boundsContainer=c||document.body,this.root=p.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){l.root.style.marginTop=-1*l.quill.root.scrollTop+"px"}),this.hide()}return i(h,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(c){var l=c.left+c.width/2-this.root.offsetWidth/2,o=c.bottom+this.quill.root.scrollTop;this.root.style.left=l+"px",this.root.style.top=o+"px",this.root.classList.remove("ql-flip");var s=this.boundsContainer.getBoundingClientRect(),b=this.root.getBoundingClientRect(),g=0;if(b.right>s.right&&(g=s.right-b.right,this.root.style.left=l+g+"px"),b.left<s.left&&(g=s.left-b.left,this.root.style.left=l+g+"px"),b.bottom>s.bottom){var m=b.bottom-b.top,v=c.bottom-c.top+m;this.root.style.top=o-v+"px",this.root.classList.add("ql-flip")}return g}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),h}();r.default=d},function(e,r,n){Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function A(O,T){var P=[],E=!0,j=!1,q=void 0;try{for(var B=O[Symbol.iterator](),G;!(E=(G=B.next()).done)&&(P.push(G.value),!(T&&P.length===T));E=!0);}catch(D){j=!0,q=D}finally{try{!E&&B.return&&B.return()}finally{if(j)throw q}}return P}return function(O,T){if(Array.isArray(O))return O;if(Symbol.iterator in Object(O))return A(O,T);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function A(O,T,P){O===null&&(O=Function.prototype);var E=Object.getOwnPropertyDescriptor(O,T);if(E===void 0){var j=Object.getPrototypeOf(O);return j===null?void 0:A(j,T,P)}else{if("value"in E)return E.value;var q=E.get;return q===void 0?void 0:q.call(P)}},d=function(){function A(O,T){for(var P=0;P<T.length;P++){var E=T[P];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(O,E.key,E)}}return function(O,T,P){return T&&A(O.prototype,T),P&&A(O,P),O}}(),h=n(3),p=_(h),c=n(8),l=_(c),o=n(43),s=_(o),b=n(27),g=_(b),m=n(15),v=n(41),y=_(v);function _(A){return A&&A.__esModule?A:{default:A}}function f(A,O){if(!(A instanceof O))throw new TypeError("Cannot call a class as a function")}function w(A,O){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return O&&(typeof O=="object"||typeof O=="function")?O:A}function N(A,O){if(typeof O!="function"&&O!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof O);A.prototype=Object.create(O&&O.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),O&&(Object.setPrototypeOf?Object.setPrototypeOf(A,O):A.__proto__=O)}var k=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],S=function(A){N(O,A);function O(T,P){f(this,O),P.modules.toolbar!=null&&P.modules.toolbar.container==null&&(P.modules.toolbar.container=k);var E=w(this,(O.__proto__||Object.getPrototypeOf(O)).call(this,T,P));return E.quill.container.classList.add("ql-snow"),E}return d(O,[{key:"extendToolbar",value:function(P){P.container.classList.add("ql-snow"),this.buildButtons([].slice.call(P.container.querySelectorAll("button")),y.default),this.buildPickers([].slice.call(P.container.querySelectorAll("select")),y.default),this.tooltip=new R(this.quill,this.options.bounds),P.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(E,j){P.handlers.link.call(P,!j.format.link)})}}]),O}(s.default);S.DEFAULTS=(0,p.default)(!0,{},s.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(O){if(O){var T=this.quill.getSelection();if(T==null||T.length==0)return;var P=this.quill.getText(T);/^\S+@\S+\.\S+$/.test(P)&&P.indexOf("mailto:")!==0&&(P="mailto:"+P);var E=this.quill.theme.tooltip;E.edit("link",P)}else this.quill.format("link",!1)}}}}});var R=function(A){N(O,A);function O(T,P){f(this,O);var E=w(this,(O.__proto__||Object.getPrototypeOf(O)).call(this,T,P));return E.preview=E.root.querySelector("a.ql-preview"),E}return d(O,[{key:"listen",value:function(){var P=this;u(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(E){P.root.classList.contains("ql-editing")?P.save():P.edit("link",P.preview.textContent),E.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(E){if(P.linkRange!=null){var j=P.linkRange;P.restoreFocus(),P.quill.formatText(j,"link",!1,l.default.sources.USER),delete P.linkRange}E.preventDefault(),P.hide()}),this.quill.on(l.default.events.SELECTION_CHANGE,function(E,j,q){if(E!=null){if(E.length===0&&q===l.default.sources.USER){var B=P.quill.scroll.descendant(g.default,E.index),G=i(B,2),D=G[0],C=G[1];if(D!=null){P.linkRange=new m.Range(E.index-C,D.length());var x=g.default.formats(D.domNode);P.preview.textContent=x,P.preview.setAttribute("href",x),P.show(),P.position(P.quill.getBounds(P.linkRange));return}}else delete P.linkRange;P.hide()}})}},{key:"show",value:function(){u(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),O}(o.BaseTooltip);R.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),r.default=S},function(e,r,n){Object.defineProperty(r,"__esModule",{value:!0});var i=n(29),u=J(i),d=n(36),h=n(38),p=n(64),c=n(65),l=J(c),o=n(66),s=J(o),b=n(67),g=J(b),m=n(37),v=n(26),y=n(39),_=n(40),f=n(56),w=J(f),N=n(68),k=J(N),S=n(27),R=J(S),A=n(69),O=J(A),T=n(70),P=J(T),E=n(71),j=J(E),q=n(72),B=J(q),G=n(73),D=J(G),C=n(13),x=J(C),I=n(74),$=J(I),F=n(75),U=J(F),L=n(57),M=J(L),H=n(41),z=J(H),W=n(28),X=J(W),Q=n(59),ee=J(Q),ie=n(60),se=J(ie),ye=n(61),de=J(ye),K=n(108),V=J(K),Z=n(62),Y=J(Z);function J(te){return te&&te.__esModule?te:{default:te}}u.default.register({"attributors/attribute/direction":h.DirectionAttribute,"attributors/class/align":d.AlignClass,"attributors/class/background":m.BackgroundClass,"attributors/class/color":v.ColorClass,"attributors/class/direction":h.DirectionClass,"attributors/class/font":y.FontClass,"attributors/class/size":_.SizeClass,"attributors/style/align":d.AlignStyle,"attributors/style/background":m.BackgroundStyle,"attributors/style/color":v.ColorStyle,"attributors/style/direction":h.DirectionStyle,"attributors/style/font":y.FontStyle,"attributors/style/size":_.SizeStyle},!0),u.default.register({"formats/align":d.AlignClass,"formats/direction":h.DirectionClass,"formats/indent":p.IndentClass,"formats/background":m.BackgroundStyle,"formats/color":v.ColorStyle,"formats/font":y.FontClass,"formats/size":_.SizeClass,"formats/blockquote":l.default,"formats/code-block":x.default,"formats/header":s.default,"formats/list":g.default,"formats/bold":w.default,"formats/code":C.Code,"formats/italic":k.default,"formats/link":R.default,"formats/script":O.default,"formats/strike":P.default,"formats/underline":j.default,"formats/image":B.default,"formats/video":D.default,"formats/list/item":b.ListItem,"modules/formula":$.default,"modules/syntax":U.default,"modules/toolbar":M.default,"themes/bubble":V.default,"themes/snow":Y.default,"ui/icons":z.default,"ui/picker":X.default,"ui/icon-picker":se.default,"ui/color-picker":ee.default,"ui/tooltip":de.default},!0),r.default=u.default},function(e,r,n){Object.defineProperty(r,"__esModule",{value:!0}),r.IndentClass=void 0;var i=function(){function g(m,v){for(var y=0;y<v.length;y++){var _=v[y];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(m,_.key,_)}}return function(m,v,y){return v&&g(m.prototype,v),y&&g(m,y),m}}(),u=function g(m,v,y){m===null&&(m=Function.prototype);var _=Object.getOwnPropertyDescriptor(m,v);if(_===void 0){var f=Object.getPrototypeOf(m);return f===null?void 0:g(f,v,y)}else{if("value"in _)return _.value;var w=_.get;return w===void 0?void 0:w.call(y)}},d=n(0),h=p(d);function p(g){return g&&g.__esModule?g:{default:g}}function c(g,m){if(!(g instanceof m))throw new TypeError("Cannot call a class as a function")}function l(g,m){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:g}function o(g,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);g.prototype=Object.create(m&&m.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(g,m):g.__proto__=m)}var s=function(g){o(m,g);function m(){return c(this,m),l(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return i(m,[{key:"add",value:function(y,_){if(_==="+1"||_==="-1"){var f=this.value(y)||0;_=_==="+1"?f+1:f-1}return _===0?(this.remove(y),!0):u(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"add",this).call(this,y,_)}},{key:"canAdd",value:function(y,_){return u(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"canAdd",this).call(this,y,_)||u(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"canAdd",this).call(this,y,parseInt(_))}},{key:"value",value:function(y){return parseInt(u(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"value",this).call(this,y))||void 0}}]),m}(h.default.Attributor.Class),b=new s("indent","ql-indent",{scope:h.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});r.IndentClass=b},function(e,r,n){Object.defineProperty(r,"__esModule",{value:!0});var i=n(4),u=d(i);function d(o){return o&&o.__esModule?o:{default:o}}function h(o,s){if(!(o instanceof s))throw new TypeError("Cannot call a class as a function")}function p(o,s){if(!o)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s&&(typeof s=="object"||typeof s=="function")?s:o}function c(o,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof s);o.prototype=Object.create(s&&s.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),s&&(Object.setPrototypeOf?Object.setPrototypeOf(o,s):o.__proto__=s)}var l=function(o){c(s,o);function s(){return h(this,s),p(this,(s.__proto__||Object.getPrototypeOf(s)).apply(this,arguments))}return s}(u.default);l.blotName="blockquote",l.tagName="blockquote",r.default=l},function(e,r,n){Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function s(b,g){for(var m=0;m<g.length;m++){var v=g[m];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(b,v.key,v)}}return function(b,g,m){return g&&s(b.prototype,g),m&&s(b,m),b}}(),u=n(4),d=h(u);function h(s){return s&&s.__esModule?s:{default:s}}function p(s,b){if(!(s instanceof b))throw new TypeError("Cannot call a class as a function")}function c(s,b){if(!s)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:s}function l(s,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);s.prototype=Object.create(b&&b.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(s,b):s.__proto__=b)}var o=function(s){l(b,s);function b(){return p(this,b),c(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return i(b,null,[{key:"formats",value:function(m){return this.tagName.indexOf(m.tagName)+1}}]),b}(d.default);o.blotName="header",o.tagName=["H1","H2","H3","H4","H5","H6"],r.default=o},function(e,r,n){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.ListItem=void 0;var i=function(){function f(w,N){for(var k=0;k<N.length;k++){var S=N[k];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(w,S.key,S)}}return function(w,N,k){return N&&f(w.prototype,N),k&&f(w,k),w}}(),u=function f(w,N,k){w===null&&(w=Function.prototype);var S=Object.getOwnPropertyDescriptor(w,N);if(S===void 0){var R=Object.getPrototypeOf(w);return R===null?void 0:f(R,N,k)}else{if("value"in S)return S.value;var A=S.get;return A===void 0?void 0:A.call(k)}},d=n(0),h=s(d),p=n(4),c=s(p),l=n(25),o=s(l);function s(f){return f&&f.__esModule?f:{default:f}}function b(f,w,N){return w in f?Object.defineProperty(f,w,{value:N,enumerable:!0,configurable:!0,writable:!0}):f[w]=N,f}function g(f,w){if(!(f instanceof w))throw new TypeError("Cannot call a class as a function")}function m(f,w){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:f}function v(f,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);f.prototype=Object.create(w&&w.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(f,w):f.__proto__=w)}var y=function(f){v(w,f);function w(){return g(this,w),m(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}return i(w,[{key:"format",value:function(k,S){k===_.blotName&&!S?this.replaceWith(h.default.create(this.statics.scope)):u(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"format",this).call(this,k,S)}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():u(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(k,S){return this.parent.isolate(this.offset(this.parent),this.length()),k===this.parent.statics.blotName?(this.parent.replaceWith(k,S),this):(this.parent.unwrap(),u(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"replaceWith",this).call(this,k,S))}}],[{key:"formats",value:function(k){return k.tagName===this.tagName?void 0:u(w.__proto__||Object.getPrototypeOf(w),"formats",this).call(this,k)}}]),w}(c.default);y.blotName="list-item",y.tagName="LI";var _=function(f){v(w,f),i(w,null,[{key:"create",value:function(k){var S=k==="ordered"?"OL":"UL",R=u(w.__proto__||Object.getPrototypeOf(w),"create",this).call(this,S);return(k==="checked"||k==="unchecked")&&R.setAttribute("data-checked",k==="checked"),R}},{key:"formats",value:function(k){if(k.tagName==="OL")return"ordered";if(k.tagName==="UL")return k.hasAttribute("data-checked")?k.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"}}]);function w(N){g(this,w);var k=m(this,(w.__proto__||Object.getPrototypeOf(w)).call(this,N)),S=function(A){if(A.target.parentNode===N){var O=k.statics.formats(N),T=h.default.find(A.target);O==="checked"?T.format("list","unchecked"):O==="unchecked"&&T.format("list","checked")}};return N.addEventListener("touchstart",S),N.addEventListener("mousedown",S),k}return i(w,[{key:"format",value:function(k,S){this.children.length>0&&this.children.tail.format(k,S)}},{key:"formats",value:function(){return b({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(k,S){if(k instanceof y)u(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"insertBefore",this).call(this,k,S);else{var R=S==null?this.length():S.offset(this),A=this.split(R);A.parent.insertBefore(k,A)}}},{key:"optimize",value:function(k){u(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"optimize",this).call(this,k);var S=this.next;S!=null&&S.prev===this&&S.statics.blotName===this.statics.blotName&&S.domNode.tagName===this.domNode.tagName&&S.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(S.moveChildren(this),S.remove())}},{key:"replace",value:function(k){if(k.statics.blotName!==this.statics.blotName){var S=h.default.create(this.statics.defaultChild);k.moveChildren(S),this.appendChild(S)}u(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"replace",this).call(this,k)}}]),w}(o.default);_.blotName="list",_.scope=h.default.Scope.BLOCK_BLOT,_.tagName=["OL","UL"],_.defaultChild="list-item",_.allowedChildren=[y],r.ListItem=y,r.default=_},function(e,r,n){Object.defineProperty(r,"__esModule",{value:!0});var i=n(56),u=d(i);function d(o){return o&&o.__esModule?o:{default:o}}function h(o,s){if(!(o instanceof s))throw new TypeError("Cannot call a class as a function")}function p(o,s){if(!o)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s&&(typeof s=="object"||typeof s=="function")?s:o}function c(o,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof s);o.prototype=Object.create(s&&s.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),s&&(Object.setPrototypeOf?Object.setPrototypeOf(o,s):o.__proto__=s)}var l=function(o){c(s,o);function s(){return h(this,s),p(this,(s.__proto__||Object.getPrototypeOf(s)).apply(this,arguments))}return s}(u.default);l.blotName="italic",l.tagName=["EM","I"],r.default=l},function(e,r,n){Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function b(g,m){for(var v=0;v<m.length;v++){var y=m[v];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(g,y.key,y)}}return function(g,m,v){return m&&b(g.prototype,m),v&&b(g,v),g}}(),u=function b(g,m,v){g===null&&(g=Function.prototype);var y=Object.getOwnPropertyDescriptor(g,m);if(y===void 0){var _=Object.getPrototypeOf(g);return _===null?void 0:b(_,m,v)}else{if("value"in y)return y.value;var f=y.get;return f===void 0?void 0:f.call(v)}},d=n(6),h=p(d);function p(b){return b&&b.__esModule?b:{default:b}}function c(b,g){if(!(b instanceof g))throw new TypeError("Cannot call a class as a function")}function l(b,g){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:b}function o(b,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);b.prototype=Object.create(g&&g.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(b,g):b.__proto__=g)}var s=function(b){o(g,b);function g(){return c(this,g),l(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return i(g,null,[{key:"create",value:function(v){return v==="super"?document.createElement("sup"):v==="sub"?document.createElement("sub"):u(g.__proto__||Object.getPrototypeOf(g),"create",this).call(this,v)}},{key:"formats",value:function(v){if(v.tagName==="SUB")return"sub";if(v.tagName==="SUP")return"super"}}]),g}(h.default);s.blotName="script",s.tagName=["SUB","SUP"],r.default=s},function(e,r,n){Object.defineProperty(r,"__esModule",{value:!0});var i=n(6),u=d(i);function d(o){return o&&o.__esModule?o:{default:o}}function h(o,s){if(!(o instanceof s))throw new TypeError("Cannot call a class as a function")}function p(o,s){if(!o)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s&&(typeof s=="object"||typeof s=="function")?s:o}function c(o,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof s);o.prototype=Object.create(s&&s.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),s&&(Object.setPrototypeOf?Object.setPrototypeOf(o,s):o.__proto__=s)}var l=function(o){c(s,o);function s(){return h(this,s),p(this,(s.__proto__||Object.getPrototypeOf(s)).apply(this,arguments))}return s}(u.default);l.blotName="strike",l.tagName="S",r.default=l},function(e,r,n){Object.defineProperty(r,"__esModule",{value:!0});var i=n(6),u=d(i);function d(o){return o&&o.__esModule?o:{default:o}}function h(o,s){if(!(o instanceof s))throw new TypeError("Cannot call a class as a function")}function p(o,s){if(!o)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s&&(typeof s=="object"||typeof s=="function")?s:o}function c(o,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof s);o.prototype=Object.create(s&&s.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),s&&(Object.setPrototypeOf?Object.setPrototypeOf(o,s):o.__proto__=s)}var l=function(o){c(s,o);function s(){return h(this,s),p(this,(s.__proto__||Object.getPrototypeOf(s)).apply(this,arguments))}return s}(u.default);l.blotName="underline",l.tagName="U",r.default=l},function(e,r,n){Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function m(v,y){for(var _=0;_<y.length;_++){var f=y[_];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(v,f.key,f)}}return function(v,y,_){return y&&m(v.prototype,y),_&&m(v,_),v}}(),u=function m(v,y,_){v===null&&(v=Function.prototype);var f=Object.getOwnPropertyDescriptor(v,y);if(f===void 0){var w=Object.getPrototypeOf(v);return w===null?void 0:m(w,y,_)}else{if("value"in f)return f.value;var N=f.get;return N===void 0?void 0:N.call(_)}},d=n(0),h=c(d),p=n(27);function c(m){return m&&m.__esModule?m:{default:m}}function l(m,v){if(!(m instanceof v))throw new TypeError("Cannot call a class as a function")}function o(m,v){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:m}function s(m,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);m.prototype=Object.create(v&&v.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(m,v):m.__proto__=v)}var b=["alt","height","width"],g=function(m){s(v,m);function v(){return l(this,v),o(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return i(v,[{key:"format",value:function(_,f){b.indexOf(_)>-1?f?this.domNode.setAttribute(_,f):this.domNode.removeAttribute(_):u(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"format",this).call(this,_,f)}}],[{key:"create",value:function(_){var f=u(v.__proto__||Object.getPrototypeOf(v),"create",this).call(this,_);return typeof _=="string"&&f.setAttribute("src",this.sanitize(_)),f}},{key:"formats",value:function(_){return b.reduce(function(f,w){return _.hasAttribute(w)&&(f[w]=_.getAttribute(w)),f},{})}},{key:"match",value:function(_){return/\.(jpe?g|gif|png)$/.test(_)||/^data:image\/.+;base64/.test(_)}},{key:"sanitize",value:function(_){return(0,p.sanitize)(_,["http","https","data"])?_:"//:0"}},{key:"value",value:function(_){return _.getAttribute("src")}}]),v}(h.default.Embed);g.blotName="image",g.tagName="IMG",r.default=g},function(e,r,n){Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function m(v,y){for(var _=0;_<y.length;_++){var f=y[_];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(v,f.key,f)}}return function(v,y,_){return y&&m(v.prototype,y),_&&m(v,_),v}}(),u=function m(v,y,_){v===null&&(v=Function.prototype);var f=Object.getOwnPropertyDescriptor(v,y);if(f===void 0){var w=Object.getPrototypeOf(v);return w===null?void 0:m(w,y,_)}else{if("value"in f)return f.value;var N=f.get;return N===void 0?void 0:N.call(_)}},d=n(4),h=n(27),p=c(h);function c(m){return m&&m.__esModule?m:{default:m}}function l(m,v){if(!(m instanceof v))throw new TypeError("Cannot call a class as a function")}function o(m,v){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:m}function s(m,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);m.prototype=Object.create(v&&v.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(m,v):m.__proto__=v)}var b=["height","width"],g=function(m){s(v,m);function v(){return l(this,v),o(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return i(v,[{key:"format",value:function(_,f){b.indexOf(_)>-1?f?this.domNode.setAttribute(_,f):this.domNode.removeAttribute(_):u(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"format",this).call(this,_,f)}}],[{key:"create",value:function(_){var f=u(v.__proto__||Object.getPrototypeOf(v),"create",this).call(this,_);return f.setAttribute("frameborder","0"),f.setAttribute("allowfullscreen",!0),f.setAttribute("src",this.sanitize(_)),f}},{key:"formats",value:function(_){return b.reduce(function(f,w){return _.hasAttribute(w)&&(f[w]=_.getAttribute(w)),f},{})}},{key:"sanitize",value:function(_){return p.default.sanitize(_)}},{key:"value",value:function(_){return _.getAttribute("src")}}]),v}(d.BlockEmbed);g.blotName="video",g.className="ql-video",g.tagName="IFRAME",r.default=g},function(e,r,n){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.FormulaBlot=void 0;var i=function(){function _(f,w){for(var N=0;N<w.length;N++){var k=w[N];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(f,k.key,k)}}return function(f,w,N){return w&&_(f.prototype,w),N&&_(f,N),f}}(),u=function _(f,w,N){f===null&&(f=Function.prototype);var k=Object.getOwnPropertyDescriptor(f,w);if(k===void 0){var S=Object.getPrototypeOf(f);return S===null?void 0:_(S,w,N)}else{if("value"in k)return k.value;var R=k.get;return R===void 0?void 0:R.call(N)}},d=n(35),h=s(d),p=n(5),c=s(p),l=n(9),o=s(l);function s(_){return _&&_.__esModule?_:{default:_}}function b(_,f){if(!(_ instanceof f))throw new TypeError("Cannot call a class as a function")}function g(_,f){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:_}function m(_,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);_.prototype=Object.create(f&&f.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(_,f):_.__proto__=f)}var v=function(_){m(f,_);function f(){return b(this,f),g(this,(f.__proto__||Object.getPrototypeOf(f)).apply(this,arguments))}return i(f,null,[{key:"create",value:function(N){var k=u(f.__proto__||Object.getPrototypeOf(f),"create",this).call(this,N);return typeof N=="string"&&(window.katex.render(N,k,{throwOnError:!1,errorColor:"#f00"}),k.setAttribute("data-value",N)),k}},{key:"value",value:function(N){return N.getAttribute("data-value")}}]),f}(h.default);v.blotName="formula",v.className="ql-formula",v.tagName="SPAN";var y=function(_){m(f,_),i(f,null,[{key:"register",value:function(){c.default.register(v,!0)}}]);function f(){b(this,f);var w=g(this,(f.__proto__||Object.getPrototypeOf(f)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return w}return f}(o.default);r.FormulaBlot=v,r.default=y},function(e,r,n){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.CodeToken=r.CodeBlock=void 0;var i=function(){function N(k,S){for(var R=0;R<S.length;R++){var A=S[R];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(k,A.key,A)}}return function(k,S,R){return S&&N(k.prototype,S),R&&N(k,R),k}}(),u=function N(k,S,R){k===null&&(k=Function.prototype);var A=Object.getOwnPropertyDescriptor(k,S);if(A===void 0){var O=Object.getPrototypeOf(k);return O===null?void 0:N(O,S,R)}else{if("value"in A)return A.value;var T=A.get;return T===void 0?void 0:T.call(R)}},d=n(0),h=g(d),p=n(5),c=g(p),l=n(9),o=g(l),s=n(13),b=g(s);function g(N){return N&&N.__esModule?N:{default:N}}function m(N,k){if(!(N instanceof k))throw new TypeError("Cannot call a class as a function")}function v(N,k){if(!N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k&&(typeof k=="object"||typeof k=="function")?k:N}function y(N,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof k);N.prototype=Object.create(k&&k.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(N,k):N.__proto__=k)}var _=function(N){y(k,N);function k(){return m(this,k),v(this,(k.__proto__||Object.getPrototypeOf(k)).apply(this,arguments))}return i(k,[{key:"replaceWith",value:function(R){this.domNode.textContent=this.domNode.textContent,this.attach(),u(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"replaceWith",this).call(this,R)}},{key:"highlight",value:function(R){var A=this.domNode.textContent;this.cachedText!==A&&((A.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=R(A),this.domNode.normalize(),this.attach()),this.cachedText=A)}}]),k}(b.default);_.className="ql-syntax";var f=new h.default.Attributor.Class("token","hljs",{scope:h.default.Scope.INLINE}),w=function(N){y(k,N),i(k,null,[{key:"register",value:function(){c.default.register(f,!0),c.default.register(_,!0)}}]);function k(S,R){m(this,k);var A=v(this,(k.__proto__||Object.getPrototypeOf(k)).call(this,S,R));if(typeof A.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var O=null;return A.quill.on(c.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(O),O=setTimeout(function(){A.highlight(),O=null},A.options.interval)}),A.highlight(),A}return i(k,[{key:"highlight",value:function(){var R=this;if(!this.quill.selection.composing){this.quill.update(c.default.sources.USER);var A=this.quill.getSelection();this.quill.scroll.descendants(_).forEach(function(O){O.highlight(R.options.highlight)}),this.quill.update(c.default.sources.SILENT),A!=null&&this.quill.setSelection(A,c.default.sources.SILENT)}}}]),k}(o.default);w.DEFAULTS={highlight:function(){return window.hljs==null?null:function(N){var k=window.hljs.highlightAuto(N);return k.value}}(),interval:1e3},r.CodeBlock=_,r.CodeToken=f,r.default=w},function(e,r){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(e,r){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(e,r){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(e,r){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(e,r){e.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(e,r){e.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(e,r){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(e,r){e.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(e,r){e.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(e,r){e.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(e,r){e.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(e,r){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(e,r){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(e,r){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(e,r){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(e,r){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(e,r){e.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(e,r){e.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(e,r){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(e,r){e.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(e,r){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(e,r){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(e,r){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(e,r){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(e,r){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(e,r){e.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(e,r){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(e,r){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(e,r){e.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(e,r){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(e,r){e.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(e,r){e.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(e,r,n){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BubbleTooltip=void 0;var i=function k(S,R,A){S===null&&(S=Function.prototype);var O=Object.getOwnPropertyDescriptor(S,R);if(O===void 0){var T=Object.getPrototypeOf(S);return T===null?void 0:k(T,R,A)}else{if("value"in O)return O.value;var P=O.get;return P===void 0?void 0:P.call(A)}},u=function(){function k(S,R){for(var A=0;A<R.length;A++){var O=R[A];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(S,O.key,O)}}return function(S,R,A){return R&&k(S.prototype,R),A&&k(S,A),S}}(),d=n(3),h=m(d),p=n(8),c=m(p),l=n(43),o=m(l),s=n(15),b=n(41),g=m(b);function m(k){return k&&k.__esModule?k:{default:k}}function v(k,S){if(!(k instanceof S))throw new TypeError("Cannot call a class as a function")}function y(k,S){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:k}function _(k,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);k.prototype=Object.create(S&&S.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(k,S):k.__proto__=S)}var f=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],w=function(k){_(S,k);function S(R,A){v(this,S),A.modules.toolbar!=null&&A.modules.toolbar.container==null&&(A.modules.toolbar.container=f);var O=y(this,(S.__proto__||Object.getPrototypeOf(S)).call(this,R,A));return O.quill.container.classList.add("ql-bubble"),O}return u(S,[{key:"extendToolbar",value:function(A){this.tooltip=new N(this.quill,this.options.bounds),this.tooltip.root.appendChild(A.container),this.buildButtons([].slice.call(A.container.querySelectorAll("button")),g.default),this.buildPickers([].slice.call(A.container.querySelectorAll("select")),g.default)}}]),S}(o.default);w.DEFAULTS=(0,h.default)(!0,{},o.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(S){S?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var N=function(k){_(S,k);function S(R,A){v(this,S);var O=y(this,(S.__proto__||Object.getPrototypeOf(S)).call(this,R,A));return O.quill.on(c.default.events.EDITOR_CHANGE,function(T,P,E,j){if(T===c.default.events.SELECTION_CHANGE)if(P!=null&&P.length>0&&j===c.default.sources.USER){O.show(),O.root.style.left="0px",O.root.style.width="",O.root.style.width=O.root.offsetWidth+"px";var q=O.quill.getLines(P.index,P.length);if(q.length===1)O.position(O.quill.getBounds(P));else{var B=q[q.length-1],G=O.quill.getIndex(B),D=Math.min(B.length()-1,P.index+P.length-G),C=O.quill.getBounds(new s.Range(G,D));O.position(C)}}else document.activeElement!==O.textbox&&O.quill.hasFocus()&&O.hide()}),O}return u(S,[{key:"listen",value:function(){var A=this;i(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){A.root.classList.remove("ql-editing")}),this.quill.on(c.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!A.root.classList.contains("ql-hidden")){var O=A.quill.getSelection();O!=null&&A.position(A.quill.getBounds(O))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(A){var O=i(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"position",this).call(this,A),T=this.root.querySelector(".ql-tooltip-arrow");if(T.style.marginLeft="",O===0)return O;T.style.marginLeft=-1*O-T.offsetWidth/2+"px"}}]),S}(l.BaseTooltip);N.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),r.BubbleTooltip=N,r.default=w},function(e,r,n){e.exports=n(63)}]).default})})(hn);var dn=hn.exports;const mc=dt(dn);var bc=pe&&pe.__extends||function(){var a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},a(t,e)};return function(t,e){a(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),ht=pe&&pe.__assign||function(){return ht=Object.assign||function(a){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(a[n]=t[n])}return a},ht.apply(this,arguments)},_c=pe&&pe.__spreadArrays||function(){for(var a=0,t=0,e=arguments.length;t<e;t++)a+=arguments[t].length;for(var r=Array(a),n=0,t=0;t<e;t++)for(var i=arguments[t],u=0,d=i.length;u<d;u++,n++)r[n]=i[u];return r},_t=pe&&pe.__importDefault||function(a){return a&&a.__esModule?a:{default:a}},Oe=_t(Ne),wc=_t(Pn),We=_t(gc),Nr=_t(dn),Oc=function(a){bc(t,a);function t(e){var r=a.call(this,e)||this;r.dirtyProps=["modules","formats","bounds","theme","children"],r.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],r.state={generation:0},r.selection=null,r.onEditorChange=function(i,u,d,h){var p,c,l,o;i==="text-change"?(c=(p=r).onEditorChangeText)===null||c===void 0||c.call(p,r.editor.root.innerHTML,u,h,r.unprivilegedEditor):i==="selection-change"&&((o=(l=r).onEditorChangeSelection)===null||o===void 0||o.call(l,u,h,r.unprivilegedEditor))};var n=r.isControlled()?e.value:e.defaultValue;return r.value=n??"",r}return t.prototype.validateProps=function(e){var r;if(Oe.default.Children.count(e.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(Oe.default.Children.count(e.children)){var n=Oe.default.Children.only(e.children);if(((r=n)===null||r===void 0?void 0:r.type)==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.")}if(this.lastDeltaChangeSet&&e.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")},t.prototype.shouldComponentUpdate=function(e,r){var n=this,i;if(this.validateProps(e),!this.editor||this.state.generation!==r.generation)return!0;if("value"in e){var u=this.getEditorContents(),d=(i=e.value,i??"");this.isEqualValue(d,u)||this.setEditorContents(this.editor,d)}return e.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,e.readOnly),_c(this.cleanProps,this.dirtyProps).some(function(h){return!We.default(e[h],n.props[h])})},t.prototype.shouldComponentRegenerate=function(e){var r=this;return this.dirtyProps.some(function(n){return!We.default(e[n],r.props[n])})},t.prototype.componentDidMount=function(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())},t.prototype.componentWillUnmount=function(){this.destroyEditor()},t.prototype.componentDidUpdate=function(e,r){var n=this;if(this.editor&&this.shouldComponentRegenerate(e)){var i=this.editor.getContents(),u=this.editor.getSelection();this.regenerationSnapshot={delta:i,selection:u},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==r.generation){var d=this.regenerationSnapshot,i=d.delta,h=d.selection;delete this.regenerationSnapshot,this.instantiateEditor();var p=this.editor;p.setContents(i),jr(function(){return n.setEditorSelection(p,h)})}},t.prototype.instantiateEditor=function(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())},t.prototype.destroyEditor=function(){this.editor&&this.unhookEditor(this.editor)},t.prototype.isControlled=function(){return"value"in this.props},t.prototype.getEditorConfig=function(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,scrollingContainer:this.props.scrollingContainer,tabIndex:this.props.tabIndex,theme:this.props.theme}},t.prototype.getEditor=function(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor},t.prototype.createEditor=function(e,r){var n=new Nr.default(e,r);return r.tabIndex!=null&&this.setEditorTabIndex(n,r.tabIndex),this.hookEditor(n),n},t.prototype.hookEditor=function(e){this.unprivilegedEditor=this.makeUnprivilegedEditor(e),e.on("editor-change",this.onEditorChange)},t.prototype.unhookEditor=function(e){e.off("editor-change",this.onEditorChange)},t.prototype.getEditorContents=function(){return this.value},t.prototype.getEditorSelection=function(){return this.selection},t.prototype.isDelta=function(e){return e&&e.ops},t.prototype.isEqualValue=function(e,r){return this.isDelta(e)&&this.isDelta(r)?We.default(e.ops,r.ops):We.default(e,r)},t.prototype.setEditorContents=function(e,r){var n=this;this.value=r;var i=this.getEditorSelection();typeof r=="string"?e.setContents(e.clipboard.convert(r)):e.setContents(r),jr(function(){return n.setEditorSelection(e,i)})},t.prototype.setEditorSelection=function(e,r){if(this.selection=r,r){var n=e.getLength();r.index=Math.max(0,Math.min(r.index,n-1)),r.length=Math.max(0,Math.min(r.length,n-1-r.index)),e.setSelection(r)}},t.prototype.setEditorTabIndex=function(e,r){var n,i;!((i=(n=e)===null||n===void 0?void 0:n.scroll)===null||i===void 0)&&i.domNode&&(e.scroll.domNode.tabIndex=r)},t.prototype.setEditorReadOnly=function(e,r){r?e.disable():e.enable()},t.prototype.makeUnprivilegedEditor=function(e){var r=e;return{getHTML:function(){return r.root.innerHTML},getLength:r.getLength.bind(r),getText:r.getText.bind(r),getContents:r.getContents.bind(r),getSelection:r.getSelection.bind(r),getBounds:r.getBounds.bind(r)}},t.prototype.getEditingArea=function(){if(!this.editingArea)throw new Error("Instantiating on missing editing area");var e=wc.default.findDOMNode(this.editingArea);if(!e)throw new Error("Cannot find element for editing area");if(e.nodeType===3)throw new Error("Editing area cannot be a text node");return e},t.prototype.renderEditingArea=function(){var e=this,r=this.props,n=r.children,i=r.preserveWhitespace,u=this.state.generation,d={key:u,ref:function(h){e.editingArea=h}};return Oe.default.Children.count(n)?Oe.default.cloneElement(Oe.default.Children.only(n),d):i?Oe.default.createElement("pre",ht({},d)):Oe.default.createElement("div",ht({},d))},t.prototype.render=function(){var e;return Oe.default.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,className:"quill "+(e=this.props.className,e??""),onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())},t.prototype.onEditorChangeText=function(e,r,n,i){var u,d;if(this.editor){var h=this.isDelta(this.value)?i.getContents():i.getHTML();h!==this.getEditorContents()&&(this.lastDeltaChangeSet=r,this.value=h,(d=(u=this.props).onChange)===null||d===void 0||d.call(u,e,r,n,i))}},t.prototype.onEditorChangeSelection=function(e,r,n){var i,u,d,h,p,c;if(this.editor){var l=this.getEditorSelection(),o=!l&&e,s=l&&!e;We.default(e,l)||(this.selection=e,(u=(i=this.props).onChangeSelection)===null||u===void 0||u.call(i,e,r,n),o?(h=(d=this.props).onFocus)===null||h===void 0||h.call(d,e,r,n):s&&((c=(p=this.props).onBlur)===null||c===void 0||c.call(p,l,r,n)))}},t.prototype.focus=function(){this.editor&&this.editor.focus()},t.prototype.blur=function(){this.editor&&(this.selection=null,this.editor.blur())},t.displayName="React Quill",t.Quill=Nr.default,t.defaultProps={theme:"snow",modules:{},readOnly:!1},t}(Oe.default.Component);function jr(a){Promise.resolve().then(a)}var Ec=Oc;const Tc=dt(Ec);const Ac="modulepreload",kc=function(a){return"/"+a},Rr={},wt=function(t,e,r){if(!e||e.length===0)return t();const n=document.getElementsByTagName("link");return Promise.all(e.map(i=>{if(i=kc(i),i in Rr)return;Rr[i]=!0;const u=i.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(!!r)for(let c=n.length-1;c>=0;c--){const l=n[c];if(l.href===i&&(!u||l.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${d}`))return;const p=document.createElement("link");if(p.rel=u?"stylesheet":Ac,u||(p.as="script",p.crossOrigin=""),p.href=i,document.head.appendChild(p),u)return new Promise((c,l)=>{p.addEventListener("load",c),p.addEventListener("error",()=>l(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>t()).catch(i=>{const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=i,window.dispatchEvent(u),!u.defaultPrevented)throw i})};var Sc=globalThis&&globalThis.__awaiter||function(a,t,e,r){function n(i){return i instanceof e?i:new e(function(u){u(i)})}return new(e||(e=Promise))(function(i,u){function d(c){try{p(r.next(c))}catch(l){u(l)}}function h(c){try{p(r.throw(c))}catch(l){u(l)}}function p(c){c.done?i(c.value):n(c.value).then(d,h)}p((r=r.apply(a,t||[])).next())})};const xc=a=>{let t;return a?t=a:typeof fetch>"u"?t=(...e)=>Sc(void 0,void 0,void 0,function*(){return yield(yield wt(()=>Promise.resolve().then(()=>rr),void 0)).fetch(...e)}):t=fetch,(...e)=>t(...e)};class Yt extends Error{constructor(t,e="FunctionsError",r){super(t),this.name=e,this.context=r}}class Pc extends Yt{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Nc extends Yt{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class jc extends Yt{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Rc=globalThis&&globalThis.__awaiter||function(a,t,e,r){function n(i){return i instanceof e?i:new e(function(u){u(i)})}return new(e||(e=Promise))(function(i,u){function d(c){try{p(r.next(c))}catch(l){u(l)}}function h(c){try{p(r.throw(c))}catch(l){u(l)}}function p(c){c.done?i(c.value):n(c.value).then(d,h)}p((r=r.apply(a,t||[])).next())})};class Lc{constructor(t,{headers:e={},customFetch:r}={}){this.url=t,this.headers=e,this.fetch=xc(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,e={}){var r;return Rc(this,void 0,void 0,function*(){try{const{headers:n,method:i,body:u}=e;let d={},h;u&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&(typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(d["Content-Type"]="application/octet-stream",h=u):typeof u=="string"?(d["Content-Type"]="text/plain",h=u):typeof FormData<"u"&&u instanceof FormData?h=u:(d["Content-Type"]="application/json",h=JSON.stringify(u)));const p=yield this.fetch(`${this.url}/${t}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},d),this.headers),n),body:h}).catch(s=>{throw new Pc(s)}),c=p.headers.get("x-relay-error");if(c&&c==="true")throw new Nc(p);if(!p.ok)throw new jc(p);let l=((r=p.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),o;return l==="application/json"?o=yield p.json():l==="application/octet-stream"?o=yield p.blob():l==="multipart/form-data"?o=yield p.formData():o=yield p.text(),{data:o,error:null}}catch(n){return{data:null,error:n}}})}}var Bt={exports:{}};(function(a,t){var e=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof pe<"u")return pe;throw new Error("unable to locate global object")},r=e();a.exports=t=r.fetch,r.fetch&&(t.default=r.fetch.bind(r)),t.Headers=r.Headers,t.Request=r.Request,t.Response=r.Response})(Bt,Bt.exports);var vn=Bt.exports;const pn=dt(vn),Ic=Jr({__proto__:null,default:pn},[vn]);class Cc{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=pn:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}then(t,e){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let n=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var u,d,h;let p=null,c=null,l=null,o=i.status,s=i.statusText;if(i.ok){if(this.method!=="HEAD"){const v=await i.text();v===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?c=v:c=JSON.parse(v))}const g=(u=this.headers.Prefer)===null||u===void 0?void 0:u.match(/count=(exact|planned|estimated)/),m=(d=i.headers.get("content-range"))===null||d===void 0?void 0:d.split("/");g&&m&&m.length>1&&(l=parseInt(m[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(c)&&(c.length>1?(p={code:"PGRST116",details:`Results contain ${c.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},c=null,l=null,o=406,s="Not Acceptable"):c.length===1?c=c[0]:c=null)}else{const g=await i.text();try{p=JSON.parse(g),Array.isArray(p)&&i.status===404&&(c=[],p=null,o=200,s="OK")}catch{i.status===404&&g===""?(o=204,s="No Content"):p={message:g}}if(p&&this.isMaybeSingle&&(!((h=p?.details)===null||h===void 0)&&h.includes("Results contain 0 rows"))&&(p=null,o=200,s="OK"),p&&this.shouldThrowOnError)throw p}return{error:p,data:c,count:l,status:o,statusText:s}});return this.shouldThrowOnError||(n=n.catch(i=>{var u,d,h;return{error:{message:`${(u=i?.name)!==null&&u!==void 0?u:"FetchError"}: ${i?.message}`,details:`${(d=i?.stack)!==null&&d!==void 0?d:""}`,hint:"",code:`${(h=i?.code)!==null&&h!==void 0?h:""}`},data:null,count:null,status:0,statusText:""}})),n.then(t,e)}}class $c extends Cc{select(t){let e=!1;const r=(t??"*").split("").map(n=>/\s/.test(n)&&!e?"":(n==='"'&&(e=!e),n)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:e=!0,nullsFirst:r,foreignTable:n}={}){const i=n?`${n}.order`:"order",u=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${u?`${u},`:""}${t}.${e?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e}={}){const r=typeof e>"u"?"limit":`${e}.limit`;return this.url.searchParams.set(r,`${t}`),this}range(t,e,{foreignTable:r}={}){const n=typeof r>"u"?"offset":`${r}.offset`,i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${t}`),this.url.searchParams.set(i,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:e=!1,settings:r=!1,buffers:n=!1,wal:i=!1,format:u="text"}={}){const d=[t?"analyze":null,e?"verbose":null,r?"settings":null,n?"buffers":null,i?"wal":null].filter(Boolean).join("|"),h=this.headers.Accept;return this.headers.Accept=`application/vnd.pgrst.plan+${u}; for="${h}"; options=${d};`,u==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}class qe extends $c{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}in(t,e){const r=e.map(n=>typeof n=="string"&&new RegExp("[,()]").test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:r,type:n}={}){let i="";n==="plain"?i="pl":n==="phrase"?i="ph":n==="websearch"&&(i="w");const u=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${i}fts${u}.${e}`),this}match(t){return Object.entries(t).forEach(([e,r])=>{this.url.searchParams.append(e,`eq.${r}`)}),this}not(t,e,r){return this.url.searchParams.append(t,`not.${e}.${r}`),this}or(t,{foreignTable:e}={}){const r=e?`${e}.or`:"or";return this.url.searchParams.append(r,`(${t})`),this}filter(t,e,r){return this.url.searchParams.append(t,`${e}.${r}`),this}}class Dc{constructor(t,{headers:e={},schema:r,fetch:n}){this.url=t,this.headers=e,this.schema=r,this.fetch=n}select(t,{head:e=!1,count:r}={}){const n=e?"HEAD":"GET";let i=!1;const u=(t??"*").split("").map(d=>/\s/.test(d)&&!i?"":(d==='"'&&(i=!i),d)).join("");return this.url.searchParams.set("select",u),r&&(this.headers.Prefer=`count=${r}`),new qe({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:e,defaultToNull:r=!0}={}){const n="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),e&&i.push(`count=${e}`),r||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(t)){const u=t.reduce((d,h)=>d.concat(Object.keys(h)),[]);if(u.length>0){const d=[...new Set(u)].map(h=>`"${h}"`);this.url.searchParams.set("columns",d.join(","))}}return new qe({method:n,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:e,ignoreDuplicates:r=!1,count:n,defaultToNull:i=!0}={}){const u="POST",d=[`resolution=${r?"ignore":"merge"}-duplicates`];if(e!==void 0&&this.url.searchParams.set("on_conflict",e),this.headers.Prefer&&d.push(this.headers.Prefer),n&&d.push(`count=${n}`),i||d.push("missing=default"),this.headers.Prefer=d.join(","),Array.isArray(t)){const h=t.reduce((p,c)=>p.concat(Object.keys(c)),[]);if(h.length>0){const p=[...new Set(h)].map(c=>`"${c}"`);this.url.searchParams.set("columns",p.join(","))}}return new qe({method:u,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:e}={}){const r="PATCH",n=[];return this.headers.Prefer&&n.push(this.headers.Prefer),e&&n.push(`count=${e}`),this.headers.Prefer=n.join(","),new qe({method:r,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const e="DELETE",r=[];return t&&r.push(`count=${t}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new qe({method:e,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}const qc="1.8.4",Mc={"X-Client-Info":`postgrest-js/${qc}`};class Xt{constructor(t,{headers:e={},schema:r,fetch:n}={}){this.url=t,this.headers=Object.assign(Object.assign({},Mc),e),this.schemaName=r,this.fetch=n}from(t){const e=new URL(`${this.url}/${t}`);return new Dc(e,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new Xt(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,e={},{head:r=!1,count:n}={}){let i;const u=new URL(`${this.url}/rpc/${t}`);let d;r?(i="HEAD",Object.entries(e).forEach(([p,c])=>{u.searchParams.append(p,`${c}`)})):(i="POST",d=e);const h=Object.assign({},this.headers);return n&&(h.Prefer=`count=${n}`),new qe({method:i,url:u,headers:h,schema:this.schemaName,body:d,fetch:this.fetch,allowEmpty:!1})}}var St,Lr;function Bc(){if(Lr)return St;Lr=1;var a=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};return St=function(){if(this)return this;if(typeof globalThis=="object"&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return a()}try{return __global__||a()}finally{delete Object.prototype.__global__}}(),St}const Uc="websocket",Fc="Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.",Hc=["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],zc="Brian McKelvey <theturtle32@gmail.com> (https://github.com/theturtle32)",Kc=["Iñaki Baz Castillo <ibc@aliax.net> (http://dev.sipdoc.net)"],Gc="1.0.34",Vc={type:"git",url:"https://github.com/theturtle32/WebSocket-Node.git"},Wc="https://github.com/theturtle32/WebSocket-Node",Jc={node:">=4.0.0"},Zc={bufferutil:"^4.0.1",debug:"^2.2.0","es5-ext":"^0.10.50","typedarray-to-buffer":"^3.1.5","utf-8-validate":"^5.0.2",yaeti:"^0.0.6"},Yc={"buffer-equal":"^1.0.0",gulp:"^4.0.2","gulp-jshint":"^2.0.4","jshint-stylish":"^2.2.1",jshint:"^2.0.0",tape:"^4.9.1"},Xc={verbose:!1},Qc={test:"tape test/unit/*.js",gulp:"gulp"},ef="index",tf={lib:"./lib"},rf="lib/browser.js",nf="Apache-2.0",of={name:Uc,description:Fc,keywords:Hc,author:zc,contributors:Kc,version:Gc,repository:Vc,homepage:Wc,engines:Jc,dependencies:Zc,devDependencies:Yc,config:Xc,scripts:Qc,main:ef,directories:tf,browser:rf,license:nf};var af=of.version,Le;if(typeof globalThis=="object")Le=globalThis;else try{Le=Bc()}catch{}finally{if(!Le&&typeof window<"u"&&(Le=window),!Le)throw new Error("Could not determine global this")}var rt=Le.WebSocket||Le.MozWebSocket,sf=af;function yn(a,t){var e;return t?e=new rt(a,t):e=new rt(a),e}rt&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach(function(a){Object.defineProperty(yn,a,{get:function(){return rt[a]}})});var lf={w3cwebsocket:rt?yn:null,version:sf};const uf="2.7.4",cf={"X-Client-Info":`realtime-js/${uf}`},ff="1.0.0",gn=1e4,hf=1e3;var Qe;(function(a){a[a.connecting=0]="connecting",a[a.open=1]="open",a[a.closing=2]="closing",a[a.closed=3]="closed"})(Qe||(Qe={}));var ge;(function(a){a.closed="closed",a.errored="errored",a.joined="joined",a.joining="joining",a.leaving="leaving"})(ge||(ge={}));var we;(function(a){a.close="phx_close",a.error="phx_error",a.join="phx_join",a.reply="phx_reply",a.leave="phx_leave",a.access_token="access_token"})(we||(we={}));var Ut;(function(a){a.websocket="websocket"})(Ut||(Ut={}));var Ie;(function(a){a.Connecting="connecting",a.Open="open",a.Closing="closing",a.Closed="closed"})(Ie||(Ie={}));class mn{constructor(t,e){this.callback=t,this.timerCalc=e,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=e}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}class df{constructor(){this.HEADER_LENGTH=1}decode(t,e){return t.constructor===ArrayBuffer?e(this._binaryDecode(t)):e(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const e=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,e,r)}_decodeBroadcast(t,e,r){const n=e.getUint8(1),i=e.getUint8(2);let u=this.HEADER_LENGTH+2;const d=r.decode(t.slice(u,u+n));u=u+n;const h=r.decode(t.slice(u,u+i));u=u+i;const p=JSON.parse(r.decode(t.slice(u,t.byteLength)));return{ref:null,topic:d,event:h,payload:p}}}class xt{constructor(t,e,r={},n=gn){this.channel=t,this.event=e,this.payload=r,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null,this.rateLimited=!1}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){if(this._hasReceived("timeout"))return;this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()})==="rate limited"&&(this.rateLimited=!0)}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,e){var r;return this._hasReceived(t)&&e((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:e}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,e){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:e})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:e}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(e))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Ir;(function(a){a.SYNC="sync",a.JOIN="join",a.LEAVE="leave"})(Ir||(Ir={}));class et{constructor(t,e){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=e?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},n=>{const{onJoin:i,onLeave:u,onSync:d}=this.caller;this.joinRef=this.channel._joinRef(),this.state=et.syncState(this.state,n,i,u),this.pendingDiffs.forEach(h=>{this.state=et.syncDiff(this.state,h,i,u)}),this.pendingDiffs=[],d()}),this.channel._on(r.diff,{},n=>{const{onJoin:i,onLeave:u,onSync:d}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=et.syncDiff(this.state,n,i,u),d())}),this.onJoin((n,i,u)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:i,newPresences:u})}),this.onLeave((n,i,u)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:i,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,e,r,n){const i=this.cloneDeep(t),u=this.transformState(e),d={},h={};return this.map(i,(p,c)=>{u[p]||(h[p]=c)}),this.map(u,(p,c)=>{const l=i[p];if(l){const o=c.map(m=>m.presence_ref),s=l.map(m=>m.presence_ref),b=c.filter(m=>s.indexOf(m.presence_ref)<0),g=l.filter(m=>o.indexOf(m.presence_ref)<0);b.length>0&&(d[p]=b),g.length>0&&(h[p]=g)}else d[p]=c}),this.syncDiff(i,{joins:d,leaves:h},r,n)}static syncDiff(t,e,r,n){const{joins:i,leaves:u}={joins:this.transformState(e.joins),leaves:this.transformState(e.leaves)};return r||(r=()=>{}),n||(n=()=>{}),this.map(i,(d,h)=>{var p;const c=(p=t[d])!==null&&p!==void 0?p:[];if(t[d]=this.cloneDeep(h),c.length>0){const l=t[d].map(s=>s.presence_ref),o=c.filter(s=>l.indexOf(s.presence_ref)<0);t[d].unshift(...o)}r(d,c,h)}),this.map(u,(d,h)=>{let p=t[d];if(!p)return;const c=h.map(l=>l.presence_ref);p=p.filter(l=>c.indexOf(l.presence_ref)<0),t[d]=p,n(d,p,h),p.length===0&&delete t[d]}),t}static map(t,e){return Object.getOwnPropertyNames(t).map(r=>e(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((e,r)=>{const n=t[r];return"metas"in n?e[r]=n.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):e[r]=n,e},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var le;(function(a){a.abstime="abstime",a.bool="bool",a.date="date",a.daterange="daterange",a.float4="float4",a.float8="float8",a.int2="int2",a.int4="int4",a.int4range="int4range",a.int8="int8",a.int8range="int8range",a.json="json",a.jsonb="jsonb",a.money="money",a.numeric="numeric",a.oid="oid",a.reltime="reltime",a.text="text",a.time="time",a.timestamp="timestamp",a.timestamptz="timestamptz",a.timetz="timetz",a.tsrange="tsrange",a.tstzrange="tstzrange"})(le||(le={}));const Cr=(a,t,e={})=>{var r;const n=(r=e.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(t).reduce((i,u)=>(i[u]=vf(u,a,t,n),i),{})},vf=(a,t,e,r)=>{const n=t.find(d=>d.name===a),i=n?.type,u=e[a];return i&&!r.includes(i)?bn(i,u):Ft(u)},bn=(a,t)=>{if(a.charAt(0)==="_"){const e=a.slice(1,a.length);return mf(t,e)}switch(a){case le.bool:return pf(t);case le.float4:case le.float8:case le.int2:case le.int4:case le.int8:case le.numeric:case le.oid:return yf(t);case le.json:case le.jsonb:return gf(t);case le.timestamp:return bf(t);case le.abstime:case le.date:case le.daterange:case le.int4range:case le.int8range:case le.money:case le.reltime:case le.text:case le.time:case le.timestamptz:case le.timetz:case le.tsrange:case le.tstzrange:return Ft(t);default:return Ft(t)}},Ft=a=>a,pf=a=>{switch(a){case"t":return!0;case"f":return!1;default:return a}},yf=a=>{if(typeof a=="string"){const t=parseFloat(a);if(!Number.isNaN(t))return t}return a},gf=a=>{if(typeof a=="string")try{return JSON.parse(a)}catch(t){return console.log(`JSON parse error: ${t}`),a}return a},mf=(a,t)=>{if(typeof a!="string")return a;const e=a.length-1,r=a[e];if(a[0]==="{"&&r==="}"){let i;const u=a.slice(1,e);try{i=JSON.parse("["+u+"]")}catch{i=u?u.split(","):[]}return i.map(d=>bn(t,d))}return a},bf=a=>typeof a=="string"?a.replace(" ","T"):a;var $r=globalThis&&globalThis.__awaiter||function(a,t,e,r){function n(i){return i instanceof e?i:new e(function(u){u(i)})}return new(e||(e=Promise))(function(i,u){function d(c){try{p(r.next(c))}catch(l){u(l)}}function h(c){try{p(r.throw(c))}catch(l){u(l)}}function p(c){c.done?i(c.value):n(c.value).then(d,h)}p((r=r.apply(a,t||[])).next())})},Dr;(function(a){a.ALL="*",a.INSERT="INSERT",a.UPDATE="UPDATE",a.DELETE="DELETE"})(Dr||(Dr={}));var qr;(function(a){a.BROADCAST="broadcast",a.PRESENCE="presence",a.POSTGRES_CHANGES="postgres_changes"})(qr||(qr={}));var Mr;(function(a){a.SUBSCRIBED="SUBSCRIBED",a.TIMED_OUT="TIMED_OUT",a.CLOSED="CLOSED",a.CHANNEL_ERROR="CHANNEL_ERROR"})(Mr||(Mr={}));class Qt{constructor(t,e={config:{}},r){this.topic=t,this.params=e,this.socket=r,this.bindings={},this.state=ge.closed,this.joinedOnce=!1,this.pushBuffer=[],this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""}},e.config),this.timeout=this.socket.timeout,this.joinPush=new xt(this,we.join,this.params,this.timeout),this.rejoinTimer=new mn(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ge.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ge.closed,this.socket._remove(this)}),this._onError(n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=ge.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ge.errored,this.rejoinTimer.scheduleTimeout())}),this._on(we.reply,{},(n,i)=>{this._trigger(this._replyEventName(i),n)}),this.presence=new et(this)}subscribe(t,e=this.timeout){var r,n;if(this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:u}}=this.params;this._onError(p=>t&&t("CHANNEL_ERROR",p)),this._onClose(()=>t&&t("CLOSED"));const d={},h={broadcast:i,presence:u,postgres_changes:(n=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(p=>p.filter))!==null&&n!==void 0?n:[]};this.socket.accessToken&&(d.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:h},d)),this.joinedOnce=!0,this._rejoin(e),this.joinPush.receive("ok",({postgres_changes:p})=>{var c;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),p===void 0){t&&t("SUBSCRIBED");return}else{const l=this.bindings.postgres_changes,o=(c=l?.length)!==null&&c!==void 0?c:0,s=[];for(let b=0;b<o;b++){const g=l[b],{filter:{event:m,schema:v,table:y,filter:_}}=g,f=p&&p[b];if(f&&f.event===m&&f.schema===v&&f.table===y&&f.filter===_)s.push(Object.assign(Object.assign({},g),{id:f.id}));else{this.unsubscribe(),t&&t("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=s,t&&t("SUBSCRIBED");return}}).receive("error",p=>{t&&t("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{t&&t("TIMED_OUT")})}return this}presenceState(){return this.presence.state}track(t,e={}){return $r(this,void 0,void 0,function*(){return yield this.send({type:"presence",event:"track",payload:t},e.timeout||this.timeout)})}untrack(t={}){return $r(this,void 0,void 0,function*(){return yield this.send({type:"presence",event:"untrack"},t)})}on(t,e,r){return this._on(t,e,r)}send(t,e={}){return new Promise(r=>{var n,i,u;const d=this._push(t.type,t,e.timeout||this.timeout);d.rateLimited&&r("rate limited"),t.type==="broadcast"&&!(!((u=(i=(n=this.params)===null||n===void 0?void 0:n.config)===null||i===void 0?void 0:i.broadcast)===null||u===void 0)&&u.ack)&&r("ok"),d.receive("ok",()=>r("ok")),d.receive("timeout",()=>r("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=ge.leaving;const e=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(we.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const n=new xt(this,we.leave,{},t);n.receive("ok",()=>{e(),r("ok")}).receive("timeout",()=>{e(),r("timed out")}).receive("error",()=>{r("error")}),n.send(),this._canPush()||n.trigger("ok",{})})}_push(t,e,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new xt(this,t,e,r);return this._canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}_onMessage(t,e,r){return e}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,e,r){var n,i;const u=t.toLocaleLowerCase(),{close:d,error:h,leave:p,join:c}=we;if(r&&[d,h,p,c].indexOf(u)>=0&&r!==this._joinRef())return;let o=this._onMessage(u,e,r);if(e&&!o)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(s=>{var b,g,m;return((b=s.filter)===null||b===void 0?void 0:b.event)==="*"||((m=(g=s.filter)===null||g===void 0?void 0:g.event)===null||m===void 0?void 0:m.toLocaleLowerCase())===u}).map(s=>s.callback(o,r)):(i=this.bindings[u])===null||i===void 0||i.filter(s=>{var b,g,m,v,y,_;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in s){const f=s.id,w=(b=s.filter)===null||b===void 0?void 0:b.event;return f&&((g=e.ids)===null||g===void 0?void 0:g.includes(f))&&(w==="*"||w?.toLocaleLowerCase()===((m=e.data)===null||m===void 0?void 0:m.type.toLocaleLowerCase()))}else{const f=(y=(v=s?.filter)===null||v===void 0?void 0:v.event)===null||y===void 0?void 0:y.toLocaleLowerCase();return f==="*"||f===((_=e?.event)===null||_===void 0?void 0:_.toLocaleLowerCase())}else return s.type.toLocaleLowerCase()===u}).map(s=>{if(typeof o=="object"&&"ids"in o){const b=o.data,{schema:g,table:m,commit_timestamp:v,type:y,errors:_}=b;o=Object.assign(Object.assign({},{schema:g,table:m,commit_timestamp:v,eventType:y,new:{},old:{},errors:_}),this._getPayloadRecords(b))}s.callback(o,r)})}_isClosed(){return this.state===ge.closed}_isJoined(){return this.state===ge.joined}_isJoining(){return this.state===ge.joining}_isLeaving(){return this.state===ge.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,e,r){const n=t.toLocaleLowerCase(),i={type:n,filter:e,callback:r};return this.bindings[n]?this.bindings[n].push(i):this.bindings[n]=[i],this}_off(t,e){const r=t.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(n=>{var i;return!(((i=n.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&Qt.isEqual(n.filter,e))}),this}static isEqual(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const r in t)if(t[r]!==e[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(we.close,{},t)}_onError(t){this._on(we.error,{},e=>t(e))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ge.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const e={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(e.new=Cr(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(e.old=Cr(t.columns,t.old_record)),e}}var Pt=globalThis&&globalThis.__awaiter||function(a,t,e,r){function n(i){return i instanceof e?i:new e(function(u){u(i)})}return new(e||(e=Promise))(function(i,u){function d(c){try{p(r.next(c))}catch(l){u(l)}}function h(c){try{p(r.throw(c))}catch(l){u(l)}}function p(c){c.done?i(c.value):n(c.value).then(d,h)}p((r=r.apply(a,t||[])).next())})};const _f=()=>{};class wf{constructor(t,e){var r,n;this.accessToken=null,this.channels=[],this.endPoint="",this.headers=cf,this.params={},this.timeout=gn,this.transport=lf.w3cwebsocket,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=_f,this.conn=null,this.sendBuffer=[],this.serializer=new df,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.eventsPerSecondLimitMs=100,this.inThrottle=!1,this.endPoint=`${t}/${Ut.websocket}`,e?.params&&(this.params=e.params),e?.headers&&(this.headers=Object.assign(Object.assign({},this.headers),e.headers)),e?.timeout&&(this.timeout=e.timeout),e?.logger&&(this.logger=e.logger),e?.transport&&(this.transport=e.transport),e?.heartbeatIntervalMs&&(this.heartbeatIntervalMs=e.heartbeatIntervalMs);const i=(r=e?.params)===null||r===void 0?void 0:r.eventsPerSecond;i&&(this.eventsPerSecondLimitMs=Math.floor(1e3/i));const u=(n=e?.params)===null||n===void 0?void 0:n.apikey;u&&(this.accessToken=u),this.reconnectAfterMs=e?.reconnectAfterMs?e.reconnectAfterMs:d=>[1e3,2e3,5e3,1e4][d-1]||1e4,this.encode=e?.encode?e.encode:(d,h)=>h(JSON.stringify(d)),this.decode=e?.decode?e.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new mn(()=>Pt(this,void 0,void 0,function*(){this.disconnect(),this.connect()}),this.reconnectAfterMs)}connect(){this.conn||(this.conn=new this.transport(this._endPointURL(),[],null,this.headers),this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t)))}disconnect(t,e){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,e??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}removeChannel(t){return Pt(this,void 0,void 0,function*(){const e=yield t.unsubscribe();return this.channels.length===0&&this.disconnect(),e})}removeAllChannels(){return Pt(this,void 0,void 0,function*(){const t=yield Promise.all(this.channels.map(e=>e.unsubscribe()));return this.disconnect(),t})}log(t,e,r){this.logger(t,e,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Qe.connecting:return Ie.Connecting;case Qe.open:return Ie.Open;case Qe.closing:return Ie.Closing;default:return Ie.Closed}}isConnected(){return this.connectionState()===Ie.Open}channel(t,e={config:{}}){this.isConnected()||this.connect();const r=new Qt(`realtime:${t}`,e,this);return this.channels.push(r),r}push(t){const{topic:e,event:r,payload:n,ref:i}=t;let u=()=>{this.encode(t,d=>{var h;(h=this.conn)===null||h===void 0||h.send(d)})};if(this.log("push",`${e} ${r} (${i})`,n),this.isConnected())if(["broadcast","presence","postgres_changes"].includes(r)){if(this._throttle(u)())return"rate limited"}else u();else this.sendBuffer.push(u)}setAuth(t){this.accessToken=t,this.channels.forEach(e=>{t&&e.updateJoinPayload({access_token:t}),e.joinedOnce&&e._isJoined()&&e._push(we.access_token,{access_token:t})})}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let e=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));e&&(this.log("transport",`leaving duplicate topic "${t}"`),e.unsubscribe())}_remove(t){this.channels=this.channels.filter(e=>e._joinRef()!==t._joinRef())}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:ff}))}_onConnMessage(t){this.decode(t.data,e=>{let{topic:r,event:n,payload:i,ref:u}=e;(u&&u===this.pendingHeartbeatRef||n===i?.type)&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${r} ${n} ${u&&"("+u+")"||""}`,i),this.channels.filter(d=>d._isMember(r)).forEach(d=>d._trigger(n,i,u)),this.stateChangeCallbacks.message.forEach(d=>d(e))})}_onConnOpen(){this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach(t=>t())}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(e=>e(t))}_onConnError(t){this.log("transport",t.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(e=>e(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(we.error))}_appendParams(t,e){if(Object.keys(e).length===0)return t;const r=t.match(/\?/)?"&":"?",n=new URLSearchParams(e);return`${t}${r}${n}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_sendHeartbeat(){var t;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(t=this.conn)===null||t===void 0||t.close(hf,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}_throttle(t,e=this.eventsPerSecondLimitMs){return()=>this.inThrottle?!0:(t(),e>0&&(this.inThrottle=!0,setTimeout(()=>{this.inThrottle=!1},e)),!1)}}class er extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function ve(a){return typeof a=="object"&&a!==null&&"__isStorageError"in a}class Of extends er{constructor(t,e){super(t),this.name="StorageApiError",this.status=e}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Br extends er{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}}var _n=globalThis&&globalThis.__awaiter||function(a,t,e,r){function n(i){return i instanceof e?i:new e(function(u){u(i)})}return new(e||(e=Promise))(function(i,u){function d(c){try{p(r.next(c))}catch(l){u(l)}}function h(c){try{p(r.throw(c))}catch(l){u(l)}}function p(c){c.done?i(c.value):n(c.value).then(d,h)}p((r=r.apply(a,t||[])).next())})};const wn=a=>{let t;return a?t=a:typeof fetch>"u"?t=(...e)=>_n(void 0,void 0,void 0,function*(){return yield(yield wt(()=>Promise.resolve().then(()=>rr),void 0)).fetch(...e)}):t=fetch,(...e)=>t(...e)},Ef=()=>_n(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield wt(()=>Promise.resolve().then(()=>rr),void 0)).Response:Response});var Ke=globalThis&&globalThis.__awaiter||function(a,t,e,r){function n(i){return i instanceof e?i:new e(function(u){u(i)})}return new(e||(e=Promise))(function(i,u){function d(c){try{p(r.next(c))}catch(l){u(l)}}function h(c){try{p(r.throw(c))}catch(l){u(l)}}function p(c){c.done?i(c.value):n(c.value).then(d,h)}p((r=r.apply(a,t||[])).next())})};const Nt=a=>a.msg||a.message||a.error_description||a.error||JSON.stringify(a),Tf=(a,t)=>Ke(void 0,void 0,void 0,function*(){const e=yield Ef();a instanceof e?a.json().then(r=>{t(new Of(Nt(r),a.status||500))}).catch(r=>{t(new Br(Nt(r),r))}):t(new Br(Nt(a),a))}),Af=(a,t,e,r)=>{const n={method:a,headers:t?.headers||{}};return a==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json"},t?.headers),n.body=JSON.stringify(r),Object.assign(Object.assign({},n),e))};function Ot(a,t,e,r,n,i){return Ke(this,void 0,void 0,function*(){return new Promise((u,d)=>{a(e,Af(t,r,n,i)).then(h=>{if(!h.ok)throw h;return r?.noResolveJson?h:h.json()}).then(h=>u(h)).catch(h=>Tf(h,d))})})}function Ht(a,t,e,r){return Ke(this,void 0,void 0,function*(){return Ot(a,"GET",t,e,r)})}function xe(a,t,e,r,n){return Ke(this,void 0,void 0,function*(){return Ot(a,"POST",t,r,n,e)})}function kf(a,t,e,r,n){return Ke(this,void 0,void 0,function*(){return Ot(a,"PUT",t,r,n,e)})}function On(a,t,e,r,n){return Ke(this,void 0,void 0,function*(){return Ot(a,"DELETE",t,r,n,e)})}var be=globalThis&&globalThis.__awaiter||function(a,t,e,r){function n(i){return i instanceof e?i:new e(function(u){u(i)})}return new(e||(e=Promise))(function(i,u){function d(c){try{p(r.next(c))}catch(l){u(l)}}function h(c){try{p(r.throw(c))}catch(l){u(l)}}function p(c){c.done?i(c.value):n(c.value).then(d,h)}p((r=r.apply(a,t||[])).next())})};const Sf={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Ur={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class xf{constructor(t,e={},r,n){this.url=t,this.headers=e,this.bucketId=r,this.fetch=wn(n)}uploadOrUpdate(t,e,r,n){return be(this,void 0,void 0,function*(){try{let i;const u=Object.assign(Object.assign({},Ur),n),d=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",u.cacheControl),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",u.cacheControl)):(i=r,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=this._removeEmptyFolders(e),p=this._getFinalPath(h),c=yield this.fetch(`${this.url}/object/${p}`,Object.assign({method:t,body:i,headers:d},u?.duplex?{duplex:u.duplex}:{}));return c.ok?{data:{path:h},error:null}:{data:null,error:yield c.json()}}catch(i){if(ve(i))return{data:null,error:i};throw i}})}upload(t,e,r){return be(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,e,r)})}uploadToSignedUrl(t,e,r,n){return be(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),u=this._getFinalPath(i),d=new URL(this.url+`/object/upload/sign/${u}`);d.searchParams.set("token",e);try{let h;const p=Object.assign({upsert:Ur.upsert},n),c=Object.assign(Object.assign({},this.headers),{"x-upsert":String(p.upsert)});typeof Blob<"u"&&r instanceof Blob?(h=new FormData,h.append("cacheControl",p.cacheControl),h.append("",r)):typeof FormData<"u"&&r instanceof FormData?(h=r,h.append("cacheControl",p.cacheControl)):(h=r,c["cache-control"]=`max-age=${p.cacheControl}`,c["content-type"]=p.contentType);const l=yield this.fetch(d.toString(),{method:"PUT",body:h,headers:c});return l.ok?{data:{path:i},error:null}:{data:null,error:yield l.json()}}catch(h){if(ve(h))return{data:null,error:h};throw h}})}createSignedUploadUrl(t){return be(this,void 0,void 0,function*(){try{let e=this._getFinalPath(t);const r=yield xe(this.fetch,`${this.url}/object/upload/sign/${e}`,{},{headers:this.headers}),n=new URL(this.url+r.url),i=n.searchParams.get("token");if(!i)throw new er("No token returned by API");return{data:{signedUrl:n.toString(),path:t,token:i},error:null}}catch(e){if(ve(e))return{data:null,error:e};throw e}})}update(t,e,r){return be(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,e,r)})}move(t,e){return be(this,void 0,void 0,function*(){try{return{data:yield xe(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:e},{headers:this.headers}),error:null}}catch(r){if(ve(r))return{data:null,error:r};throw r}})}copy(t,e){return be(this,void 0,void 0,function*(){try{return{data:{path:(yield xe(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:e},{headers:this.headers})).Key},error:null}}catch(r){if(ve(r))return{data:null,error:r};throw r}})}createSignedUrl(t,e,r){return be(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t),i=yield xe(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:e},r?.transform?{transform:r.transform}:{}),{headers:this.headers});const u=r?.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${u}`)},{data:i,error:null}}catch(n){if(ve(n))return{data:null,error:n};throw n}})}createSignedUrls(t,e,r){return be(this,void 0,void 0,function*(){try{const n=yield xe(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:e,paths:t},{headers:this.headers}),i=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:n.map(u=>Object.assign(Object.assign({},u),{signedUrl:u.signedURL?encodeURI(`${this.url}${u.signedURL}${i}`):null})),error:null}}catch(n){if(ve(n))return{data:null,error:n};throw n}})}download(t,e){return be(this,void 0,void 0,function*(){const n=typeof e?.transform<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString(e?.transform||{}),u=i?`?${i}`:"";try{const d=this._getFinalPath(t);return{data:yield(yield Ht(this.fetch,`${this.url}/${n}/${d}${u}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(d){if(ve(d))return{data:null,error:d};throw d}})}getPublicUrl(t,e){const r=this._getFinalPath(t),n=[],i=e?.download?`download=${e.download===!0?"":e.download}`:"";i!==""&&n.push(i);const d=typeof e?.transform<"u"?"render/image":"object",h=this.transformOptsToQueryString(e?.transform||{});h!==""&&n.push(h);let p=n.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${d}/public/${r}${p}`)}}}remove(t){return be(this,void 0,void 0,function*(){try{return{data:yield On(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(e){if(ve(e))return{data:null,error:e};throw e}})}list(t,e,r){return be(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},Sf),e),{prefix:t||""});return{data:yield xe(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(ve(n))return{data:null,error:n};throw n}})}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}}const Pf="2.5.3",Nf={"X-Client-Info":`storage-js/${Pf}`};var Ce=globalThis&&globalThis.__awaiter||function(a,t,e,r){function n(i){return i instanceof e?i:new e(function(u){u(i)})}return new(e||(e=Promise))(function(i,u){function d(c){try{p(r.next(c))}catch(l){u(l)}}function h(c){try{p(r.throw(c))}catch(l){u(l)}}function p(c){c.done?i(c.value):n(c.value).then(d,h)}p((r=r.apply(a,t||[])).next())})};class jf{constructor(t,e={},r){this.url=t,this.headers=Object.assign(Object.assign({},Nf),e),this.fetch=wn(r)}listBuckets(){return Ce(this,void 0,void 0,function*(){try{return{data:yield Ht(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(ve(t))return{data:null,error:t};throw t}})}getBucket(t){return Ce(this,void 0,void 0,function*(){try{return{data:yield Ht(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(e){if(ve(e))return{data:null,error:e};throw e}})}createBucket(t,e={public:!1}){return Ce(this,void 0,void 0,function*(){try{return{data:yield xe(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(ve(r))return{data:null,error:r};throw r}})}updateBucket(t,e){return Ce(this,void 0,void 0,function*(){try{return{data:yield kf(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(ve(r))return{data:null,error:r};throw r}})}emptyBucket(t){return Ce(this,void 0,void 0,function*(){try{return{data:yield xe(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(e){if(ve(e))return{data:null,error:e};throw e}})}deleteBucket(t){return Ce(this,void 0,void 0,function*(){try{return{data:yield On(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(e){if(ve(e))return{data:null,error:e};throw e}})}}class Rf extends jf{constructor(t,e={},r){super(t,e,r)}from(t){return new xf(this.url,this.headers,t,this.fetch)}}const Lf="2.33.1",If={"X-Client-Info":`supabase-js/${Lf}`};var zt={exports:{}};(function(a,t){var e=typeof self<"u"?self:pe,r=function(){function i(){this.fetch=!1,this.DOMException=e.DOMException}return i.prototype=e,new i}();(function(i){(function(u){var d={searchParams:"URLSearchParams"in i,iterable:"Symbol"in i&&"iterator"in Symbol,blob:"FileReader"in i&&"Blob"in i&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in i,arrayBuffer:"ArrayBuffer"in i};function h(E){return E&&DataView.prototype.isPrototypeOf(E)}if(d.arrayBuffer)var p=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],c=ArrayBuffer.isView||function(E){return E&&p.indexOf(Object.prototype.toString.call(E))>-1};function l(E){if(typeof E!="string"&&(E=String(E)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(E))throw new TypeError("Invalid character in header field name");return E.toLowerCase()}function o(E){return typeof E!="string"&&(E=String(E)),E}function s(E){var j={next:function(){var q=E.shift();return{done:q===void 0,value:q}}};return d.iterable&&(j[Symbol.iterator]=function(){return j}),j}function b(E){this.map={},E instanceof b?E.forEach(function(j,q){this.append(q,j)},this):Array.isArray(E)?E.forEach(function(j){this.append(j[0],j[1])},this):E&&Object.getOwnPropertyNames(E).forEach(function(j){this.append(j,E[j])},this)}b.prototype.append=function(E,j){E=l(E),j=o(j);var q=this.map[E];this.map[E]=q?q+", "+j:j},b.prototype.delete=function(E){delete this.map[l(E)]},b.prototype.get=function(E){return E=l(E),this.has(E)?this.map[E]:null},b.prototype.has=function(E){return this.map.hasOwnProperty(l(E))},b.prototype.set=function(E,j){this.map[l(E)]=o(j)},b.prototype.forEach=function(E,j){for(var q in this.map)this.map.hasOwnProperty(q)&&E.call(j,this.map[q],q,this)},b.prototype.keys=function(){var E=[];return this.forEach(function(j,q){E.push(q)}),s(E)},b.prototype.values=function(){var E=[];return this.forEach(function(j){E.push(j)}),s(E)},b.prototype.entries=function(){var E=[];return this.forEach(function(j,q){E.push([q,j])}),s(E)},d.iterable&&(b.prototype[Symbol.iterator]=b.prototype.entries);function g(E){if(E.bodyUsed)return Promise.reject(new TypeError("Already read"));E.bodyUsed=!0}function m(E){return new Promise(function(j,q){E.onload=function(){j(E.result)},E.onerror=function(){q(E.error)}})}function v(E){var j=new FileReader,q=m(j);return j.readAsArrayBuffer(E),q}function y(E){var j=new FileReader,q=m(j);return j.readAsText(E),q}function _(E){for(var j=new Uint8Array(E),q=new Array(j.length),B=0;B<j.length;B++)q[B]=String.fromCharCode(j[B]);return q.join("")}function f(E){if(E.slice)return E.slice(0);var j=new Uint8Array(E.byteLength);return j.set(new Uint8Array(E)),j.buffer}function w(){return this.bodyUsed=!1,this._initBody=function(E){this._bodyInit=E,E?typeof E=="string"?this._bodyText=E:d.blob&&Blob.prototype.isPrototypeOf(E)?this._bodyBlob=E:d.formData&&FormData.prototype.isPrototypeOf(E)?this._bodyFormData=E:d.searchParams&&URLSearchParams.prototype.isPrototypeOf(E)?this._bodyText=E.toString():d.arrayBuffer&&d.blob&&h(E)?(this._bodyArrayBuffer=f(E.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):d.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(E)||c(E))?this._bodyArrayBuffer=f(E):this._bodyText=E=Object.prototype.toString.call(E):this._bodyText="",this.headers.get("content-type")||(typeof E=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):d.searchParams&&URLSearchParams.prototype.isPrototypeOf(E)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},d.blob&&(this.blob=function(){var E=g(this);if(E)return E;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?g(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(v)}),this.text=function(){var E=g(this);if(E)return E;if(this._bodyBlob)return y(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(_(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},d.formData&&(this.formData=function(){return this.text().then(R)}),this.json=function(){return this.text().then(JSON.parse)},this}var N=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function k(E){var j=E.toUpperCase();return N.indexOf(j)>-1?j:E}function S(E,j){j=j||{};var q=j.body;if(E instanceof S){if(E.bodyUsed)throw new TypeError("Already read");this.url=E.url,this.credentials=E.credentials,j.headers||(this.headers=new b(E.headers)),this.method=E.method,this.mode=E.mode,this.signal=E.signal,!q&&E._bodyInit!=null&&(q=E._bodyInit,E.bodyUsed=!0)}else this.url=String(E);if(this.credentials=j.credentials||this.credentials||"same-origin",(j.headers||!this.headers)&&(this.headers=new b(j.headers)),this.method=k(j.method||this.method||"GET"),this.mode=j.mode||this.mode||null,this.signal=j.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&q)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(q)}S.prototype.clone=function(){return new S(this,{body:this._bodyInit})};function R(E){var j=new FormData;return E.trim().split("&").forEach(function(q){if(q){var B=q.split("="),G=B.shift().replace(/\+/g," "),D=B.join("=").replace(/\+/g," ");j.append(decodeURIComponent(G),decodeURIComponent(D))}}),j}function A(E){var j=new b,q=E.replace(/\r?\n[\t ]+/g," ");return q.split(/\r?\n/).forEach(function(B){var G=B.split(":"),D=G.shift().trim();if(D){var C=G.join(":").trim();j.append(D,C)}}),j}w.call(S.prototype);function O(E,j){j||(j={}),this.type="default",this.status=j.status===void 0?200:j.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in j?j.statusText:"OK",this.headers=new b(j.headers),this.url=j.url||"",this._initBody(E)}w.call(O.prototype),O.prototype.clone=function(){return new O(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new b(this.headers),url:this.url})},O.error=function(){var E=new O(null,{status:0,statusText:""});return E.type="error",E};var T=[301,302,303,307,308];O.redirect=function(E,j){if(T.indexOf(j)===-1)throw new RangeError("Invalid status code");return new O(null,{status:j,headers:{location:E}})},u.DOMException=i.DOMException;try{new u.DOMException}catch{u.DOMException=function(j,q){this.message=j,this.name=q;var B=Error(j);this.stack=B.stack},u.DOMException.prototype=Object.create(Error.prototype),u.DOMException.prototype.constructor=u.DOMException}function P(E,j){return new Promise(function(q,B){var G=new S(E,j);if(G.signal&&G.signal.aborted)return B(new u.DOMException("Aborted","AbortError"));var D=new XMLHttpRequest;function C(){D.abort()}D.onload=function(){var x={status:D.status,statusText:D.statusText,headers:A(D.getAllResponseHeaders()||"")};x.url="responseURL"in D?D.responseURL:x.headers.get("X-Request-URL");var I="response"in D?D.response:D.responseText;q(new O(I,x))},D.onerror=function(){B(new TypeError("Network request failed"))},D.ontimeout=function(){B(new TypeError("Network request failed"))},D.onabort=function(){B(new u.DOMException("Aborted","AbortError"))},D.open(G.method,G.url,!0),G.credentials==="include"?D.withCredentials=!0:G.credentials==="omit"&&(D.withCredentials=!1),"responseType"in D&&d.blob&&(D.responseType="blob"),G.headers.forEach(function(x,I){D.setRequestHeader(I,x)}),G.signal&&(G.signal.addEventListener("abort",C),D.onreadystatechange=function(){D.readyState===4&&G.signal.removeEventListener("abort",C)}),D.send(typeof G._bodyInit>"u"?null:G._bodyInit)})}return P.polyfill=!0,i.fetch||(i.fetch=P,i.Headers=b,i.Request=S,i.Response=O),u.Headers=b,u.Request=S,u.Response=O,u.fetch=P,Object.defineProperty(u,"__esModule",{value:!0}),u})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var n=r;t=n.fetch,t.default=n.fetch,t.fetch=n.fetch,t.Headers=n.Headers,t.Request=n.Request,t.Response=n.Response,a.exports=t})(zt,zt.exports);var tr=zt.exports;const En=dt(tr),rr=Jr({__proto__:null,default:En},[tr]);var Cf=globalThis&&globalThis.__awaiter||function(a,t,e,r){function n(i){return i instanceof e?i:new e(function(u){u(i)})}return new(e||(e=Promise))(function(i,u){function d(c){try{p(r.next(c))}catch(l){u(l)}}function h(c){try{p(r.throw(c))}catch(l){u(l)}}function p(c){c.done?i(c.value):n(c.value).then(d,h)}p((r=r.apply(a,t||[])).next())})};const $f=a=>{let t;return a?t=a:typeof fetch>"u"?t=En:t=fetch,(...e)=>t(...e)},Df=()=>typeof Headers>"u"?tr.Headers:Headers,qf=(a,t,e)=>{const r=$f(e),n=Df();return(i,u)=>Cf(void 0,void 0,void 0,function*(){var d;const h=(d=yield t())!==null&&d!==void 0?d:a;let p=new n(u?.headers);return p.has("apikey")||p.set("apikey",a),p.has("Authorization")||p.set("Authorization",`Bearer ${h}`),r(i,Object.assign(Object.assign({},u),{headers:p}))})};function Mf(a){return a.replace(/\/$/,"")}function Bf(a,t){const{db:e,auth:r,realtime:n,global:i}=a,{db:u,auth:d,realtime:h,global:p}=t;return{db:Object.assign(Object.assign({},u),e),auth:Object.assign(Object.assign({},d),r),realtime:Object.assign(Object.assign({},h),n),global:Object.assign(Object.assign({},p),i)}}function Uf(a){return Math.round(Date.now()/1e3)+a}function Ff(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){const t=Math.random()*16|0;return(a=="x"?t:t&3|8).toString(16)})}const Te=()=>typeof document<"u",je={tested:!1,writable:!1},tt=()=>{if(!Te())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(je.tested)return je.writable;const a=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(a,a),globalThis.localStorage.removeItem(a),je.tested=!0,je.writable=!0}catch{je.tested=!0,je.writable=!1}return je.writable};function jt(a){const t={},e=new URL(a);if(e.hash&&e.hash[0]==="#")try{new URLSearchParams(e.hash.substring(1)).forEach((n,i)=>{t[i]=n})}catch{}return e.searchParams.forEach((r,n)=>{t[n]=r}),t}const Tn=a=>{let t;return a?t=a:typeof fetch>"u"?t=(...e)=>wt(()=>Promise.resolve().then(()=>Ic),void 0).then(({default:r})=>r(...e)):t=fetch,(...e)=>t(...e)},Hf=a=>typeof a=="object"&&a!==null&&"status"in a&&"ok"in a&&"json"in a&&typeof a.json=="function",$e=async(a,t,e)=>{await a.setItem(t,JSON.stringify(e))},at=async(a,t)=>{const e=await a.getItem(t);if(!e)return null;try{return JSON.parse(e)}catch{return e}},Rt=async(a,t)=>{await a.removeItem(t)};function zf(a){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let e="",r,n,i,u,d,h,p,c=0;for(a=a.replace("-","+").replace("_","/");c<a.length;)u=t.indexOf(a.charAt(c++)),d=t.indexOf(a.charAt(c++)),h=t.indexOf(a.charAt(c++)),p=t.indexOf(a.charAt(c++)),r=u<<2|d>>4,n=(d&15)<<4|h>>2,i=(h&3)<<6|p,e=e+String.fromCharCode(r),h!=64&&n!=0&&(e=e+String.fromCharCode(n)),p!=64&&i!=0&&(e=e+String.fromCharCode(i));return e}class Et{constructor(){this.promise=new Et.promiseConstructor((t,e)=>{this.resolve=t,this.reject=e})}}Et.promiseConstructor=Promise;function Fr(a){const t=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,e=a.split(".");if(e.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!t.test(e[1]))throw new Error("JWT is not valid: payload is not in base64url format");const r=e[1];return JSON.parse(zf(r))}async function Kf(a){return await new Promise(t=>{setTimeout(()=>t(null),a)})}function Gf(a,t){return new Promise((r,n)=>{(async()=>{for(let i=0;i<1/0;i++)try{const u=await a(i);if(!t(i,null,u)){r(u);return}}catch(u){if(!t(i,u)){n(u);return}}})()})}function Vf(a){return("0"+a.toString(16)).substr(-2)}function Je(){const t=new Uint32Array(56);if(typeof crypto>"u"){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=e.length;let n="";for(let i=0;i<56;i++)n+=e.charAt(Math.floor(Math.random()*r));return n}return crypto.getRandomValues(t),Array.from(t,Vf).join("")}async function Wf(a){const e=new TextEncoder().encode(a),r=await crypto.subtle.digest("SHA-256",e),n=new Uint8Array(r);return Array.from(n).map(i=>String.fromCharCode(i)).join("")}function Jf(a){return btoa(a).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ze(a){if(typeof crypto>"u")return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),a;const t=await Wf(a);return Jf(t)}class nr extends Error{constructor(t,e){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=e}}function oe(a){return typeof a=="object"&&a!==null&&"__isAuthError"in a}class Zf extends nr{constructor(t,e){super(t,e),this.name="AuthApiError",this.status=e}toJSON(){return{name:this.name,message:this.message,status:this.status}}}function Yf(a){return oe(a)&&a.name==="AuthApiError"}class An extends nr{constructor(t,e){super(t),this.name="AuthUnknownError",this.originalError=e}}class Ge extends nr{constructor(t,e,r){super(t),this.name=e,this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class De extends Ge{constructor(){super("Auth session missing!","AuthSessionMissingError",400)}}class Lt extends Ge{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500)}}class st extends Ge{constructor(t){super(t,"AuthInvalidCredentialsError",400)}}class lt extends Ge{constructor(t,e=null){super(t,"AuthImplicitGrantRedirectError",500),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Hr extends Ge{constructor(t,e=null){super(t,"AuthPKCEGrantCodeExchangeError",500),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Kt extends Ge{constructor(t,e){super(t,"AuthRetryableFetchError",e)}}function zr(a){return oe(a)&&a.name==="AuthRetryableFetchError"}var Xf=globalThis&&globalThis.__rest||function(a,t){var e={};for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&t.indexOf(r)<0&&(e[r]=a[r]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(a);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(a,r[n])&&(e[r[n]]=a[r[n]]);return e};const Xe=a=>a.msg||a.message||a.error_description||a.error||JSON.stringify(a),Qf=[502,503,504];async function Kr(a){if(!Hf(a))throw new Kt(Xe(a),0);if(Qf.includes(a.status))throw new Kt(Xe(a),a.status);let t;try{t=await a.json()}catch(e){throw new An(Xe(e),e)}throw new Zf(Xe(t),a.status||500)}const eh=(a,t,e,r)=>{const n={method:a,headers:t?.headers||{}};return a==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),n.body=JSON.stringify(r),Object.assign(Object.assign({},n),e))};async function ae(a,t,e,r){var n;const i=Object.assign({},r?.headers);r?.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const u=(n=r?.query)!==null&&n!==void 0?n:{};r?.redirectTo&&(u.redirect_to=r.redirectTo);const d=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",h=await th(a,t,e+d,{headers:i,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(h):{data:Object.assign({},h),error:null}}async function th(a,t,e,r,n,i){const u=eh(t,r,n,i);let d;try{d=await a(e,u)}catch(h){throw console.error(h),new Kt(Xe(h),0)}if(d.ok||await Kr(d),r?.noResolveJson)return d;try{return await d.json()}catch(h){await Kr(h)}}function Se(a){var t;let e=null;oh(a)&&(e=Object.assign({},a),a.expires_at||(e.expires_at=Uf(a.expires_in)));const r=(t=a.user)!==null&&t!==void 0?t:a;return{data:{session:e,user:r},error:null}}function Pe(a){var t;return{data:{user:(t=a.user)!==null&&t!==void 0?t:a},error:null}}function rh(a){return{data:a,error:null}}function nh(a){const{action_link:t,email_otp:e,hashed_token:r,redirect_to:n,verification_type:i}=a,u=Xf(a,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),d={action_link:t,email_otp:e,hashed_token:r,redirect_to:n,verification_type:i},h=Object.assign({},u);return{data:{properties:d,user:h},error:null}}function ih(a){return a}function oh(a){return a.access_token&&a.refresh_token&&a.expires_in}var ah=globalThis&&globalThis.__rest||function(a,t){var e={};for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&t.indexOf(r)<0&&(e[r]=a[r]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(a);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(a,r[n])&&(e[r[n]]=a[r[n]]);return e};class sh{constructor({url:t="",headers:e={},fetch:r}){this.url=t,this.headers=e,this.fetch=Tn(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,e="global"){try{return await ae(this.fetch,"POST",`${this.url}/logout?scope=${e}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(oe(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,e={}){try{return await ae(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:e.data},headers:this.headers,redirectTo:e.redirectTo,xform:Pe})}catch(r){if(oe(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:e}=t,r=ah(t,["options"]),n=Object.assign(Object.assign({},r),e);return"newEmail"in r&&(n.new_email=r?.newEmail,delete n.newEmail),await ae(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:nh,redirectTo:e?.redirectTo})}catch(e){if(oe(e))return{data:{properties:null,user:null},error:e};throw e}}async createUser(t){try{return await ae(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Pe})}catch(e){if(oe(e))return{data:{user:null},error:e};throw e}}async listUsers(t){var e,r,n,i,u,d,h;try{const p={nextPage:null,lastPage:0,total:0},c=await ae(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(e=t?.page)===null||e===void 0?void 0:e.toString())!==null&&r!==void 0?r:"",per_page:(i=(n=t?.perPage)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:""},xform:ih});if(c.error)throw c.error;const l=await c.json(),o=(u=c.headers.get("x-total-count"))!==null&&u!==void 0?u:0,s=(h=(d=c.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&h!==void 0?h:[];return s.length>0&&(s.forEach(b=>{const g=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),m=JSON.parse(b.split(";")[1].split("=")[1]);p[`${m}Page`]=g}),p.total=parseInt(o)),{data:Object.assign(Object.assign({},l),p),error:null}}catch(p){if(oe(p))return{data:{users:[]},error:p};throw p}}async getUserById(t){try{return await ae(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Pe})}catch(e){if(oe(e))return{data:{user:null},error:e};throw e}}async updateUserById(t,e){try{return await ae(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:e,headers:this.headers,xform:Pe})}catch(r){if(oe(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,e=!1){try{return await ae(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:e},xform:Pe})}catch(r){if(oe(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){try{const{data:e,error:r}=await ae(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:e,error:r}}catch(e){if(oe(e))return{data:null,error:e};throw e}}async _deleteFactor(t){try{return{data:await ae(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(e){if(oe(e))return{data:null,error:e};throw e}}}const kn="2.51.0",lh="http://localhost:9999",uh="supabase.auth.token",ch={"X-Client-Info":`gotrue-js/${kn}`},Gr=10,Vr={getItem:a=>tt()?globalThis.localStorage.getItem(a):null,setItem:(a,t)=>{tt()&&globalThis.localStorage.setItem(a,t)},removeItem:a=>{tt()&&globalThis.localStorage.removeItem(a)}};function fh(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}globalThis&&tt()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug");class hh extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}fh();const dh={url:lh,storageKey:uh,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:ch,flowType:"implicit",debug:!1},Ye=30*1e3,Wr=3;async function vh(a,t,e){return await e()}class nt{constructor(t){var e;this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.instanceID=nt.nextInstanceID,nt.nextInstanceID+=1,this.instanceID>0&&Te()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},dh),t);if(this.logDebugMessages=r.debug,this.inMemorySession=null,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.persistSession=r.persistSession,this.storage=r.storage||Vr,this.admin=new sh({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=Tn(r.fetch),this.lock=r.lock||vh,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession&&this.storage===Vr&&!tt()&&console.warn(`No storage option exists to persist the session, which may result in unexpected behavior when using auth.
        If you want to set persistSession to true, please provide a storage option or you may set persistSession to false to disable this warning.`),Te()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(n){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",n)}(e=this.broadcastChannel)===null||e===void 0||e.addEventListener("message",async n=>{this._debug("received broadcast notification from other tab or client",n),await this._notifyAllSubscribers(n.data.event,n.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&console.log(`GoTrueClient@${this.instanceID} (${kn}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){try{const t=Te()?await this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",t),t||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:e,error:r}=await this._getSessionFromURL(t);if(r)return this._debug("#_initialize()","error detecting session from URL",r),await this._removeSession(),{error:r};const{session:n,redirectType:i}=e;return this._debug("#_initialize()","detected session in URL",n,"redirect type",i),await this._saveSession(n),setTimeout(async()=>{i==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",n):await this._notifyAllSubscribers("SIGNED_IN",n)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return oe(t)?{error:t}:{error:new An("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signUp(t){var e,r,n;try{await this._removeSession();let i;if("email"in t){const{email:c,password:l,options:o}=t;let s=null,b=null;if(this.flowType==="pkce"){const g=Je();await $e(this.storage,`${this.storageKey}-code-verifier`,g),s=await Ze(g),b=g===s?"plain":"s256"}i=await ae(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:o?.emailRedirectTo,body:{email:c,password:l,data:(e=o?.data)!==null&&e!==void 0?e:{},gotrue_meta_security:{captcha_token:o?.captchaToken},code_challenge:s,code_challenge_method:b},xform:Se})}else if("phone"in t){const{phone:c,password:l,options:o}=t;i=await ae(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:c,password:l,data:(r=o?.data)!==null&&r!==void 0?r:{},channel:(n=o?.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:o?.captchaToken}},xform:Se})}else throw new st("You must provide either an email or phone number and a password");const{data:u,error:d}=i;if(d||!u)return{data:{user:null,session:null},error:d};const h=u.session,p=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",h)),{data:{user:p,session:h},error:null}}catch(i){if(oe(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{await this._removeSession();let e;if("email"in t){const{email:i,password:u,options:d}=t;e=await ae(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:u,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:Se})}else if("phone"in t){const{phone:i,password:u,options:d}=t;e=await ae(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:u,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:Se})}else throw new st("You must provide either an email or phone number and a password");const{data:r,error:n}=e;return n?{data:{user:null,session:null},error:n}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Lt}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:{user:r.user,session:r.session},error:n})}catch(e){if(oe(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithOAuth(t){var e,r,n,i;return await this._removeSession(),await this._handleProviderSignIn(t.provider,{redirectTo:(e=t.options)===null||e===void 0?void 0:e.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(n=t.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async _exchangeCodeForSession(t){const e=await at(this.storage,`${this.storageKey}-code-verifier`),{data:r,error:n}=await ae(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:e},xform:Se});return await Rt(this.storage,`${this.storageKey}-code-verifier`),n?{data:{user:null,session:null},error:n}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Lt}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:r,error:n})}async signInWithIdToken(t){await this._removeSession();try{const{options:e,provider:r,token:n,access_token:i,nonce:u}=t,d=await ae(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:n,access_token:i,nonce:u,gotrue_meta_security:{captcha_token:e?.captchaToken}},xform:Se}),{data:h,error:p}=d;return p?{data:{user:null,session:null},error:p}:!h||!h.session||!h.user?{data:{user:null,session:null},error:new Lt}:(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",h.session)),{data:h,error:p})}catch(e){if(oe(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithOtp(t){var e,r,n,i,u;try{if(await this._removeSession(),"email"in t){const{email:d,options:h}=t;let p=null,c=null;if(this.flowType==="pkce"){const o=Je();await $e(this.storage,`${this.storageKey}-code-verifier`,o),p=await Ze(o),c=o===p?"plain":"s256"}const{error:l}=await ae(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:d,data:(e=h?.data)!==null&&e!==void 0?e:{},create_user:(r=h?.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:h?.captchaToken},code_challenge:p,code_challenge_method:c},redirectTo:h?.emailRedirectTo});return{data:{user:null,session:null},error:l}}if("phone"in t){const{phone:d,options:h}=t,{data:p,error:c}=await ae(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:d,data:(n=h?.data)!==null&&n!==void 0?n:{},create_user:(i=h?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:h?.captchaToken},channel:(u=h?.channel)!==null&&u!==void 0?u:"sms"}});return{data:{user:null,session:null,messageId:p?.message_id},error:c}}throw new st("You must provide either an email or phone number.")}catch(d){if(oe(d))return{data:{user:null,session:null},error:d};throw d}}async verifyOtp(t){var e,r;try{t.type!=="email_change"&&t.type!=="phone_change"&&await this._removeSession();let n,i;"options"in t&&(n=(e=t.options)===null||e===void 0?void 0:e.redirectTo,i=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:u,error:d}=await ae(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:n,xform:Se});if(d)throw d;if(!u)throw new Error("An error occurred on token verification.");const h=u.session,p=u.user;return h?.access_token&&(await this._saveSession(h),await this._notifyAllSubscribers("SIGNED_IN",h)),{data:{user:p,session:h},error:null}}catch(n){if(oe(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithSSO(t){var e,r,n;try{return await this._removeSession(),await ae(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(e=t.options)===null||e===void 0?void 0:e.redirectTo)!==null&&r!==void 0?r:void 0}),!((n=t?.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0}),headers:this.headers,xform:rh})}catch(i){if(oe(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:e},error:r}=t;if(r)throw r;if(!e)throw new De;const{error:n}=await ae(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:e.access_token});return{data:{user:null,session:null},error:n}})}catch(t){if(oe(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{t.type!="email_change"&&t.type!="phone_change"&&await this._removeSession();const e=`${this.url}/resend`;if("email"in t){const{email:r,type:n,options:i}=t,{error:u}=await ae(this.fetch,"POST",e,{headers:this.headers,body:{email:r,type:n,gotrue_meta_security:{captcha_token:i?.captchaToken}},redirectTo:i?.emailRedirectTo});return{data:{user:null,session:null},error:u}}else if("phone"in t){const{phone:r,type:n,options:i}=t,{data:u,error:d}=await ae(this.fetch,"POST",e,{headers:this.headers,body:{phone:r,type:n,gotrue_meta_security:{captcha_token:i?.captchaToken}}});return{data:{user:null,session:null,messageId:u?.message_id},error:d}}throw new st("You must provide either an email or phone number and a type")}catch(e){if(oe(e))return{data:{user:null,session:null},error:e};throw e}}async getSession(){return await this.initializePromise,this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(t,e){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await r,await e()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=e();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const e=await this.__loadSession();return await t(e)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;if(this.persistSession){const i=await at(this.storage,this.storageKey);this._debug("#getSession()","session from storage",i),i!==null&&(this._isValidSession(i)?t=i:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession()))}else t=this.inMemorySession,this._debug("#getSession()","session from memory",t);if(!t)return{data:{session:null},error:null};const e=t.expires_at?t.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${e?"":" not"} expired`,"expires_at",t.expires_at),!e)return{data:{session:t},error:null};const{session:r,error:n}=await this._callRefreshToken(t.refresh_token);return n?{data:{session:null},error:n}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await ae(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Pe}):await this._useSession(async e=>{var r,n;const{data:i,error:u}=e;if(u)throw u;return await ae(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(n=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&n!==void 0?n:void 0,xform:Pe})})}catch(e){if(oe(e))return{data:{user:null},error:e};throw e}}async updateUser(t,e={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,e))}async _updateUser(t,e={}){try{return await this._useSession(async r=>{const{data:n,error:i}=r;if(i)throw i;if(!n.session)throw new De;const u=n.session;let d=null,h=null;if(this.flowType==="pkce"&&t.email!=null){const l=Je();await $e(this.storage,`${this.storageKey}-code-verifier`,l),d=await Ze(l),h=l===d?"plain":"s256"}const{data:p,error:c}=await ae(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:e?.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:d,code_challenge_method:h}),jwt:u.access_token,xform:Pe});if(c)throw c;return u.user=p.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),{data:{user:u.user},error:null}})}catch(r){if(oe(r))return{data:{user:null},error:r};throw r}}_decodeJWT(t){return Fr(t)}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new De;const e=Date.now()/1e3;let r=e,n=!0,i=null;const u=Fr(t.access_token);if(u.exp&&(r=u.exp,n=r<=e),n){const{session:d,error:h}=await this._callRefreshToken(t.refresh_token);if(h)return{data:{user:null,session:null},error:h};if(!d)return{data:{user:null,session:null},error:null};i=d}else{const{data:d,error:h}=await this._getUser(t.access_token);if(h)throw h;i={access_token:t.access_token,refresh_token:t.refresh_token,user:d.user,token_type:"bearer",expires_in:r-e,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(e){if(oe(e))return{data:{session:null,user:null},error:e};throw e}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async e=>{var r;if(!t){const{data:u,error:d}=e;if(d)throw d;t=(r=u.session)!==null&&r!==void 0?r:void 0}if(!t?.refresh_token)throw new De;const{session:n,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(e){if(oe(e))return{data:{user:null,session:null},error:e};throw e}}async _getSessionFromURL(t){try{if(!Te())throw new lt("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new lt("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!t)throw new Hr("Not a valid PKCE flow url.");const e=jt(window.location.href);if(t){if(!e.code)throw new Hr("No code detected.");const{data:y,error:_}=await this._exchangeCodeForSession(e.code);if(_)throw _;const f=new URL(window.location.href);return f.searchParams.delete("code"),window.history.replaceState(window.history.state,"",f.toString()),{data:{session:y.session,redirectType:null},error:null}}if(e.error||e.error_description||e.error_code)throw new lt(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});const{provider_token:r,provider_refresh_token:n,access_token:i,refresh_token:u,expires_in:d,expires_at:h,token_type:p}=e;if(!i||!d||!u||!p)throw new lt("No session defined in URL");const c=Math.round(Date.now()/1e3),l=parseInt(d);let o=c+l;h&&(o=parseInt(h));const s=o-c;s*1e3<=Ye&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${s}s, should have been closer to ${l}s`);const b=o-l;c-b>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",b,o,c):c-b<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clok for skew",b,o,c);const{data:g,error:m}=await this._getUser(i);if(m)throw m;const v={provider_token:r,provider_refresh_token:n,access_token:i,expires_in:l,expires_at:o,refresh_token:u,token_type:p,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:v,redirectType:e.type},error:null}}catch(e){if(oe(e))return{data:{session:null,redirectType:null},error:e};throw e}}_isImplicitGrantFlow(){const t=jt(window.location.href);return!!(Te()&&(t.access_token||t.error_description))}async _isPKCEFlow(){const t=jt(window.location.href),e=await at(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&e)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async e=>{var r;const{data:n,error:i}=e;if(i)return{error:i};const u=(r=n.session)===null||r===void 0?void 0:r.access_token;if(u){const{error:d}=await this.admin.signOut(u,t);if(d&&!(Yf(d)&&(d.status===404||d.status===401)))return{error:d}}return t!=="others"&&(await this._removeSession(),await Rt(this.storage,`${this.storageKey}-code-verifier`),await this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}})}onAuthStateChange(t){const e=Ff(),r={id:e,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",e),this.stateChangeEmitters.delete(e)}};return this._debug("#onAuthStateChange()","registered callback with id",e),this.stateChangeEmitters.set(e,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(e)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async e=>{var r,n;try{const{data:{session:i},error:u}=e;if(u)throw u;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,e={}){let r=null,n=null;if(this.flowType==="pkce"){const i=Je();await $e(this.storage,`${this.storageKey}-code-verifier`,i),r=await Ze(i),n=i===r?"plain":"s256"}try{return await ae(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:n,gotrue_meta_security:{captcha_token:e.captchaToken}},headers:this.headers,redirectTo:e.redirectTo})}catch(i){if(oe(i))return{data:null,error:i};throw i}}async _refreshAccessToken(t){const e=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(e,"begin");try{const r=Date.now();return await Gf(async n=>(await Kf(n*200),this._debug(e,"refreshing attempt",n),await ae(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Se})),(n,i,u)=>u&&u.error&&zr(u.error)&&Date.now()+(n+1)*200-r<Ye)}catch(r){if(this._debug(e,"error",r),oe(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(e,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,e){const r=await this._getUrlForProvider(t,{redirectTo:e.redirectTo,scopes:e.scopes,queryParams:e.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",e,"url",r),Te()&&!e.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t;const e="#_recoverAndRefresh()";this._debug(e,"begin");try{const r=await at(this.storage,this.storageKey);if(this._debug(e,"session from storage",r),!this._isValidSession(r)){this._debug(e,"session is not valid"),r!==null&&await this._removeSession();return}const n=Math.round(Date.now()/1e3),i=((t=r.expires_at)!==null&&t!==void 0?t:1/0)<n+Gr;if(this._debug(e,`session has${i?"":" not"} expired with margin of ${Gr}s`),i){if(this.autoRefreshToken&&r.refresh_token){const{error:u}=await this._callRefreshToken(r.refresh_token);u&&(console.error(u),zr(u)||(this._debug(e,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(e,"error",r),console.error(r);return}finally{this._debug(e,"end")}}async _callRefreshToken(t){var e,r;if(!t)throw new De;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new Et;const{data:i,error:u}=await this._refreshAccessToken(t);if(u)throw u;if(!i.session)throw new De;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const d={session:i.session,error:null};return this.refreshingDeferred.resolve(d),d}catch(i){if(this._debug(n,"error",i),oe(i)){const u={session:null,error:i};return(e=this.refreshingDeferred)===null||e===void 0||e.resolve(u),u}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(t,e,r=!0){const n=`#_notifyAllSubscribers(${t})`;this._debug(n,"begin",e,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:e});const i=[],u=Array.from(this.stateChangeEmitters.values()).map(async d=>{try{await d.callback(t,e)}catch(h){i.push(h)}});if(await Promise.all(u),i.length>0){for(let d=0;d<i.length;d+=1)console.error(i[d]);throw i[0]}}finally{this._debug(n,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.persistSession||(this.inMemorySession=t),this.persistSession&&t.expires_at&&await this._persistSession(t)}_persistSession(t){return this._debug("#_persistSession()",t),$e(this.storage,this.storageKey,t)}async _removeSession(){this._debug("#_removeSession()"),this.persistSession?await Rt(this.storage,this.storageKey):this.inMemorySession=null}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Te()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",t)}catch(e){console.error("removing visibilitychange callback failed",e)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Ye);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async e=>{const{data:{session:r}}=e;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((r.expires_at*1e3-t)/Ye);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${Ye}ms, refresh threshold is ${Wr} ticks`),n<=Wr&&await this._callRefreshToken(r.refresh_token)})}catch(e){console.error("Auto refresh tick failed with error. This is likely a transient error.",e)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof hh)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Te()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const e=`#_onVisibilityChanged(${t})`;this._debug(e,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(e,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,e){const r=[`provider=${encodeURIComponent(t)}`];if(e?.redirectTo&&r.push(`redirect_to=${encodeURIComponent(e.redirectTo)}`),e?.scopes&&r.push(`scopes=${encodeURIComponent(e.scopes)}`),this.flowType==="pkce"){const n=Je();await $e(this.storage,`${this.storageKey}-code-verifier`,n);const i=await Ze(n),u=n===i?"plain":"s256";this._debug("PKCE","code verifier",`${n.substring(0,5)}...`,"code challenge",i,"method",u);const d=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(u)}`});r.push(d.toString())}if(e?.queryParams){const n=new URLSearchParams(e.queryParams);r.push(n.toString())}return`${this.url}/authorize?${r.join("&")}`}async _unenroll(t){try{return await this._useSession(async e=>{var r;const{data:n,error:i}=e;return i?{data:null,error:i}:await ae(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=n?.session)===null||r===void 0?void 0:r.access_token})})}catch(e){if(oe(e))return{data:null,error:e};throw e}}async _enroll(t){try{return await this._useSession(async e=>{var r,n;const{data:i,error:u}=e;if(u)return{data:null,error:u};const{data:d,error:h}=await ae(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:t.friendlyName,factor_type:t.factorType,issuer:t.issuer},headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token});return h?{data:null,error:h}:(!((n=d?.totp)===null||n===void 0)&&n.qr_code&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),{data:d,error:null})})}catch(e){if(oe(e))return{data:null,error:e};throw e}}async _verify(t){try{return await this._useSession(async e=>{var r;const{data:n,error:i}=e;if(i)return{data:null,error:i};const{data:u,error:d}=await ae(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(r=n?.session)===null||r===void 0?void 0:r.access_token});return d?{data:null,error:d}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),{data:u,error:d})})}catch(e){if(oe(e))return{data:null,error:e};throw e}}async _challenge(t){try{return await this._useSession(async e=>{var r;const{data:n,error:i}=e;return i?{data:null,error:i}:await ae(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{headers:this.headers,jwt:(r=n?.session)===null||r===void 0?void 0:r.access_token})})}catch(e){if(oe(e))return{data:null,error:e};throw e}}async _challengeAndVerify(t){const{data:e,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:e.id,code:t.code})}async _listFactors(){const{data:{user:t},error:e}=await this._getUser();if(e)return{data:null,error:e};const r=t?.factors||[],n=r.filter(i=>i.factor_type==="totp"&&i.status==="verified");return{data:{all:r,totp:n},error:null}}async _getAuthenticatorAssuranceLevel(){return await this._useSession(async t=>{var e,r;const{data:{session:n},error:i}=t;if(i)return{data:null,error:i};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const u=this._decodeJWT(n.access_token);let d=null;u.aal&&(d=u.aal);let h=d;((r=(e=n.user.factors)===null||e===void 0?void 0:e.filter(l=>l.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(h="aal2");const c=u.amr||[];return{data:{currentLevel:d,nextLevel:h,currentAuthenticationMethods:c},error:null}})}}nt.nextInstanceID=0;class ph extends nt{constructor(t){super(t)}}var yh=globalThis&&globalThis.__awaiter||function(a,t,e,r){function n(i){return i instanceof e?i:new e(function(u){u(i)})}return new(e||(e=Promise))(function(i,u){function d(c){try{p(r.next(c))}catch(l){u(l)}}function h(c){try{p(r.throw(c))}catch(l){u(l)}}function p(c){c.done?i(c.value):n(c.value).then(d,h)}p((r=r.apply(a,t||[])).next())})};const gh={headers:If},mh={schema:"public"},bh={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},_h={};class wh{constructor(t,e,r){var n,i,u,d,h,p,c,l;if(this.supabaseUrl=t,this.supabaseKey=e,!t)throw new Error("supabaseUrl is required.");if(!e)throw new Error("supabaseKey is required.");const o=Mf(t);this.realtimeUrl=`${o}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${o}/auth/v1`,this.storageUrl=`${o}/storage/v1`,this.functionsUrl=`${o}/functions/v1`;const s=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,b={db:mh,realtime:_h,auth:Object.assign(Object.assign({},bh),{storageKey:s}),global:gh},g=Bf(r??{},b);this.storageKey=(i=(n=g.auth)===null||n===void 0?void 0:n.storageKey)!==null&&i!==void 0?i:"",this.headers=(d=(u=g.global)===null||u===void 0?void 0:u.headers)!==null&&d!==void 0?d:{},this.auth=this._initSupabaseAuthClient((h=g.auth)!==null&&h!==void 0?h:{},this.headers,(p=g.global)===null||p===void 0?void 0:p.fetch),this.fetch=qf(e,this._getAccessToken.bind(this),(c=g.global)===null||c===void 0?void 0:c.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},g.realtime)),this.rest=new Xt(`${o}/rest/v1`,{headers:this.headers,schema:(l=g.db)===null||l===void 0?void 0:l.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new Lc(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Rf(this.storageUrl,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},r){return this.rest.rpc(t,e,r)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,e;return yh(this,void 0,void 0,function*(){const{data:r}=yield this.auth.getSession();return(e=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&e!==void 0?e:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:n,storageKey:i,flowType:u,debug:d},h,p){const c={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new ph({url:this.authUrl,headers:Object.assign(Object.assign({},c),h),storageKey:i,autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:n,flowType:u,debug:d,fetch:p})}_initRealtimeClient(t){return new wf(this.realtimeUrl,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,r)=>{this._handleTokenChanged(e,"CLIENT",r?.access_token)})}_handleTokenChanged(t,e,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?(this.realtime.setAuth(r??null),this.changedAccessToken=r):t==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Oh=(a,t,e)=>new wh(a,t,e),Gt=Oh("https://fhcypsstothlyammqrvm.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZoY3lwc3N0b3RobHlhbW1xcnZtIiwicm9sZSI6ImFub24iLCJpYXQiOjE2ODczNzg0NzYsImV4cCI6MjAwMjk1NDQ3Nn0.hLjJdzbslh4KDBUD9I1KVo7r094H_GKAHpzP3MinDtU"),Eh=["порно","xxx"];var Sn={};Object.defineProperty(Sn,"__esModule",{value:!0});var Th=Object.assign||function(a){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r])}return a};function Ah(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}var kh={paste:!0,type:!0},Sh=/https?:\/\/[^\s]+/g,xh=/(?:\s|^)(https?:\/\/[^\s]+)/,Ph=function(t){var e=t.lastIndexOf(" "),r=e===-1?0:e+1;return t.slice(r)};function Nh(a){a.keyboard.addBinding({collapsed:!0,key:" ",prefix:xh,handler:function(e,r){var n=Ph(r.prefix),i=e.index-n.length,u=i?[{retain:i}]:[];return u.push({delete:n.length},{insert:n,attributes:{link:n}}),a.updateContents({ops:u}),!0}})}function jh(a){a.clipboard.addMatcher(Node.TEXT_NODE,function(t,e){if(typeof t.data=="string"){var r=t.data.match(Sh);if(r&&r.length>0){var n=[],i=t.data;r.forEach(function(u){var d=i.split(u),h=d.shift();n.push({insert:h}),n.push({insert:u,attributes:{link:u}}),i=d.join(u)}),n.push({insert:i}),e.ops=n}return e}})}var Rh=function a(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Ah(this,a);var r=Th({},kh,e);r.type&&Nh(t),r.paste&&jh(t)},Lh=Sn.default=Rh;mc.register("modules/autoLinks",Lh);const Ih={toolbar:[["bold","italic","underline","link","code"],[{list:"ordered"},{list:"bullet"}],["image"],["clean"]],autoLinks:!0};function Ch({user:a}){const[t,e]=Ne.useState(""),[r,n]=Ne.useState(""),[i,u]=Ne.useState([]);Ne.useEffect(()=>{d()},[]);async function d(){try{const{data:c,error:l}=await Gt.from("items12").select("*").eq("userId",a.id);if(l)throw l;c!=null&&u(c)}catch(c){alert(c.message)}}function h(c,l){let o=[];for(let s of Eh)(c.includes(s)||l.includes(s))&&o.push(s);return o}async function p(){try{let c=h(t,r);if(c.length>0){alert("Запрещенные слова: "+c.join(", "));return}if(!t){alert("Обязательное поле");return}if(!r){alert("Обязательное поле");return}if(t.length<6){alert("Не меньше 6 символов");return}if(r.length<30){alert("Не меньше 30 символов");return}const{data:l,error:o}=await Gt.from("items12").insert({name:t,description:r,userId:a.id}).single();if(alert('Запись добавлена! Перейдите на страницу "Записи"'),o)throw o;window.location.reload()}catch(c){alert(c.message)}}return ce.jsx(ce.Fragment,{children:ce.jsxs("div",{className:"mt-6 flex flex-col gap-6",children:[ce.jsx("input",{className:" w-full glass text-lg px-3 py-2 self-start rounded-md font-medium",type:"text",placeholder:"Мой шикарный Заголовок",id:"name",required:!0,onChange:c=>e(c.target.value)}),ce.jsx("div",{className:"rounded-md glass solid border-[1px] border-green-100",children:ce.jsx(Tc,{placeholder:"Моя новая запись... Поехали ✍",theme:"snow",required:!0,modules:Ih,value:Hn(r),onChange:n})}),ce.jsx("button",{className:"jbtn",onClick:()=>p(),children:"Добавить запись 🎉"})]})})}function $h(){const[a,t]=Ne.useState(""),[e,r]=Ne.useState(!1),n=It.useUser(),i=It.useSupabaseClient(),u=async h=>{try{r(!0);const{data:p,error:c}=await i.auth.signInWithOtp({email:h,options:{emailRedirectTo:"http://localhost:4321/auth"}});if(c)throw c;alert("Отлично!")}catch(p){alert(p.error_description||p.message)}finally{r(!1)}};async function d(){await i.auth.signOut()}return ce.jsx(ce.Fragment,{children:n===null?ce.jsxs("div",{children:[ce.jsx("input",{type:"email",className:"text-black",placeholder:"Email",value:a,onChange:h=>t(h.target.value)}),ce.jsx("button",{className:"",onClick:h=>{h.preventDefault(),u(a)},disabled:e,children:e?ce.jsx("span",{children:"Войти"}):ce.jsx("span",{children:"Входим..."})})]}):ce.jsxs(ce.Fragment,{children:[ce.jsxs("div",{className:"flex flex-wrap justify-between gap-5",children:[ce.jsx("div",{className:"jbtn",children:n.email}),ce.jsx("button",{className:"jbtn",onClick:()=>d(),children:"Выйти"})]}),ce.jsx(Ch,{user:n})]})})}function Bh(){return ce.jsx(ce.Fragment,{children:ce.jsx(It.SessionContextProvider,{supabaseClient:Gt,children:ce.jsx($h,{})})})}export{Bh as default};
